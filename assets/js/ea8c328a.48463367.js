"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[15692],{28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>c});var n=s(96540);const i={},o=n.createContext(i);function r(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(o.Provider,{value:t},e.children)}},62466:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/sc_crossScript_load_popup-582c1ab58e51fe0a8225d3a69781c9c9.png"},85876:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"development/security/cross-scripting","title":"Cross-scripting","description":"If two SWF files written with ActionScript 3.0, or two HTML files running in AIR","source":"@site/docs/development/security/cross-scripting.md","sourceDirName":"development/security","slug":"/development/security/cross-scripting","permalink":"/docs/development/security/cross-scripting","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/security/cross-scripting.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"mainSidebar","previous":{"title":"Loading content","permalink":"/docs/development/security/loading-content"},"next":{"title":"Accessing loaded media as data","permalink":"/docs/development/security/accessing-loaded-media-as-data"}}');var i=s(74848),o=s(28453);const r={sidebar_position:8},c="Cross-scripting",d={},l=[{value:"Stage security",id:"stage-security",level:2},{value:"Traversing the display list",id:"traversing-the-display-list",level:2},{value:"Event security",id:"event-security",level:2}];function a(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"cross-scripting",children:"Cross-scripting"})}),"\n",(0,i.jsxs)(t.p,{children:["If two SWF files written with ActionScript 3.0, or two HTML files running in AIR\nare served from the same domain\u2014for example, the URL for one SWF file is\n",(0,i.jsx)(t.code,{children:"http://www.example.com/swfA.swf"})," and the URL for the other is\n",(0,i.jsx)(t.code,{children:"http://www.example.com/swfB.swf"}),"  - then code defined in one file can examine and\nmodify variables, objects, properties, methods, and so on in the other, and vice\nversa. This is called ",(0,i.jsx)(t.em,{children:"cross-scripting"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["If the two files are served from different domains\u2014for example,\n",(0,i.jsx)(t.code,{children:"http://siteA.com/swfA.swf"})," and ",(0,i.jsx)(t.code,{children:"http://siteB.com/swfB.swf"})," - then, by default, Flash\nPlayer and AIR do not allow swfA.swf to script swfB.swf, nor swfB.swf to script\nswfA.swf. A SWF file gives permission to SWF files from other domains by calling\n",(0,i.jsx)(t.code,{children:"Security.allowDomain()"}),". By calling ",(0,i.jsx)(t.code,{children:'Security.allowDomain("siteA.com")'}),",\nswfB.swf gives SWF files from siteA.com permission to script it."]}),"\n",(0,i.jsx)(t.p,{children:"Cross-scripting is not supported between AVM1 SWF files and AVM2 SWF files. An\nAVM1 SWF file is one created by using ActionScript 1.0 or ActionScript 2.0.\n(AVM1 and AVM2 refer to the ActionScript Virtual Machine.) You can, however, use\nthe LocalConnection class to send data between AVM1 and AVM2."}),"\n",(0,i.jsxs)(t.p,{children:["In any cross-domain situation, it is important to be clear about the two parties\ninvolved. For the purposes of this discussion, the side that is performing the\ncross-scripting is called the ",(0,i.jsx)(t.em,{children:"accessing party"})," (usually the accessing SWF), and\nthe other side is called the ",(0,i.jsx)(t.em,{children:"party being accessed"})," (usually the SWF being\naccessed). When siteA.swf scripts siteB.swf, siteA.swf is the accessing party,\nand siteB.swf is the party being accessed, as the following illustration shows:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:s(62466).A+"",width:"498",height:"476"})}),"\n",(0,i.jsxs)(t.p,{children:["Cross-domain permissions that are established with the ",(0,i.jsx)(t.code,{children:"Security.allowDomain()"}),"\nmethod are asymmetrical. In the previous example, siteA.swf can script\nsiteB.swf, but siteB.swf cannot script siteA.swf, because siteA.swf has not\ncalled the ",(0,i.jsx)(t.code,{children:"Security.allowDomain()"})," method to give SWF files at siteB.com\npermission to script it. You can set up symmetrical permissions by having both\nSWF files call the ",(0,i.jsx)(t.code,{children:"Security.allowDomain()"})," method."]}),"\n",(0,i.jsxs)(t.p,{children:["In addition to protecting SWF files from cross-domain scripting originated by\nother SWF files, Flash Player protects SWF files from cross-domain scripting\noriginated by HTML files. HTML-to-SWF scripting can occur with callbacks\nestablished through the ",(0,i.jsx)(t.code,{children:"ExternalInterface.addCallback()"})," method. When\nHTML-to-SWF scripting crosses domains, the SWF file being accessed must call the\n",(0,i.jsx)(t.code,{children:"Security.allowDomain()"})," method, just as when the accessing party is a SWF file,\nor the operation will fail. For more information, see\n",(0,i.jsx)(t.a,{href:"/docs/development/security/permission-controls#author-developer-controls",children:"Author (developer) controls"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Also, Flash Player provides security controls for SWF-to-HTML scripting. For\nmore information, see\n",(0,i.jsx)(t.a,{href:"/docs/development/security/controlling-outbound-url-access",children:"Controlling outbound URL access"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"stage-security",children:"Stage security"}),"\n",(0,i.jsx)(t.p,{children:"Some properties and methods of the Stage object are available to any sprite or\nmovie clip on the display list."}),"\n",(0,i.jsx)(t.p,{children:"However, the Stage object is said to have an owner: the first SWF file loaded.\nBy default, the following properties and methods of the Stage object are\navailable only to SWF files in the same security sandbox as the Stage owner:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{}),(0,i.jsx)(t.th,{})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Properties"}),(0,i.jsx)(t.td,{children:"Methods"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"align"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"addChild()"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"displayState"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"addChildAt()"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"frameRate"}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"addEventListener()"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"height"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"dispatchEvent()"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"mouseChildren"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"hasEventListener()"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"numChildren"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"setChildIndex()"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"quality"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"willTrigger()"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"scaleMode"})}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"showDefaultContextMenu"})}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"stageFocusRect"})}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"stageHeight"})}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"stageWidth"})}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"tabChildren"})}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"textSnapshot"})}),(0,i.jsx)(t.td,{})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:"width"})}),(0,i.jsx)(t.td,{})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["In order for a SWF file in a sandbox other than that of the Stage owner to\naccess these properties and methods, the Stage owner SWF file must call the\n",(0,i.jsx)(t.code,{children:"Security.allowDomain()"})," method to permit the domain of the external sandbox.\nFor more information, see\n",(0,i.jsx)(t.a,{href:"/docs/development/security/permission-controls#author-developer-controls",children:"Author (developer) controls"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"frameRate"})," property is a special case\u2014any SWF file can read the ",(0,i.jsx)(t.code,{children:"frameRate"}),"\nproperty. However, only those in the Stage owner's security sandbox (or those\ngranted permission by a call to the ",(0,i.jsx)(t.code,{children:"Security.allowDomain()"})," method) can change\nthe property."]}),"\n",(0,i.jsxs)(t.p,{children:["There are also restrictions on the ",(0,i.jsx)(t.code,{children:"removeChildAt()"})," and ",(0,i.jsx)(t.code,{children:"swapChildrenAt()"}),"\nmethods of the Stage object, but these are different from the other\nrestrictions. Rather than needing to be in the same domain as the Stage owner,\nto call these methods code must be in the same domain as the owner of the\naffected child object(s), or the child object(s) can call the\n",(0,i.jsx)(t.code,{children:"Security.allowDomain()"})," method."]}),"\n",(0,i.jsx)(t.h2,{id:"traversing-the-display-list",children:"Traversing the display list"}),"\n",(0,i.jsxs)(t.p,{children:["The ability of one SWF file to access display objects loaded from other\nsandboxes is restricted. In order for a SWF file to access a display object\ncreated by another SWF file in a different sandbox, the SWF file being accessed\nmust call the ",(0,i.jsx)(t.code,{children:"Security.allowDomain()"})," method to permit access by the domain of\nthe accessing SWF file. For more information, see\n",(0,i.jsx)(t.a,{href:"/docs/development/security/permission-controls#author-developer-controls",children:"Author (developer) controls"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["To access a Bitmap object that was loaded by a Loader object, a URL policy file\nmust exist on the origin server of the image file, and that policy file must\ngrant permission to the domain of the SWF file trying to access the Bitmap\nobject (see\n",(0,i.jsx)(t.a,{href:"/docs/development/security/permission-controls#website-controls-policy-files",children:"Website controls (policy files)"}),")."]}),"\n",(0,i.jsxs)(t.p,{children:["The LoaderInfo object that corresponds to a loaded file (and to the Loader\nobject) includes the following three properties, which define the relationship\nbetween the loaded object and the Loader object: ",(0,i.jsx)(t.code,{children:"childAllowsParent"}),",\n",(0,i.jsx)(t.code,{children:"parentAllowsChild"}),", and ",(0,i.jsx)(t.code,{children:"sameDomain"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"event-security",children:"Event security"}),"\n",(0,i.jsxs)(t.p,{children:["Events related to the display list have security access limitations, based on\nthe sandbox of the display object that is dispatching the event. An event in the\ndisplay list has bubbling and capture phases (described in\n",(0,i.jsx)(t.a,{href:"/docs/development/core-actionscript-classes/handling-events/",children:"Handling events"}),").\nDuring the bubbling and capture phases, an event migrates from the source\ndisplay object through parent display objects in the display list. If a parent\nobject is in a different security sandbox than the source display object, the\ncapture and bubble phase stops below that parent object, unless there is mutual\ntrust between the owner of the parent object and the owner of the source object.\nThis mutual trust can be achieved by the following:"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"The SWF file that owns the parent object must call the"}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"`Security.allowDomain()` method to trust the domain of the SWF file that\nowns the source object.\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsx)(t.li,{children:"The SWF file that owns the source object must call the"}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"`Security.allowDomain()` method to trust the domain of the SWF file that\nowns the parent object.\n"})}),"\n",(0,i.jsxs)(t.p,{children:["The LoaderInfo object that corresponds to a loaded file (and to the Loader\nobject) includes the following two properties, which define the relationship\nbetween the loaded object and the Loader object: ",(0,i.jsx)(t.code,{children:"childAllowsParent"})," and\n",(0,i.jsx)(t.code,{children:"parentAllowsChild"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"For events that are dispatched from objects other than display objects, there\nare no security checks or security-related implications."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);