"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[44260],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var i=t(96540);const o={},a=i.createContext(o);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(a.Provider,{value:n},e.children)}},45307:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"development/security/air-security/html-security-in-adobe-air","title":"HTML security in Adobe AIR","description":"This topic describes the AIR HTML security architecture and how to use iframes,","source":"@site/docs/development/security/air-security/html-security-in-adobe-air.md","sourceDirName":"development/security/air-security","slug":"/development/security/air-security/html-security-in-adobe-air","permalink":"/docs/development/security/air-security/html-security-in-adobe-air","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/security/air-security/html-security-in-adobe-air.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"mainSidebar","previous":{"title":"Installation and updates","permalink":"/docs/development/security/air-security/installation-and-updates"},"next":{"title":"Scripting between content in different domains","permalink":"/docs/development/security/air-security/scripting-between-content-in-different-domains"}}');var o=t(74848),a=t(28453);const r={sidebar_position:3},s="HTML security in Adobe AIR",c={},d=[{value:"Overview on configuring your HTML-based application",id:"overview-on-configuring-your-html-based-application",level:2},{value:"Setting up a parent-child sandbox relationship",id:"setting-up-a-parent-child-sandbox-relationship",level:3},{value:"Setting up a bridge between parent and child frames in different sandboxes or domains",id:"setting-up-a-bridge-between-parent-and-child-frames-in-different-sandboxes-or-domains",level:3},{value:"Code restrictions for content in different sandboxes",id:"code-restrictions-for-content-in-different-sandboxes",level:2},{value:"Restrictions on using the JavaScript eval() function and similar techniques",id:"restrictions-on-using-the-javascript-eval-function-and-similar-techniques",level:3},{value:"Restrictions on access to AIR APIs (for non-application sandboxes)",id:"restrictions-on-access-to-air-apis-for-non-application-sandboxes",level:3},{value:"Restrictions on using XMLHttpRequest calls",id:"restrictions-on-using-xmlhttprequest-calls",level:3},{value:"Restrictions on loading CSS, frame, iframe, and img elements (for content in non-application sandboxes)",id:"restrictions-on-loading-css-frame-iframe-and-img-elements-for-content-in-non-application-sandboxes",level:3},{value:"Restrictions on calling the JavaScript window.open() method",id:"restrictions-on-calling-the-javascript-windowopen-method",level:3},{value:"Errors when calling restricted code",id:"errors-when-calling-restricted-code",level:3},{value:"Sandbox protection when loading HTML content from a string",id:"sandbox-protection-when-loading-html-content-from-a-string",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"html-security-in-adobe-air",children:"HTML security in Adobe AIR"})}),"\n",(0,o.jsx)(n.p,{children:"This topic describes the AIR HTML security architecture and how to use iframes,\nframes, and the sandbox bridge to set up HTML-based applications and safely\nintegrate HTML content into SWF-based applications."}),"\n",(0,o.jsxs)(n.p,{children:["The runtime enforces rules and provides mechanisms for overcoming possible\nsecurity vulnerabilities in HTML and JavaScript. The same rules are enforced\nwhether your application is primarily written in JavaScript or whether you load\nthe HTML and JavaScript content into a SWF-based application. Content in the\napplication sandbox and the non-application security sandbox have different\nprivileges. When loading content into an iframe or frame, the runtime provides a\nsecure ",(0,o.jsx)(n.em,{children:"sandbox bridge"})," mechanism that allows content in the frame or iframe to\ncommunicate securely with content in the application security sandbox."]}),"\n",(0,o.jsx)(n.p,{children:"The AIR SDK provides three classes for rendering HTML content."}),"\n",(0,o.jsx)(n.p,{children:"The HTMLLoader class provides close integration between JavaScript code and the\nAIR APIs."}),"\n",(0,o.jsx)(n.p,{children:"The StageWebView class is an HTML rendering class and has very limited\nintegration with the host AIR application. Content loaded by the StageWebView\nclass is never placed in the application security sandbox and cannot access data\nor call functions in the host AIR application. On desktop platforms, the\nStageWebView class uses the built-in AIR HTML engine, based on Webkit, which is\nalso used by the HTMLLoader class. On mobile platforms, the StageWebView class\nuses the HTML control provided by the operating system. Thus, on mobile\nplatforms the StageWebView class has the same security considerations and\nvulnerabilities as the system web browser."}),"\n",(0,o.jsx)(n.p,{children:"The TextField class can display strings of HTML text. No JavaScript can be\nexecuted, but the text can include links and externally loaded images."}),"\n",(0,o.jsxs)(n.p,{children:["For more information, see\n",(0,o.jsx)(n.a,{href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/avoiding-security-related-javascript-errors",children:"Avoiding security-related JavaScript errors"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"overview-on-configuring-your-html-based-application",children:"Overview on configuring your HTML-based application"}),"\n",(0,o.jsx)(n.p,{children:"Frames and iframes provide a convenient structure for organizing HTML content in\nAIR. Frames provide a means both for maintaining data persistence and for\nworking securely with remote content."}),"\n",(0,o.jsx)(n.p,{children:'Because HTML in AIR retains its normal, page-based organization, the HTML\nenvironment completely refreshes if the top frame of your HTML content\n"navigates" to a different page. You can use frames and iframes to maintain data\npersistence in AIR, much the same as you would for a web application running in\na browser. Define your main application objects in the top frame and they\npersist as long as you don\'t allow the frame to navigate to a new page. Use\nchild frames or iframes to load and display the transient parts of the\napplication. (There are a variety of ways to maintain data persistence that can\nbe used in addition to, or instead of, frames. These include cookies, local\nshared objects, local file storage, the encrypted file store, and local database\nstorage.)'}),"\n",(0,o.jsxs)(n.p,{children:["Because HTML in AIR retains its normal, blurred line between executable code and\ndata, AIR puts content in the top frame of the HTML environment into the\napplication sandbox. After the page ",(0,o.jsx)(n.code,{children:"load"})," event, AIR restricts any operations,\nsuch as ",(0,o.jsx)(n.code,{children:"eval()"}),", that can convert a string of text into an executable object.\nThis restriction is enforced even when an application does not load remote\ncontent. To allow HTML content to execute these restricted operations, you must\nuse frames or iframes to place the content into a non-application sandbox.\n(Running content in a sandboxed child frame may be necessary when using some\nJavaScript application frameworks that rely on the ",(0,o.jsx)(n.code,{children:"eval()"})," function.) For a\ncomplete list of the restrictions on JavaScript in the application sandbox, see\n",(0,o.jsx)(n.a,{href:"#code-restrictions-for-content-in-different-sandboxes",children:"Code restrictions for content in different sandboxes"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Because HTML in AIR retains its ability to load remote, possibly insecure\ncontent, AIR enforces a same-origin policy that prevents content in one domain\nfrom interacting with content in another. To allow interaction between\napplication content and content in another domain, you can set up a bridge to\nserve as the interface between a parent and a child frame."}),"\n",(0,o.jsx)(n.h3,{id:"setting-up-a-parent-child-sandbox-relationship",children:"Setting up a parent-child sandbox relationship"}),"\n",(0,o.jsxs)(n.p,{children:["AIR adds the ",(0,o.jsx)(n.code,{children:"sandboxRoot"})," and ",(0,o.jsx)(n.code,{children:"documentRoot"})," attributes to the HTML frame and\niframe elements. These attributes let you treat application content as if it\ncame from another domain:"]}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Attribute"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"sandboxRoot"}),(0,o.jsxs)(n.td,{children:["The URL to use for determining the sandbox and domain in which to place the frame content. The ",(0,o.jsx)(n.code,{children:"file:"}),", ",(0,o.jsx)(n.code,{children:"http:"}),", or ",(0,o.jsx)(n.code,{children:"https:"})," URL schemes must be used."]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"documentRoot"}),(0,o.jsxs)(n.td,{children:["The URL from which to load the frame content. The ",(0,o.jsx)(n.code,{children:"file:"}),", ",(0,o.jsx)(n.code,{children:"app:"}),", or ",(0,o.jsx)(n.code,{children:"app-storage:"})," URL schemes must be used."]})]})]})]}),"\n",(0,o.jsxs)(n.p,{children:["The following example maps content installed in the sandbox subdirectory of the\napplication to run in the remote sandbox and the ",(0,o.jsx)(n.a,{href:"http://www.example.com",children:"www.example.com"})," domain:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'<iframe\n\tsrc="ui.html"\n\tsandboxRoot="http://www.example.com/local/"\n\tdocumentRoot="app:/sandbox/">\n</iframe>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"setting-up-a-bridge-between-parent-and-child-frames-in-different-sandboxes-or-domains",children:"Setting up a bridge between parent and child frames in different sandboxes or domains"}),"\n",(0,o.jsxs)(n.p,{children:["AIR adds the ",(0,o.jsx)(n.code,{children:"childSandboxBridge"})," and ",(0,o.jsx)(n.code,{children:"parentSandboxBridge"})," properties to the\n",(0,o.jsx)(n.code,{children:"window"})," object of any child frame. These properties let you define bridges to\nserve as interfaces between a parent and a child frame. Each bridge goes in one\ndirection:"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"childSandboxBridge"})," \u2014 The ",(0,o.jsx)(n.code,{children:"childSandboxBridge"})," property allows the child frame\nto expose an interface to content in the parent frame. To expose an interface,\nyou set the ",(0,o.jsx)(n.code,{children:"childSandbox"})," property to a function or object in the child frame.\nYou can then access the object or function from content in the parent frame. The\nfollowing example shows how a script running in a child frame can expose an\nobject containing a function and a property to its parent:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'var interface = {};\ninterface.calculatePrice = function(){\n\treturn .45 + 1.20;\n}\ninterface.storeID = "abc"\nwindow.childSandboxBridge = interface;\n'})}),"\n",(0,o.jsxs)(n.p,{children:["If this child content is in an iframe assigned an ",(0,o.jsx)(n.code,{children:"id"})," of ",(0,o.jsx)(n.code,{children:'"child"'}),", you can\naccess the interface from parent content by reading the ",(0,o.jsx)(n.code,{children:"childSandboxBridge"}),"\nproperty of the frame:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'var childInterface = document.getElementById("child").childSandboxBridge;\nair.trace(childInterface.calculatePrice()); //traces "1.65"\nair.trace(childInterface.storeID)); //traces "abc"\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"parentSandboxBridge"})," \u2014 The ",(0,o.jsx)(n.code,{children:"parentSandboxBridge"})," property allows the parent\nframe to expose an interface to content in the child frame. To expose an\ninterface, you set the ",(0,o.jsx)(n.code,{children:"parentSandbox"})," property of the child frame to a function\nor object in the parent frame. You can then access the object or function from\ncontent in the child frame. The following example shows how a script running in\nthe parent frame can expose an object containing a save function to a child:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'var interface = {};\ninterface.save = function(text){\n\tvar saveFile = air.File("app-storage:/save.txt");\n\t//write text to file\n}\ndocument.getElementById("child").parentSandboxBridge = interface;\n'})}),"\n",(0,o.jsx)(n.p,{children:"Using this interface, content in the child frame could save text to a file named\nsave.txt. However, it would not have any other access to the file system. In\ngeneral, application content should expose the narrowest possible interface to\nother sandboxes. The child content could call the save function as follows:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'var textToSave = "A string.";\nwindow.parentSandboxBridge.save(textToSave);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["If child content attempts to set a property of the ",(0,o.jsx)(n.code,{children:"parentSandboxBridge"})," object,\nthe runtime throws a SecurityError exception. If parent content attempts to set\na property of the ",(0,o.jsx)(n.code,{children:"childSandboxBridge"})," object, the runtime throws a\nSecurityError exception."]}),"\n",(0,o.jsx)(n.h2,{id:"code-restrictions-for-content-in-different-sandboxes",children:"Code restrictions for content in different sandboxes"}),"\n",(0,o.jsxs)(n.p,{children:["As discussed in the introduction to this topic,\n",(0,o.jsx)(n.a,{href:"#",children:"HTML security in Adobe AIR"}),', the runtime enforces\nrules and provides mechanisms for overcoming possible security vulnerabilities\nin HTML and JavaScript. This topic lists those restrictions. If code attempts to\ncall these restricted APIs, the runtime throws an error with the message "Adobe\nAIR runtime security violation for JavaScript code in the application security\nsandbox."']}),"\n",(0,o.jsxs)(n.p,{children:["For more information, see\n",(0,o.jsx)(n.a,{href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/avoiding-security-related-javascript-errors",children:"Avoiding security-related JavaScript errors"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"restrictions-on-using-the-javascript-eval-function-and-similar-techniques",children:"Restrictions on using the JavaScript eval() function and similar techniques"}),"\n",(0,o.jsxs)(n.p,{children:["For HTML content in the application security sandbox, there are limitations on\nusing APIs that can dynamically transform strings into executable code after the\ncode is loaded (after the ",(0,o.jsx)(n.code,{children:"onload"})," event of the ",(0,o.jsx)(n.code,{children:"body"})," element has been\ndispatched and the ",(0,o.jsx)(n.code,{children:"onload"})," handler function has finished executing). This is to\nprevent the application from inadvertently injecting (and executing) code from\nnon-application sources (such as potentially insecure network domains)."]}),"\n",(0,o.jsx)(n.p,{children:"For example, if your application uses string data from a remote source to write\nto the innerHTML property of a DOM element, the string could include executable\n(JavaScript) code that could perform insecure operations. However, while the\ncontent is loading, there is no risk of inserting remote strings into the DOM."}),"\n",(0,o.jsxs)(n.p,{children:["One restriction is in the use of the JavaScript ",(0,o.jsx)(n.code,{children:"eval()"})," function. Once code in\nthe application sandbox is loaded and after processing of the onload event\nhandler, you can only use the ",(0,o.jsx)(n.code,{children:"eval()"})," function in limited ways. The following\nrules apply to the use of the ",(0,o.jsx)(n.code,{children:"eval()"})," function ",(0,o.jsx)(n.em,{children:"after"})," code is loaded from the\napplication security sandbox:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Expressions involving literals are allowed. For example:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'eval("null");\neval("3 + .14");\neval("\'foo\'");\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Object literals are allowed, as in the following:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"{ prop1: val1, prop2: val2 }\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Object literal setter/getters are ",(0,o.jsx)(n.em,{children:"prohibited"})," , as in the following:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"{ get prop1() { ... }, set prop1(v) { ... } }\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Array literals are allowed, as in the following:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"[ val1, val2, val3 ]\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Expressions involving property reads are ",(0,o.jsx)(n.em,{children:"prohibited"})," , as in the following:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"a.b.c\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Function invocation is ",(0,o.jsx)(n.em,{children:"prohibited."})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Function definitions are ",(0,o.jsx)(n.em,{children:"prohibited."})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Setting any property is ",(0,o.jsx)(n.em,{children:"prohibited."})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Function literals are ",(0,o.jsx)(n.em,{children:"prohibited."})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["However, while the code is loading, before the ",(0,o.jsx)(n.code,{children:"onload"})," event, and during\nexecution the ",(0,o.jsx)(n.code,{children:"onload"})," event handler function, these restrictions do not apply\nto content in the application security sandbox."]}),"\n",(0,o.jsx)(n.p,{children:"For example, after code is loaded, the following code results in the runtime\nthrowing an exception:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'eval("alert(44)");\neval("myFunction(44)");\neval("NativeApplication.applicationID");\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Dynamically generated code, such as that which is made when calling the ",(0,o.jsx)(n.code,{children:"eval()"}),"\nfunction, would pose a security risk if allowed within the application sandbox.\nFor example, an application may inadvertently execute a string loaded from a\nnetwork domain, and that string may contain malicious code. For example, this\ncould be code to delete or alter files on the user's computer. Or it could be\ncode that reports back the contents of a local file to an untrusted network\ndomain."]}),"\n",(0,o.jsx)(n.p,{children:"Ways to generate dynamic code are the following:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Calling the ",(0,o.jsx)(n.code,{children:"eval()"})," function."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Using ",(0,o.jsx)(n.code,{children:"innerHTML"})," properties or DOM functions to insert script tags that load\na script outside of the application directory."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Using ",(0,o.jsx)(n.code,{children:"innerHTML"})," properties or DOM functions to insert script tags that have\ninline code (rather than loading a script via the ",(0,o.jsx)(n.code,{children:"src"})," attribute)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Setting the ",(0,o.jsx)(n.code,{children:"src"})," attribute for a ",(0,o.jsx)(n.code,{children:"script"})," tags to load a JavaScript file that\nis outside of the application directory."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Using the ",(0,o.jsx)(n.code,{children:"javascript"})," URL scheme (as in ",(0,o.jsx)(n.code,{children:"href=\"javascript:alert('Test')\""}),")."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Using the ",(0,o.jsx)(n.code,{children:"setInterval()"})," or ",(0,o.jsx)(n.code,{children:"setTimout()"})," function where the first parameter\n(defining the function to run asynchronously) is a string (to be evaluated)\nrather than a function name (as in ",(0,o.jsx)(n.code,{children:"setTimeout('x = 4', 1000)"}),")."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Calling ",(0,o.jsx)(n.code,{children:"document.write()"})," or ",(0,o.jsx)(n.code,{children:"document.writeln()"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Code in the application security sandbox can only use these methods while\ncontent is loading."}),"\n",(0,o.jsxs)(n.p,{children:["These restrictions do ",(0,o.jsx)(n.em,{children:"not"})," prevent using ",(0,o.jsx)(n.code,{children:"eval()"})," with JSON object literals.\nThis lets your application content work with the JSON JavaScript library.\nHowever, you are restricted from using overloaded JSON code (with event\nhandlers)."]}),"\n",(0,o.jsxs)(n.p,{children:["For other Ajax frameworks and JavaScript code libraries, check to see if the\ncode in the framework or library works within these restrictions on dynamically\ngenerated code. If they do not, include any content that uses the framework or\nlibrary in a non-application security sandbox. For details, see\n",(0,o.jsx)(n.a,{href:"/docs/development/security/security-sandboxes#restrictions-for-javascript-inside-air",children:"Restrictions for JavaScript inside AIR"}),"\nand\n",(0,o.jsx)(n.a,{href:"/docs/development/security/air-security/working-securely-with-untrusted-content#scripting-between-application-and-non-application-content",children:"Scripting between application and non-application content"}),".\nAdobe maintains a list of Ajax frameworks known to support the application\nsecurity sandbox, at ",(0,o.jsx)(n.a,{href:"https://www.adobe.com/products/air/develop/ajax/features/",children:"https://www.adobe.com/products/air/develop/ajax/features/"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Unlike content in the application security sandbox, JavaScript content in a\nnon-application security sandbox ",(0,o.jsx)(n.em,{children:"can"})," call the ",(0,o.jsx)(n.code,{children:"eval()"})," function to execute\ndynamically generated code at any time."]}),"\n",(0,o.jsx)(n.h3,{id:"restrictions-on-access-to-air-apis-for-non-application-sandboxes",children:"Restrictions on access to AIR APIs (for non-application sandboxes)"}),"\n",(0,o.jsxs)(n.p,{children:["JavaScript code in a non-application sandbox does not have access to the\n",(0,o.jsx)(n.code,{children:"window.runtime"})," object, and as such this code cannot execute AIR APIs. If\ncontent in a non-application security sandbox calls the following code, the\napplication throws a TypeError exception:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"try {\n\twindow.runtime.flash.system.NativeApplication.nativeApplication.exit();\n}\ncatch (e)\n{\n\talert(e);\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The exception type is TypeError (undefined value), because content in the\nnon-application sandbox does not recognize the ",(0,o.jsx)(n.code,{children:"window.runtime"})," object, so it is\nseen as an undefined value."]}),"\n",(0,o.jsxs)(n.p,{children:["You can expose runtime functionality to content in a non-application sandbox by\nusing a script bridge. For details, see and\n",(0,o.jsx)(n.a,{href:"/docs/development/security/air-security/working-securely-with-untrusted-content#scripting-between-application-and-non-application-content",children:"Scripting between application and non-application content"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"restrictions-on-using-xmlhttprequest-calls",children:"Restrictions on using XMLHttpRequest calls"}),"\n",(0,o.jsxs)(n.p,{children:["HTML content in the application security sandbox cannot use synchronous\nXMLHttpRequest methods to load data from outside of the application sandbox\nwhile the HTML content is loading and during ",(0,o.jsx)(n.code,{children:"onLoad"})," event."]}),"\n",(0,o.jsxs)(n.p,{children:["By default, HTML content in non-application security sandboxes are not allowed\nto use the JavaScript XMLHttpRequest object to load data from domains other than\nthe domain calling the request. A ",(0,o.jsx)(n.code,{children:"frame"})," or ",(0,o.jsx)(n.code,{children:"iframe"})," tag can include an\n",(0,o.jsx)(n.code,{children:"allowcrosscomainxhr"})," attribute. Setting this attribute to any non-null value\nallows the content in the frame or iframe to use the JavaScript XMLHttpRequest\nobject to load data from domains other than the domain of the code calling the\nrequest:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'<iframe id="UI"\n\tsrc="http://example.com/ui.html"\n\tsandboxRoot="http://example.com/"\n\tallowcrossDomainxhr="true"\n\tdocumentRoot="app:/">\n</iframe>\n'})}),"\n",(0,o.jsxs)(n.p,{children:["For more information, see\n",(0,o.jsx)(n.a,{href:"/docs/development/security/air-security/scripting-between-content-in-different-domains",children:"Scripting between content in different domains"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"restrictions-on-loading-css-frame-iframe-and-img-elements-for-content-in-non-application-sandboxes",children:"Restrictions on loading CSS, frame, iframe, and img elements (for content in non-application sandboxes)"}),"\n",(0,o.jsxs)(n.p,{children:["HTML content in remote (network) security sandboxes can only load CSS, ",(0,o.jsx)(n.code,{children:"frame"}),",\n",(0,o.jsx)(n.code,{children:"iframe"}),", and ",(0,o.jsx)(n.code,{children:"img"})," content from remote sandboxes (from network URLs)."]}),"\n",(0,o.jsxs)(n.p,{children:["HTML content in local-with-filesystem, local-with-networking, or local-trusted\nsandboxes can only load CSS, frame, iframe, and ",(0,o.jsx)(n.code,{children:"img"})," content from local\nsandboxes (not from application or remote sandboxes)."]}),"\n",(0,o.jsx)(n.h3,{id:"restrictions-on-calling-the-javascript-windowopen-method",children:"Restrictions on calling the JavaScript window.open() method"}),"\n",(0,o.jsxs)(n.p,{children:["If a window that is created via a call to the JavaScript ",(0,o.jsx)(n.code,{children:"window.open()"})," method\ndisplays content from a non-application security sandbox, the window's title\nbegins with the title of the main (launching) window, followed by a colon\ncharacter. You cannot use code to move that portion of the title of the window\noff screen."]}),"\n",(0,o.jsxs)(n.p,{children:["Content in non-application security sandboxes can only successfully call the\nJavaScript ",(0,o.jsx)(n.code,{children:"window.open()"})," method in response to an event triggered by a user\nmouse or keyboard interaction. This prevents non-application content from\ncreating windows that might be used deceptively (for example, for phishing\nattacks). Also, the event handler for the mouse or keyboard event cannot set the\n",(0,o.jsx)(n.code,{children:"window.open()"})," method to execute after a delay (for example by calling the\n",(0,o.jsx)(n.code,{children:"setTimeout()"})," function)."]}),"\n",(0,o.jsxs)(n.p,{children:["Content in remote (network) sandboxes can only use the ",(0,o.jsx)(n.code,{children:"window.open()"})," method to\nopen content in remote network sandboxes. It cannot use the ",(0,o.jsx)(n.code,{children:"window.open()"}),"\nmethod to open content from the application or local sandboxes."]}),"\n",(0,o.jsxs)(n.p,{children:["Content in the local-with-filesystem, local-with-networking, or local-trusted\nsandboxes (see ",(0,o.jsx)(n.a,{href:"/docs/development/security/security-sandboxes",children:"Security sandboxes"}),") can only use the\n",(0,o.jsx)(n.code,{children:"window.open()"})," method to open content in local sandboxes. It cannot use\n",(0,o.jsx)(n.code,{children:"window.open()"})," to open content from the application or remote sandboxes."]}),"\n",(0,o.jsx)(n.h3,{id:"errors-when-calling-restricted-code",children:"Errors when calling restricted code"}),"\n",(0,o.jsx)(n.p,{children:'If you call code that is restricted from use in a sandbox due to these security\nrestrictions, the runtime dispatches a JavaScript error: "Adobe AIR runtime\nsecurity violation for JavaScript code in the application security sandbox."'}),"\n",(0,o.jsxs)(n.p,{children:["For more information, see\n",(0,o.jsx)(n.a,{href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/avoiding-security-related-javascript-errors",children:"Avoiding security-related JavaScript errors"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"sandbox-protection-when-loading-html-content-from-a-string",children:"Sandbox protection when loading HTML content from a string"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"loadString()"})," method of the HTMLLoader class lets you create HTML content\nat run time. However, data that you use as the HTML content can be corrupted if\nthe data is loaded from an insecure Internet source. For this reason, by\ndefault, HTML created using the ",(0,o.jsx)(n.code,{children:"loadString()"})," method is not placed in the\napplication sandbox and it has no access to AIR APIs. However, you can set the\n",(0,o.jsx)(n.code,{children:"placeLoadStringContentInApplicationSandbox"})," property of an HTMLLoader object to\ntrue to place HTML created using the ",(0,o.jsx)(n.code,{children:"loadString()"})," method into the application\nsandbox. For more information, see\n",(0,o.jsx)(n.a,{href:"/docs/development/html-content-in-air/programming-html-and-javascript-in-air/about-the-htmlloader-class#loading-html-content-from-a-string",children:"Loading HTML content from a string"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);