"use strict";(globalThis.webpackChunkairsdk_dev=globalThis.webpackChunkairsdk_dev||[]).push([[25510],{2559:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>i,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"development/rich-media-content/using-digital-rights-management/using-the-drmmanager-class","title":"Using the DRMManager class","description":"Use the DRMManager class to manage vouchers and media rights server sessions in","source":"@site/docs/development/rich-media-content/using-digital-rights-management/using-the-drmmanager-class.md","sourceDirName":"development/rich-media-content/using-digital-rights-management","slug":"/development/rich-media-content/using-digital-rights-management/using-the-drmmanager-class","permalink":"/docs/development/rich-media-content/using-digital-rights-management/using-the-drmmanager-class","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/rich-media-content/using-digital-rights-management/using-the-drmmanager-class.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"mainSidebar","previous":{"title":"Using the DRMErrorEvent class","permalink":"/docs/development/rich-media-content/using-digital-rights-management/using-the-drmerrorevent-class"},"next":{"title":"Using the DRMContentData class","permalink":"/docs/development/rich-media-content/using-digital-rights-management/using-the-drmcontentdata-class"}}');var s=n(74848),o=n(28453);const i={sidebar_position:6},r="Using the DRMManager class",c={},h=[{value:"DRMStatus Events",id:"drmstatus-events",level:2},{value:"DRMAuthenticationComplete events",id:"drmauthenticationcomplete-events",level:2},{value:"DRMAuthenticationError events",id:"drmauthenticationerror-events",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"using-the-drmmanager-class",children:"Using the DRMManager class"})}),"\n",(0,s.jsx)(t.p,{children:"Use the DRMManager class to manage vouchers and media rights server sessions in\napplications."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Voucher management (AIR only)"})}),"\n",(0,s.jsxs)(t.p,{children:["Whenever a user plays protected content, the runtime obtains and caches the\nlicense required to view the content. If the application saves the file locally,\nand the license allows offline playback, the user can view the content in the\nAIR application. Such local offline playback succeeds even if a connection to\nthe media rights server is not available. Using the DRMManager and the NetStream\n",(0,s.jsx)(t.code,{children:"preloadEmbeddedMetadata()"})," method, you can pre-cache the voucher. The\napplication does not have to obtain the license necessary to view the content.\nFor example, your application could download the media file and then obtain the\nvoucher while the user is still online."]}),"\n",(0,s.jsxs)(t.p,{children:["To preload a voucher, use the NetStream ",(0,s.jsx)(t.code,{children:"preloadEmbeddedMetadata()"})," method to\nobtain a DRMContentData object. The DRMContentData object contains the URL and\ndomain of the media rights server that can provide the license and describes\nwhether user authentication is required. With this information, you can call the\nDRMManager ",(0,s.jsx)(t.code,{children:"loadVoucher()"})," method to obtain and cache the voucher. The workflow\nfor pre-loading vouchers is described in more detail in\n",(0,s.jsx)(t.a,{href:"/docs/development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow#pre-loading-vouchers-for-offline-playback",children:"Pre-loading vouchers for offline playback"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Session management"})}),"\n",(0,s.jsx)(t.p,{children:"You can also use the DRMManager to authenticate the user to a media rights\nserver and to manage persistent sessions."}),"\n",(0,s.jsxs)(t.p,{children:["Call the DRMManager ",(0,s.jsx)(t.code,{children:"authenticate()"})," method to establish a session with the\nmedia rights server. When authentication is completed successfully, the\nDRMManager dispatches a DRMAuthenticationCompleteEvent object. This object\ncontains a session token. You can save this token to establish future sessions\nso that the user does not have to provide their account credentials. Pass the\ntoken to the ",(0,s.jsx)(t.code,{children:"setAuthenticationToken()"})," method to establish a new authenticated\nsession. (The settings of the server that generated the token determine the\ntoken expiration and other attributes. AIR application code should not interpret\nthe token data structure, because the structure may change in future AIR\nupdates.)"]}),"\n",(0,s.jsxs)(t.p,{children:["Authentication tokens can be transferred to other computers. To protect tokens,\nyou can store them in the AIR Encrypted Local Store. See\n",(0,s.jsx)(t.a,{href:"/docs/development/files-and-data/storing-local-data/encrypted-local-storage",children:"Encrypted local storage"}),"\nfor more information."]}),"\n",(0,s.jsx)(t.h2,{id:"drmstatus-events",children:"DRMStatus Events"}),"\n",(0,s.jsxs)(t.p,{children:["The DRMManager dispatches a DRMStatusEvent object after a call to the\n",(0,s.jsx)(t.code,{children:"loadVoucher()"})," method completes successfully."]}),"\n",(0,s.jsxs)(t.p,{children:["If a voucher is obtained, then the ",(0,s.jsx)(t.code,{children:"detail"}),' property (AIR only) of the event\nobject has the value: "DRM.voucherObtained", and the ',(0,s.jsx)(t.code,{children:"voucher"})," property contains\nthe DRMVoucher object."]}),"\n",(0,s.jsxs)(t.p,{children:["If a voucher is not obtained, then the ",(0,s.jsx)(t.code,{children:"detail"}),' property (AIR only) still has\nthe value: "DRM.voucherObtained"; however, the ',(0,s.jsx)(t.code,{children:"voucher"})," property is ",(0,s.jsx)(t.code,{children:"null"}),". A\nvoucher cannot be obtained if, for example, you use the LoadVoucherSetting of\n",(0,s.jsx)(t.em,{children:"localOnly"})," and there is no locally cached voucher."]}),"\n",(0,s.jsxs)(t.p,{children:["If the ",(0,s.jsx)(t.code,{children:"loadVoucher()"})," call does not complete successfully, perhaps because of\nan authentication or communication error, then the DRMManager dispatches a\nDRMErrorEvent or DRMAuthenticationErrorEvent object instead."]}),"\n",(0,s.jsx)(t.h2,{id:"drmauthenticationcomplete-events",children:"DRMAuthenticationComplete events"}),"\n",(0,s.jsxs)(t.p,{children:["The DRMManager dispatches a DRMAuthenticationCompleteEvent object when a user is\nsuccessfully authenticated through a call to the ",(0,s.jsx)(t.code,{children:"authenticate()"})," method."]}),"\n",(0,s.jsxs)(t.p,{children:["The DRMAuthenticationCompleteEvent object contains a reusable token that can be\nused to persist user authentication across application sessions. Pass this token\nto DRMManager ",(0,s.jsx)(t.code,{children:"setAuthenticationToken()"})," method to re-establish the session.\n(The token creator sets token attributes such as expiration. Adobe does not\nprovide an API for examining token attributes.)"]}),"\n",(0,s.jsx)(t.h2,{id:"drmauthenticationerror-events",children:"DRMAuthenticationError events"}),"\n",(0,s.jsxs)(t.p,{children:["The DRMManager dispatches a DRMAuthenticationErrorEvent object when a user\ncannot be successfully authenticated through a call to the ",(0,s.jsx)(t.code,{children:"authenticate()"})," or\n",(0,s.jsx)(t.code,{children:"setAuthenticationToken()"})," methods."]})]})}function l(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var a=n(96540);const s={},o=a.createContext(s);function i(e){const t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);