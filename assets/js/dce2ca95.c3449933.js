"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[62311],{13114:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"development/security/loading-data","title":"Loading data","description":"Flash Player and AIR content can exchange data with servers. Loading data is a","source":"@site/docs/development/security/loading-data.md","sourceDirName":"development/security","slug":"/development/security/loading-data","permalink":"/docs/development/security/loading-data","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/security/loading-data.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"mainSidebar","previous":{"title":"Accessing loaded media as data","permalink":"/docs/development/security/accessing-loaded-media-as-data"},"next":{"title":"Loading embedded content from SWF files imported into a security domain","permalink":"/docs/development/security/loading-embedded-content-from-swf-files-loaded-into-a-security-domain"}}');var i=n(74848),s=n(28453);const a={sidebar_position:10},r="Loading data",l={},c=[{value:"Using URLLoader and URLStream",id:"using-urlloader-and-urlstream",level:2},{value:"Connecting to sockets",id:"connecting-to-sockets",level:2},{value:"Protecting data",id:"protecting-data",level:2},{value:"Sending data",id:"sending-data",level:2},{value:"Uploading and downloading files",id:"uploading-and-downloading-files",level:2}];function d(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"loading-data",children:"Loading data"})}),"\n",(0,i.jsxs)(o.p,{children:["Flash Player and AIR content can exchange data with servers. Loading data is a\ndifferent kind of operation from loading media, because the loaded information\nappears as program objects, rather than being displayed as media. Generally,\ncontent may load data from the same domain that the content originated from.\nHowever, content usually requires policy files in order to load data from other\ndomains (see\n",(0,i.jsx)(o.a,{href:"/docs/development/security/permission-controls#website-controls-policy-files",children:"Website controls (policy files)"}),")."]}),"\n",(0,i.jsx)(o.p,{children:"Note: Content running in the AIR application sandbox is never served from a\nremote domain (unless the developer intentionally imports remote content into\nthe application sandbox), so it cannot participate in the types of attacks that\npolicy files protect against. AIR content in the application sandbox is not\nrestricted from loading data by policy files. However, AIR content in other\nsandboxes is subject to the restrictions described here."}),"\n",(0,i.jsx)(o.h2,{id:"using-urlloader-and-urlstream",children:"Using URLLoader and URLStream"}),"\n",(0,i.jsxs)(o.p,{children:["You can load data, such as an XML file or a text file. The ",(0,i.jsx)(o.code,{children:"load()"})," methods of\nthe URLLoader and URLStream classes are governed by URL policy file permissions."]}),"\n",(0,i.jsxs)(o.p,{children:["If you use the ",(0,i.jsx)(o.code,{children:"load()"})," method to load content from a domain other than that of\nthe code that is calling the method, the runtime checks for a URL policy file on\nthe server of the loaded assets. If there is a policy file, and it grants access\nto the domain of the loading content, you can load the data."]}),"\n",(0,i.jsx)(o.h2,{id:"connecting-to-sockets",children:"Connecting to sockets"}),"\n",(0,i.jsxs)(o.p,{children:["By default, the runtime looks for a socket policy file served from port 843. As\nwith URL policy files, this file is called the ",(0,i.jsx)(o.em,{children:"master policy file"}),"."]}),"\n",(0,i.jsx)(o.p,{children:"When policy files were first introduced in Flash Player 6, there was no support\nfor socket policy files. Connections to socket servers were authorized by a\npolicy file in the default location on an HTTP server on port 80 of the same\nhost as the socket server. Flash Player 9 still supports this capability, but\nFlash Player 10 does not. In Flash Player 10, only socket policy files can\nauthorize socket connections."}),"\n",(0,i.jsx)(o.p,{children:'Like URL policy files, socket policy files support a meta-policy statement that\nspecifies which ports can serve policy files. However, instead of "master-only,"\nthe default meta-policy for socket policy files is "all." That is, unless the\nmaster policy file specifies a more restrictive setting, Flash Player assumes\nthat any socket on the host can serve a socket policy file.'}),"\n",(0,i.jsx)(o.p,{children:"Access to socket and XML socket connections is disabled by default, even if the\nsocket you are connecting to is in the same domain as the SWF file. You can\npermit socket-level access by serving a socket policy file from any of the\nfollowing locations:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsx)(o.p,{children:"Port 843 (the location of the master policy file)"}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsx)(o.p,{children:"The same port as the main socket connection"}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsx)(o.p,{children:"A different port than the main socket connection"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["By default, Flash Player looks for a socket policy file on port 843 and on the\nsame port as the main socket connection. If you want to serve a socket policy\nfile from a different port, the SWF file must call ",(0,i.jsx)(o.code,{children:"Security.loadPolicyFile()"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["A socket policy file has the same syntax as a URL policy file, except that it\nmust also specify the ports to which it grants access. When a socket policy file\nis served from a port number below 1024, it may grant access to any ports; when\na policy file comes from port 1024 or higher, it may grant access only to ports\n1024 and higher. The allowed ports are specified in a ",(0,i.jsx)(o.code,{children:"to-ports"})," attribute in\nthe ",(0,i.jsx)(o.code,{children:"<allow-access-from>"})," tag. Single port numbers, port ranges, and wildcards\nare accepted values."]}),"\n",(0,i.jsx)(o.p,{children:"Here is an example socket policy file:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{children:'<?xml version="1.0"?>\n<!DOCTYPE cross-domain-policy SYSTEM "https://www.adobe.com/xml/dtds/cross-domain-policy.dtd">\n\x3c!-- Policy file for xmlsocket://socks.mysite.com --\x3e\n<cross-domain-policy>\n\t<allow-access-from domain="*" to-ports="507" />\n\t<allow-access-from domain="*.example.com" to-ports="507,516" />\n\t<allow-access-from domain="*.example.org" to-ports="516-523" />\n\t<allow-access-from domain="adobe.com" to-ports="507,516-523" />\n\t<allow-access-from domain="192.0.34.166" to-ports="*" />\n</cross-domain-policy>\n'})}),"\n",(0,i.jsxs)(o.p,{children:["To retrieve a socket policy file from port 843 or from the same port as a main\nsocket connection, call the ",(0,i.jsx)(o.code,{children:"Socket.connect()"})," or ",(0,i.jsx)(o.code,{children:"XMLSocket.connect()"})," method.\nFlash Player first checks for a master policy file on port 843. If it finds one,\nit checks to see if the file contains a meta-policy statement that prohibits\nsocket policy files on the target port. If access isn't prohibited, Flash Player\nfirst looks for the appropriate ",(0,i.jsx)(o.code,{children:"allow-access-from"})," statement in the master\npolicy file. If it doesn't find one, it then looks for a socket policy file on\nthe same port as the main socket connection."]}),"\n",(0,i.jsxs)(o.p,{children:["To retrieve a socket policy file a different location, first call the\n",(0,i.jsx)(o.code,{children:"Security.loadPolicyFile()"})," method with the special ",(0,i.jsx)(o.code,{children:'"xmlsocket"'})," syntax, as in\nthe following:"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{children:'Security.loadPolicyFile("xmlsocket://server.com:2525");\n'})}),"\n",(0,i.jsxs)(o.p,{children:["Call the ",(0,i.jsx)(o.code,{children:"Security.loadPolicyFile()"})," method before calling the\n",(0,i.jsx)(o.code,{children:"Socket.connect()"})," or ",(0,i.jsx)(o.code,{children:"XMLSocket.connect()"})," method. Flash Player then waits\nuntil it has fulfilled your policy file request before deciding whether to allow\nyour main connection. However, if the master policy file specifies that the\ntarget location can't serve policy files, the call to ",(0,i.jsx)(o.code,{children:"loadPolicyFile()"})," has no\neffect, even if there is a policy file at that location."]}),"\n",(0,i.jsx)(o.p,{children:"If you are implementing a socket server and you need to provide a socket policy\nfile, decide whether to provide the policy file using the same port that accepts\nmain connections, or using a different port. In either case, your server must\nwait for the first transmission from your client before sending a response."}),"\n",(0,i.jsx)(o.p,{children:"When Flash Player requests a policy file, it always transmits the following\nstring as soon as a connection is established:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{children:"<policy-file-request/>\n"})}),"\n",(0,i.jsx)(o.p,{children:"Once the server receives this string, it can transmit the policy file. The\nrequest from Flash Player is always terminated by a null byte, and the response\nfrom the server must also be terminated by a null byte."}),"\n",(0,i.jsx)(o.p,{children:"Do not expect to reuse the same connection for both a policy file request and a\nmain connection; close the connection after transmitting the policy file. If you\ndo not, Flash Player closes the policy file connection before reconnecting to\nset up the main connection."}),"\n",(0,i.jsx)(o.h2,{id:"protecting-data",children:"Protecting data"}),"\n",(0,i.jsx)(o.p,{children:"To protect data from eavesdropping and alteration as it travels over the\nInternet, you can use the Transport Layer Security (TLS) or Socket Layer\nSecurity (SSL) on the server where the data originates. You can then connect to\nthe server using the HTTPS protocol."}),"\n",(0,i.jsx)(o.p,{children:"In applications created for AIR 2 or above, you can also protect TCP socket\ncommunications. The SecureSocket class allows you to initiate a socket\nconnection to a socket server that uses TLS version 1or SSL version 4."}),"\n",(0,i.jsx)(o.h2,{id:"sending-data",children:"Sending data"}),"\n",(0,i.jsxs)(o.p,{children:["Data sending occurs when code sends data to a server or resource. Sending data\nis always permitted for content from a network domain. A local SWF file can send\ndata to network addresses only if it is in the local-trusted,\nlocal-with-networking, or AIR application sandbox. For more information, see\n",(0,i.jsx)(o.a,{href:"/docs/development/security/security-sandboxes#local-sandboxes",children:"Local sandboxes"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["You can use the ",(0,i.jsx)(o.code,{children:"flash.net.sendToURL()"})," function to send data to a URL. Other\nmethods also send requests to URLs. These include loading methods, such as\n",(0,i.jsx)(o.code,{children:"Loader.load()"})," and ",(0,i.jsx)(o.code,{children:"Sound.load()"}),", and data-loading methods, such as\n",(0,i.jsx)(o.code,{children:"URLLoader.load()"})," and ",(0,i.jsx)(o.code,{children:"URLStream.load()"}),"."]}),"\n",(0,i.jsx)(o.h2,{id:"uploading-and-downloading-files",children:"Uploading and downloading files"}),"\n",(0,i.jsxs)(o.p,{children:["The ",(0,i.jsx)(o.code,{children:"FileReference.upload()"})," method starts the upload of a file selected by a\nuser to a remote server. You must call the ",(0,i.jsx)(o.code,{children:"FileReference.browse()"})," or\n",(0,i.jsx)(o.code,{children:"FileReferenceList.browse()"})," method before calling the ",(0,i.jsx)(o.code,{children:"FileReference.upload()"}),"\nmethod."]}),"\n",(0,i.jsxs)(o.p,{children:["The code that initiates the ",(0,i.jsx)(o.code,{children:"FileReference.browse()"})," or\n",(0,i.jsx)(o.code,{children:"FileReferenceList.browse()"})," method can be called only in response to a mouse\nevent or keyboard event. If it is called in other situations, Flash Player 10\nand later throws an exception. However, a user-initiated event is not required\nto call these methods from the AIR application sandbox."]}),"\n",(0,i.jsxs)(o.p,{children:["Calling the ",(0,i.jsx)(o.code,{children:"FileReference.download()"})," method opens a dialog box in which the\nuser can download a file from a remote server."]}),"\n",(0,i.jsx)(o.p,{children:"Note: If your server requires user authentication, only SWF files running in a\nbrowser\u2014that is, using the browser plug-in or ActiveX control\u2014can provide a\ndialog box to prompt the user for a user name and password for authentication,\nand only for downloads. Flash Player does not allow uploads to a server that\nrequires user authentication."}),"\n",(0,i.jsx)(o.p,{children:"Uploads and downloads are not allowed if the calling SWF file is in the\nlocal-with-filesystem sandbox."}),"\n",(0,i.jsx)(o.p,{children:"By default, a SWF file may not initiate an upload to, or a download from, a\nserver other than its own. A SWF file may upload to, or download from, a\ndifferent server if that server provides a policy file that grants permission to\nthe domain of the invoking SWF file."})]})}function h(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,o,n)=>{n.d(o,{R:()=>a,x:()=>r});var t=n(96540);const i={},s=t.createContext(i);function a(e){const o=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:o},e.children)}}}]);