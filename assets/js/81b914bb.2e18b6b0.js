"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[89462],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>d});var i=n(96540);const a={},r=i.createContext(a);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:t},e.children)}},67412:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"development/rich-media-content/using-digital-rights-management/using-the-drmauthenticateevent-class","title":"Using the DRMAuthenticateEvent class","description":"The DRMAuthenticateEvent object is dispatched when a NetStream object tries to","source":"@site/docs/development/rich-media-content/using-digital-rights-management/using-the-drmauthenticateevent-class.md","sourceDirName":"development/rich-media-content/using-digital-rights-management","slug":"/development/rich-media-content/using-digital-rights-management/using-the-drmauthenticateevent-class","permalink":"/docs/development/rich-media-content/using-digital-rights-management/using-the-drmauthenticateevent-class","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/rich-media-content/using-digital-rights-management/using-the-drmauthenticateevent-class.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"mainSidebar","previous":{"title":"Using the DRMStatusEvent class","permalink":"/docs/development/rich-media-content/using-digital-rights-management/using-the-drmstatusevent-class"},"next":{"title":"Using the DRMErrorEvent class","permalink":"/docs/development/rich-media-content/using-digital-rights-management/using-the-drmerrorevent-class"}}');var a=n(74848),r=n(28453);const s={sidebar_position:4},d="Using the DRMAuthenticateEvent class",o={},c=[{value:"DRMAuthenticateEvent properties",id:"drmauthenticateevent-properties",level:2},{value:"Creating a DRMAuthenticateEvent handler",id:"creating-a-drmauthenticateevent-handler",level:2},{value:"Creating an interface for retrieving user credentials",id:"creating-an-interface-for-retrieving-user-credentials",level:2}];function h(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"using-the-drmauthenticateevent-class",children:"Using the DRMAuthenticateEvent class"})}),"\n",(0,a.jsx)(t.p,{children:"The DRMAuthenticateEvent object is dispatched when a NetStream object tries to\nplay protected content that requires a user credential for authentication before\nplayback."}),"\n",(0,a.jsxs)(t.p,{children:["The DRMAuthenticateEvent handler is responsible for gathering the required\ncredentials (user name, password, and type) and passing the values to the\n",(0,a.jsx)(t.code,{children:"NetStream.setDRMAuthenticationCredentials()"})," method for validation. Each AIR\napplication must provide some mechanism for obtaining user credentials. For\nexample, the application could provide a user with a simple user interface to\nenter the user name and password values. Also, provide a mechanism for handling\nand limiting repeated authentication attempts."]}),"\n",(0,a.jsx)(t.h2,{id:"drmauthenticateevent-properties",children:"DRMAuthenticateEvent properties"}),"\n",(0,a.jsx)(t.p,{children:"The DRMAuthenticateEvent class includes the following properties:"}),"\n",(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:(0,a.jsx)("p",{children:"Property"})}),(0,a.jsx)("th",{children:(0,a.jsx)("p",{children:"Description"})})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:"authenticationType"})}),(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:(0,a.jsx)(t.p,{children:'Indicates whether the supplied credentials are for authenticating\nagainst Adobe Access ("drm") or a proxy server ("proxy"). For example,\nthe "proxy" option allows the application to authenticate against a\nproxy server if necessary before the user can access the Internet.\nUnless anonymous authentication is used, after the proxy\nauthentication, the user must still authenticate against Adobe Access\nto obtain the voucher and play the content. You can use\nsetDRMAuthenticationcredentials() a second time, with "drm" option, to\nauthenticate against Adobe Access.'})})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:"header"})}),(0,a.jsxs)("td",{children:[(0,a.jsx)("p",{children:(0,a.jsx)(t.p,{children:"The encrypted content file header provided by the server. It contains\ninformation about the context of the encrypted content."})}),(0,a.jsx)("p",{children:(0,a.jsx)(t.p,{children:'This header string can be passed on to the Flash application to enable\nthe application to construct a user name-password dialog box. The\nheader string can be used as the dialog box\'s instructions. For\nexample, the header can be "Please type in your user name and\npassword".'})})]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:"netstream"})}),(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:"The NetStream object that initiated this event."})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:"passwordPrompt"})}),(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:(0,a.jsx)(t.p,{children:"A prompt for a password credential, provided by the server. The string\ncan include instruction for the type of password required."})})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:"urlPrompt"})}),(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:(0,a.jsx)(t.p,{children:"A prompt for a URL string, provided by the server. The string can\nprovide the location where the user name and password are sent."})})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:"usernamePrompt"})}),(0,a.jsx)("td",{children:(0,a.jsx)("p",{children:(0,a.jsx)(t.p,{children:"A prompt for a user name credential, provided by the server. The\nstring can include instruction for the type of user name required. For\nexample, a content provider can require an e-mail address as the user\nname."})})})]})]})]}),"\n",(0,a.jsx)(t.p,{children:"The previously mentioned strings are supplied by the FMRMS server only. Adobe\nAccess Server does not use these strings."}),"\n",(0,a.jsx)(t.h2,{id:"creating-a-drmauthenticateevent-handler",children:"Creating a DRMAuthenticateEvent handler"}),"\n",(0,a.jsx)(t.p,{children:"The following example creates an event handler that passes a set of hard-coded\nauthentication credentials to the NetStream object that originated the event.\n(The code for playing the video and making sure that a successful connection to\nthe video stream has been made is not included here.)"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'var connection:NetConnection = new NetConnection();\nconnection.connect(null);\n\nvar videoStream:NetStream = new NetStream(connection);\n\nvideoStream.addEventListener(DRMAuthenticateEvent.DRM_AUTHENTICATE,\n                            drmAuthenticateEventHandler)\n\nprivate function drmAuthenticateEventHandler(event:DRMAuthenticateEvent):void\n{\n\tvideoStream.setDRMAuthenticationCredentials("administrator", "password", "drm");\n}\n'})}),"\n",(0,a.jsx)(t.h2,{id:"creating-an-interface-for-retrieving-user-credentials",children:"Creating an interface for retrieving user credentials"}),"\n",(0,a.jsx)(t.p,{children:"In the case where protected content requires user authentication, the AIR\napplication must usually retrieve the user's authentication credentials via a\nuser interface."}),"\n",(0,a.jsxs)(t.p,{children:["The following is a Flex example of a simple user interface for retrieving user\ncredentials. It consists of a panel object containing two TextInput objects, one\nfor each of the user name and password credentials. The panel also contains a\nbutton that launches the ",(0,a.jsx)(t.code,{children:"credentials()"})," method."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'<mx:Panel x="236.5" y="113" width="325" height="204" layout="absolute" title="Login">\n<mx:TextInput x="110" y="46" id="uName"/>\n<mx:TextInput x="110" y="76" id="pWord" displayAsPassword="true"/>\n<mx:Text x="35" y="48" text="Username:"/>\n<mx:Text x="35" y="78" text="Password:"/>\n<mx:Button x="120" y="115" label="Login" click="credentials()"/>\n</mx:Panel>\n'})}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"credentials()"})," method is a user-defined method that passes the user name\nand password values to the ",(0,a.jsx)(t.code,{children:"setDRMAuthenticationCredentials()"})," method. Once the\nvalues are passed, the ",(0,a.jsx)(t.code,{children:"credentials()"})," method resets the values of the TextInput\nobjects."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'<mx:Script>\n<![CDATA[\n    public function credentials():void\n    {\n        videoStream.setDRMAuthenticationCredentials(uName, pWord, "drm");\n        uName.text = "";\n        pWord.text = "";\n    }\n]]>\n</mx:Script>\n'})}),"\n",(0,a.jsxs)(t.p,{children:["One way to implement this type of simple interface is to include the panel as\npart of a new state. The new state originates from the base state when the\nDRMAuthenticateEvent object is thrown. The following example contains a\nVideoDisplay object with a source attribute that points to a protected FLV file.\nIn this case, the ",(0,a.jsx)(t.code,{children:"credentials()"})," method is modified so that it also returns the\napplication to the base state. This method does so after passing the user\ncredentials and resetting the TextInput object values."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'<?xml version="1.0" encoding="utf-8"?>\n<mx:WindowedApplication xmlns:mx="https://www.adobe.com/2006/mxml"\n\tlayout="absolute"\n\twidth="800"\n\theight="500"\n\ttitle="DRM FLV Player"\n\tcreationComplete="initApp()">\n\n<mx:states>\n    <mx:State name="LOGIN">\n        <mx:AddChild position="lastChild">\n                <mx:Panel x="236.5" y="113" width="325" height="204" layout="absolute"\n                        title="Login">\n                <mx:TextInput x="110" y="46" id="uName"/>\n                <mx:TextInput x="110" y="76" id="pWord" displayAsPassword="true"/>\n                <mx:Text x="35" y="48" text="Username:"/>\n                <mx:Text x="35" y="78" text="Password:"/>\n                <mx:Button x="120" y="115" label="Login" click="credentials()"/>\n                <mx:Button x="193" y="115" label="Reset" click="uName.text=\'\';\n                        pWord.text=\'\';"/>\n            </mx:Panel>\n        </mx:AddChild>\n    </mx:State>\n</mx:states>\n\n<mx:Script>\n    <![CDATA[\n            import flash.events.DRMAuthenticateEvent;\n        private function initApp():void\n        {\n            videoStream.addEventListener(DRMAuthenticateEvent.DRM_AUTHENTICATE,\n                                    drmAuthenticateEventHandler);\n        }\n\n        public function credentials():void\n        {\n            videoStream.setDRMAuthenticationCredentials(uName, pWord, "drm");\n            uName.text = "";\n            pWord.text = "";\n            currentState=\'\';\n        }\n\n        private function drmAuthenticateEventHandler(event:DRMAuthenticateEvent):void\n        {\n            currentState=\'LOGIN\';\n        }\n    ]]>\n</mx:Script>\n\n<mx:VideoDisplay id="video" x="50" y="25" width="700" height="350"\n        autoPlay="true"\n        bufferTime="10.0"\n        source="http://www.example.com/flv/Video.flv" />\n</mx:WindowedApplication>\n'})})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);