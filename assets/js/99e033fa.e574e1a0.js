"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[86523],{17201:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"development/display/working-with-movie-clips/movie-clip-example-runtime-assets-explorer","title":"Movie clip example: RuntimeAssetsExplorer","description":"The Export for ActionScript functionality can be especially advantageous for","source":"@site/docs/development/display/working-with-movie-clips/movie-clip-example-runtime-assets-explorer.md","sourceDirName":"development/display/working-with-movie-clips","slug":"/development/display/working-with-movie-clips/movie-clip-example-runtime-assets-explorer","permalink":"/docs/development/display/working-with-movie-clips/movie-clip-example-runtime-assets-explorer","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/display/working-with-movie-clips/movie-clip-example-runtime-assets-explorer.md","tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"Loading an external SWF file","permalink":"/docs/development/display/working-with-movie-clips/loading-an-external-swf-file"},"next":{"title":"Working with MovieClip objects","permalink":"/docs/development/display/working-with-movie-clips/working-with-movieclip-objects"}}');var s=i(74848),a=i(28453);const r={},l="Movie clip example: RuntimeAssetsExplorer",o={},c=[{value:"Establishing a run-time library interface",id:"establishing-a-run-time-library-interface",level:2},{value:"Creating the asset library SWF file",id:"creating-the-asset-library-swf-file",level:2},{value:"Creating a class to implement the RuntimeLibrary interface",id:"creating-a-class-to-implement-the-runtimelibrary-interface",level:4},{value:"Creating classes for each MovieClip asset",id:"creating-classes-for-each-movieclip-asset",level:4},{value:"Publishing the library",id:"publishing-the-library",level:4},{value:"Loading the library into another SWF file",id:"loading-the-library-into-another-swf-file",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"movie-clip-example-runtimeassetsexplorer",children:"Movie clip example: RuntimeAssetsExplorer"})}),"\n",(0,s.jsx)(t.p,{children:'The Export for ActionScript functionality can be especially advantageous for\nlibraries that may be useful across more than one project. If Flash Player or\nAIR executes a SWF file, symbols that have been exported to ActionScript are\navailable to any SWF file within the same security sandbox as the SWF that loads\nit. In this way, a single Flash document can generate a SWF file that is\ndesignated for the sole purpose of holding graphical assets. This technique is\nparticularly useful for larger projects where designers working on visual assets\ncan work in parallel with developers who create a "wrapper" SWF file that then\nloads the graphical assets SWF file at run time. You can use this method to\nmaintain a series of versioned files where graphical assets are not dependent\nupon the progress of programming development.'}),"\n",(0,s.jsx)(t.p,{children:"The RuntimeAssetsExplorer application loads any SWF file that is a subclass of\nRuntimeAsset and allows you to browse the available assets of that SWF file. The\nexample illustrates the following:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Loading an external SWF file using ",(0,s.jsx)(t.code,{children:"Loader.load()"})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Dynamic creation of a library symbol exported for ActionScript"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"ActionScript control of MovieClip playback"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Before beginning, note that each of the SWF files to run in Flash Player must be\nlocated in the same security sandbox. For more information, see\n",(0,s.jsx)(t.a,{href:"/docs/development/security/security-sandboxes",children:"Security sandboxes"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["To get the application files for this sample, download the\n",(0,s.jsx)(t.a,{href:"https://github.com/joshtynjala/flash-platform-as3-dev-guide-examples/releases/tag/original",children:(0,s.jsx)(t.em,{children:"FlashPlatformAS3DevGuideExamples.zip"})}),".\nThe RuntimeAssetsExplorer application files can be found in the folder\nSamples/RuntimeAssetsExplorer. The application consists of the following files:"]}),"\n",(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:(0,s.jsx)("p",{children:"File"})}),(0,s.jsx)("th",{children:(0,s.jsx)("p",{children:"Description"})})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{children:[(0,s.jsx)("p",{children:"RuntimeAssetsExample.mxml"}),(0,s.jsx)("p",{children:"or"}),(0,s.jsx)("p",{children:"RuntimeAssetsExample.fla"})]}),(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"The user\ninterface for the application for Flex (MXML) or Flash (FLA)."})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"RuntimeAssetsExample.as"})}),(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"Document\nclass for the Flash (FLA) application."})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"GeometricAssets.as"})}),(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"An example\nclass that implements the RuntimeAsset interface."})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"GeometricAssets.fla"})}),(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"A FLA file\nlinked to the GeometricAssets class (the document class of the FLA)\ncontaining symbols that are exported for ActionScript."})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"com/example/programmingas3/runtimeassetexplorer/RuntimeLibrary.as"})}),(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"An interface\nthat defines the required methods expected of all run-time asset SWF\nfiles that will be loaded into the explorer container."})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"com/example/programmingas3/runtimeassetexplorer/AnimatingBox.as"})}),(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"The class of\nthe library symbol in the shape of a rotating box."})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"com/example/programmingas3/runtimeassetexplorer/AnimatingStar.as"})}),(0,s.jsx)("td",{children:(0,s.jsx)("p",{children:"The class of\nthe library symbol in the shape of a rotating star."})})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"establishing-a-run-time-library-interface",children:"Establishing a run-time library interface"}),"\n",(0,s.jsxs)(t.p,{children:["In order for the explorer to properly interact with a SWF library, the structure\nof the run-time asset libraries must be formalized. We will accomplish this by\ncreating an interface, which is similar to a class in that it's a blueprint of\nmethods that demarcate an expected structure, but unlike a class it includes no\nmethod bodies. The interface provides a way for both the run-time library and\nthe explorer to communicate to one another. Each SWF of run-time assets that is\nloaded in our browser will implement this interface. For more information about\ninterfaces and how they can be useful, see Interfaces in ",(0,s.jsx)(t.em,{children:"Learning ActionScript\n3.0"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["The RuntimeLibrary interface will be very simple\u2014we merely require a function\nthat can provide the explorer with an array of classpaths for the symbols to be\nexported and available in the run-time library. To this end, the interface has a\nsingle method: ",(0,s.jsx)(t.code,{children:"getAssets()"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"package com.example.programmingas3.runtimeassetexplorer\n{\n    public interface RuntimeLibrary\n    {\n        function getAssets():Array;\n    }\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"creating-the-asset-library-swf-file",children:"Creating the asset library SWF file"}),"\n",(0,s.jsx)(t.p,{children:"By defining the RuntimeLibrary interface, it's possible to create multiple asset\nlibrary SWF files that can be loaded into another SWF file. Making an individual\nSWF library of assets involves four tasks:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Creating a class for the asset library SWF file"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Creating classes for individual assets contained in the library"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Creating the actual graphic assets"}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Associating graphic elements with classes and publishing the library SWF"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h4,{id:"creating-a-class-to-implement-the-runtimelibrary-interface",children:"Creating a class to implement the RuntimeLibrary interface"}),"\n",(0,s.jsxs)(t.p,{children:["Next, we'll create the GeometricAssets class that will implement the\nRuntimeLibrary interface. This will be the document class of the FLA. The code\nfor this class is very similar to the RuntimeLibrary interface\u2014the difference\nbetween them is that in the class definition the ",(0,s.jsx)(t.code,{children:"getAssets()"})," method has a\nmethod body."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'package\n{\n    import flash.display.Sprite;\n    import com.example.programmingas3.runtimeassetexplorer.RuntimeLibrary;\n\n    public class GeometricAssets extends Sprite implements RuntimeLibrary\n    {\n        public function GeometricAssets() {\n\n        }\n        public function getAssets():Array {\n            return [ "com.example.programmingas3.runtimeassetexplorer.AnimatingBox",\n                    "com.example.programmingas3.runtimeassetexplorer.AnimatingStar" ];\n        }\n    }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["If we were to create a second run-time library, we could create another FLA\nbased upon another class (for example, AnimationAssets) that provides its own\n",(0,s.jsx)(t.code,{children:"getAssets()"})," implementation."]}),"\n",(0,s.jsx)(t.h4,{id:"creating-classes-for-each-movieclip-asset",children:"Creating classes for each MovieClip asset"}),"\n",(0,s.jsx)(t.p,{children:"For this example, we'll merely extend the MovieClip class without adding any\nfunctionality to the custom assets. The following code for AnimatingStar is\nanalogous to that of AnimatingBox:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"package com.example.programmingas3.runtimeassetexplorer\n{\n    import flash.display.MovieClip;\n\n    public class AnimatingStar extends MovieClip\n    {\n        public function AnimatingStar() {\n        }\n    }\n}\n"})}),"\n",(0,s.jsx)(t.h4,{id:"publishing-the-library",children:"Publishing the library"}),"\n",(0,s.jsxs)(t.p,{children:["We'll now connect the MovieClip-based assets to the new class by creating a new\nFLA and entering GeometricAssets into the Document Class field of the Property\ninspector. For the purposes of this example, we'll create two very basic shapes\nthat use a timeline tween to make one clockwise rotation over 360 frames. Both\nthe ",(0,s.jsx)(t.code,{children:"animatingBox"})," and ",(0,s.jsx)(t.code,{children:"animatingStar"})," symbols are set to Export for\nActionScript and have the Class field set to the respective classpaths specified\nin the ",(0,s.jsx)(t.code,{children:"getAssets()"})," implementation. The default base class of\n",(0,s.jsx)(t.code,{children:"flash.display.MovieClip"})," remains, as we want to subclass the standard MovieClip\nmethods."]}),"\n",(0,s.jsx)(t.p,{children:"After setting up your symbol's export settings, publish the FLA. You now have\nyour first run-time library. This SWF file could be loaded into another AVM2 SWF\nfile and the AnimatingBox and AnimatingStar symbols would be available to the\nnew SWF file."}),"\n",(0,s.jsx)(t.h2,{id:"loading-the-library-into-another-swf-file",children:"Loading the library into another SWF file"}),"\n",(0,s.jsxs)(t.p,{children:["The last functional piece to deal with is the user interface for the asset\nexplorer. In this example, the path to the run-time library is hard-coded as a\nvariable named ",(0,s.jsx)(t.code,{children:"ASSETS_PATH"}),". Alternatively, you could use the FileReference\nclass\u2014for example, to create an interface that browses for a particular SWF file\non your hard drive."]}),"\n",(0,s.jsxs)(t.p,{children:["When the run-time library is successfully loaded, Flash Player calls the\n",(0,s.jsx)(t.code,{children:"runtimeAssetsLoadComplete()"})," method:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"private function runtimeAssetsLoadComplete(event:Event):void\n{\n    var rl:* = event.target.content;\n    var assetList:Array = rl.getAssets();\n    populateDropdown(assetList);\n    stage.frameRate = 60;\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["In this method, the variable rl represents the loaded SWF file. The code calls\nthe ",(0,s.jsx)(t.code,{children:"getAssets()"})," method of the loaded SWF file, obtaining the list of assets\nthat are available, and uses them to populate a ComboBox component with a list\nof available assets by calling the ",(0,s.jsx)(t.code,{children:"populateDropDown()"})," method. That method in\nturn stores the full classpath of each asset. Clicking the Add button on the\nuser interface triggers the ",(0,s.jsx)(t.code,{children:"addAsset()"})," method:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"private function addAsset():void\n{\n    var className:String = assetNameCbo.selectedItem.data;\n    var AssetClass:Class = getDefinitionByName(className) as Class;\n    var mc:MovieClip = new AssetClass();\n    ...\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["which gets the classpath of whichever asset is currently selected in the\nComboBox (",(0,s.jsx)(t.code,{children:"assetNameCbo.selectedItem.data"}),"), and uses the\n",(0,s.jsx)(t.code,{children:"getDefinitionByName()"})," function (from the flash.utils package) to obtain an\nactual reference to the asset's class in order to create a new instance of that\nasset."]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>l});var n=i(96540);const s={},a=n.createContext(s);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);