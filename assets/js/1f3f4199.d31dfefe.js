"use strict";(globalThis.webpackChunkairsdk_dev=globalThis.webpackChunkairsdk_dev||[]).push([[68806],{68904:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var n=s(96540),r=s(17882),i=s(32372),a=s(74848);class o extends n.Component{state={loading:!0,platform:"",architecture:"",downloadUrl:"",assets:[]};componentDidMount(){var{platform:t,architecture:e}=this.props;t&&0!==t.length||(t=this.detectOS()),e&&0!==e.length||(e=this.detectArchitecture()),console.log("Detected platform: "+t+", architecture: "+e),this.setState({architecture:e,platform:t});new r.Eg({}).rest.repos.getLatestRelease({owner:"airsdk",repo:"airsdkmanager-releases"}).then(t=>{if(200!=t.status)return;const{data:{assets:e}}=t,s=this.getExtForPlatform();this.state.architecture&&this.state.architecture.length;let n=e.filter(t=>t.name.endsWith(s));n.length>1&&(n=n.filter(t=>t.name.toLowerCase().includes(this.state.architecture))),this.setState({loading:!1,assets:n})}).catch(console.log)}componentDidUpdate(t,e,s){if(this.state.assets)if(1==this.state.assets.length){const t=this.state.assets[0].browser_download_url;this.startDownloadAndGoBack(t)}else this.state.assets.length>=1&&(window.location.href="/docs/basics/install/"+this.state.platform)}startDownloadAndGoBack=t=>{if("undefined"!=typeof window&&t){try{const e=document.createElement("iframe");e.style.display="none",e.src=t,document.body.appendChild(e),setTimeout(()=>{try{document.body.removeChild(e)}catch(t){}},15e3)}catch(e){try{window.open(t,"_blank")}catch(s){}}setTimeout(()=>{try{window.history.back()}catch(e){window.location.href="/"}},1e3)}};detectArchitecture=()=>{if("undefined"==typeof window)return"";const t=navigator.userAgent.toLowerCase();if(t.includes("arm64")||t.includes("aarch64"))return"aarch64";if(t.includes("x86_64")||t.includes("x64")||t.includes("amd64")||t.includes("wow64"))return"amd64";if(t.includes("x86")||t.includes("i686")||t.includes("i386"))return"x86";const e=navigator.platform;if(e){if(e.includes("arm")||e.includes("ARM"))return"aarch64";if(e.includes("64"))return"amd64";if(e.includes("86"))return"x86"}return"amd64"};detectOS=()=>{const t=i.A.OS.toLowerCase();if(t){if(t.includes("mac"))return"macos";if(t.includes("win"))return"windows";if(t.includes("linux")||t.includes("nix"))return"linux"}return""};getExtForPlatform=()=>{switch(this.state.platform){case"macos":return"pkg";case"windows":return"msi";case"linux":return"zip"}return"___"};render(){return(0,a.jsx)("div",{children:this.state.loading?(0,a.jsx)("div",{children:"Loading ..."}):(0,a.jsx)("div",{children:"Redirecting ..."})})}}const c=o;const d=function(){const[t]=function(){const[t,e]=(0,n.useState)(()=>"undefined"!=typeof window?window.location.search:"");return(0,n.useEffect)(()=>{const t=()=>e(window.location.search||"");return window.addEventListener("popstate",t),()=>window.removeEventListener("popstate",t)},[]),[(0,n.useMemo)(()=>new URLSearchParams(t),[t])]}(),e=t.get("platform"),s=t.get("arch");return(0,a.jsx)(c,{platform:e,architecture:s})}}}]);