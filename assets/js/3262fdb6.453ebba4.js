"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[17366],{28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>r});var t=n(96540);const s={},a=t.createContext(s);function o(e){const i=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(a.Provider,{value:i},e.children)}},82654:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"building/using-native-extensions","title":"Using native extensions","description":"Native extensions for Adobe AIR provide ActionScript APIs that provide you access to device-specific functionality programmed in native code. Native extension developers sometimes work with device manufacturers, and sometimes are third-party developers.","source":"@site/docs/building/using-native-extensions.md","sourceDirName":"building","slug":"/building/using-native-extensions","permalink":"/docs/building/using-native-extensions","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/building/using-native-extensions.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Using native extensions","sidebar_position":5},"sidebar":"mainSidebar","previous":{"title":"Application Descriptor File Structure","permalink":"/docs/building/application-descriptor-files/file-structure"},"next":{"title":"Device Profiles","permalink":"/docs/building/device-profiles"}}');var s=n(74848),a=n(28453);const o={title:"Using native extensions",sidebar_position:5},r=void 0,l={},c=[{value:"AIR Native Extension (ANE) files",id:"air-native-extension-ane-files",level:2},{value:"Native extensions versus the NativeProcess ActionScript class",id:"native-extensions-versus-the-nativeprocess-actionscript-class",level:2},{value:"Native extensions versus ActionScript class libraries (SWC files)",id:"native-extensions-versus-actionscript-class-libraries-swc-files",level:2},{value:"Supported devices",id:"supported-devices",level:2},{value:"Supported device profiles",id:"supported-device-profiles",level:2},{value:"Task list for using a native extension",id:"task-list-for-using-a-native-extension",level:2},{value:"Declaring the extension in your application descriptor",id:"declaring-the-extension-in-your-application-descriptor",level:2},{value:"Including the ANE file in your application\u2019s library path",id:"including-the-ane-file-in-your-applications-library-path",level:2},{value:"Packaging an application that uses native extensions",id:"packaging-an-application-that-uses-native-extensions",level:2},{value:"Use a native installer package type",id:"use-a-native-installer-package-type",level:3},{value:"Specify the extension directory",id:"specify-the-extension-directory",level:3},{value:"Make sure that the ANE file supports the application\u2019s target device",id:"make-sure-that-the-ane-file-supports-the-applications-target-device",level:3},{value:"More Help topics",id:"more-help-topics",level:2}];function d(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.p,{children:"Native extensions for Adobe AIR provide ActionScript APIs that provide you access to device-specific functionality programmed in native code. Native extension developers sometimes work with device manufacturers, and sometimes are third-party developers."}),"\n",(0,s.jsx)(i.p,{children:"A native extension is a combination of:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"ActionScript classes"}),"\n",(0,s.jsx)(i.li,{children:"Native code"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"However, as an AIR application developer using a native extension, you work with only the ActionScript classes."}),"\n",(0,s.jsx)(i.p,{children:"Native extensions are useful in the following situations:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"The native code implementation provides access to platform-specific features. These platform-specific features are not available in the built-in ActionScript classes, and are not possible to implement in application-specific ActionScript classes. The native code implementation can provide such functionality because it has access to device-specific hardware and software."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"A native code implementation can sometimes be faster than an implementation that uses only ActionScript."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"The native code implementation can provide ActionScript access to legacy native code."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"air-native-extension-ane-files",children:"AIR Native Extension (ANE) files"}),"\n",(0,s.jsx)(i.p,{children:"Native extension developers package a native extension into an ANE file. An ANE file is an archive file that contains the necessary libraries and resources for the native extension."}),"\n",(0,s.jsx)(i.p,{children:"Note for some devices, the ANE file contains the native code library that the native extension uses. But for other devices, the native code library is installed on the device. In some cases, the native extension has no native code at all for a particular device; it is implemented with ActionScript only."}),"\n",(0,s.jsx)(i.p,{children:"As an AIR application developer, you use the ANE file as follows:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Include the ANE file in the application\u2019s library path in the same way you include a SWC file in the library path. This action allows the application to reference the extension\u2019s ActionScript classes."}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsxs)(i.p,{children:["When compiling your application, be sure to use dynamic linking for the ANE. If you use Flash Builder, specify External on the ActionScript Builder Path Properties panel; if you use the command line, specify ",(0,s.jsx)(i.code,{children:"-external-library-path"}),"."]})}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Package the ANE file with the AIR application."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"native-extensions-versus-the-nativeprocess-actionscript-class",children:"Native extensions versus the NativeProcess ActionScript class"}),"\n",(0,s.jsxs)(i.p,{children:["ActionScript 3.0 provides a ",(0,s.jsx)(i.code,{children:"NativeProcess"})," class. This class lets an AIR application execute native processes on the host operating system. This capability is similar to native extensions, which provide access to platform-specific features and libraries. When deciding on using the ",(0,s.jsx)(i.code,{children:"NativeProcess"})," class versus using a native extension, consider the following:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Only the ",(0,s.jsx)(i.code,{children:"extendedDesktop"})," AIR profile supports the ",(0,s.jsx)(i.code,{children:"NativeProcess"})," class. Therefore, for applications with the AIR profiles ",(0,s.jsx)(i.code,{children:"mobileDevice"})," and ",(0,s.jsx)(i.code,{children:"extendedMobileDevice"}),", native extensions are the only choice."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Native extension developers often provide native implementations for various platforms, but the ActionScript API they provide is typically the same across platforms. When using the ",(0,s.jsx)(i.code,{children:"NativeProcess"})," class, ActionScript code to start the native process can vary among the different platforms."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"NativeProcess"})," class starts a separate process, whereas a native extension runs in the same process as the AIR application. Therefore, if you are concerned about code crashing, using the ",(0,s.jsx)(i.code,{children:"NativeProcess"})," class is safer. However, the separate process means that you possibly have interprocess communication handling to implement."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"native-extensions-versus-actionscript-class-libraries-swc-files",children:"Native extensions versus ActionScript class libraries (SWC files)"}),"\n",(0,s.jsx)(i.p,{children:"A SWC file is an ActionScript class library in an archive format. The SWC file contains a SWF file and other resource files. The SWC file is a convenient way to share ActionScript classes instead of sharing individual ActionScript code and resource files."}),"\n",(0,s.jsx)(i.p,{children:"A native extension package is an ANE file. Like a SWC file, an ANE file is also an ActionScript class library, containing a SWF file and other resource files in an archive format. However, the most important difference between an ANE file and a SWC file is that only an ANE file can contain a native code library."}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsxs)(i.p,{children:["When compiling your application, be sure to use dynamic linking for the ANE file. If you use Flash Builder, specify External on the ActionScript Builder Path Properties panel; if you use the command line, specify ",(0,s.jsx)(i.code,{children:"-external-library-path"}),"."]})}),"\n",(0,s.jsx)(i.h2,{id:"supported-devices",children:"Supported devices"}),"\n",(0,s.jsx)(i.p,{children:"Starting in AIR 3, you can use native extensions in applications for the following devices:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Android devices, starting with Android 2.2"}),"\n",(0,s.jsx)(i.li,{children:"iOS devices, starting with iOS 4.0"}),"\n",(0,s.jsx)(i.li,{children:"iOS Simulator, starting with AIR 3.3"}),"\n",(0,s.jsx)(i.li,{children:"Blackberry PlayBook"}),"\n",(0,s.jsx)(i.li,{children:"Windows desktop devices that support AIR 3.0"}),"\n",(0,s.jsx)(i.li,{children:"Mac OS X desktop devices that support AIR 3.0"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Often, the same native extension targets multiple platforms. The extension\u2019s ANE file contains ActionScript and native libraries for each supported platform. Usually, the ActionScript libraries have the same public interfaces for all the platforms. The native libraries are necessarily different."}),"\n",(0,s.jsx)(i.p,{children:"Sometimes a native extension supports a default platform. The default platform\u2019s implementation has only ActionScript code, but no native code. If you package an application for a platform that the extension does not specifically support, the application uses the default implementation when it executes. For example, consider an extension that provides a feature that applies only to mobile devices. The extension can also provide a default implementation that a desktop application can use to simulate the feature."}),"\n",(0,s.jsx)(i.h2,{id:"supported-device-profiles",children:"Supported device profiles"}),"\n",(0,s.jsx)(i.p,{children:"The following AIR profiles support native extensions:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"extendedDesktop"}),", starting in AIR 3.0"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"mobileDevice"}),", starting in AIR 3.0"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"extendedMobileDevice"}),", starting in AIR 3.0"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"task-list-for-using-a-native-extension",children:"Task list for using a native extension"}),"\n",(0,s.jsx)(i.p,{children:"To use a native extension in your application, do the following tasks:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Declare the extension in your application descriptor file."}),"\n",(0,s.jsx)(i.li,{children:"Include the ANE file in your application\u2019s library path."}),"\n",(0,s.jsx)(i.li,{children:"Package the application."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"declaring-the-extension-in-your-application-descriptor",children:"Declaring the extension in your application descriptor"}),"\n",(0,s.jsxs)(i.p,{children:["All AIR applications have an application descriptor file. When an application uses a native extension, the application descriptor file includes an ",(0,s.jsx)(i.code,{children:"<extensions>"})," element. For example:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-xml",children:"<extensions>\n    <extensionID>com.example.Extension1</extensionID>\n    <extensionID>com.example.Extension2</extensionID>\n</extensions>\n"})}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"extensionID"})," element has the same value as the id element in the extension descriptor file. The extension descriptor file is an XML file called extension.xml. It is packaged in the ANE file. You can use an archive extractor tool to look at the extension.xml file."]}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsxs)(i.p,{children:["If you use the AIR Package Manager (",(0,s.jsx)(i.code,{children:"apm"}),") to manage your extensions then it should manage the ",(0,s.jsx)(i.code,{children:"<extensions>"})," element in your application descriptor as part of the application descriptor generation process. See ",(0,s.jsx)(i.a,{href:"/docs/basics/install-apm",children:"Install APM"})," to get started using ",(0,s.jsx)(i.code,{children:"apm"}),"."]})}),"\n",(0,s.jsx)(i.h2,{id:"including-the-ane-file-in-your-applications-library-path",children:"Including the ANE file in your application\u2019s library path"}),"\n",(0,s.jsx)(i.p,{children:"To compile an application that uses a native extension, include the ANE file in your library path."}),"\n",(0,s.jsxs)(i.p,{children:["There are a range of tutorials for adding an extension to your IDE on the ",(0,s.jsx)(i.a,{href:"https://docs.airnativeextensions.com/docs/tutorials/getting-started",children:"airnativeextensions documentation site"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"packaging-an-application-that-uses-native-extensions",children:"Packaging an application that uses native extensions"}),"\n",(0,s.jsx)(i.p,{children:"Most IDEs will package the extensions for you automatically once you have correctly added the extension identifier to your application descriptor and added the extension to the library path."}),"\n",(0,s.jsxs)(i.p,{children:["You can also use ADT directly to package an application that uses native extensions. You can find details about using ADT are at ",(0,s.jsx)(i.a,{href:"/docs/building/air-developer-tool/",children:"AIR Developer Tool (ADT)"}),"."]}),"\n",(0,s.jsx)(i.p,{children:"For example, the following ADT command creates a DMG file (a native installer file for Mac OS X) for an application that uses native extensions:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"adt -package\n    -storetype pkcs12\n    -keystore myCert.pfx\n    -target native\n    myApp.dmg\n    application.xml\n    index.html resources\n    -extdir extensionsDir\n"})}),"\n",(0,s.jsx)(i.p,{children:"The following command creates an APK package for an Android device:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"adt -package\n    -target apk\n    -storetype pkcs12 -keystore ../codesign.p12\n    myApp.apk\n    myApp-app.xml\n    myApp.swf icons\n    -extdir extensionsDir\n"})}),"\n",(0,s.jsx)(i.p,{children:"The following command creates an iOS package for an iPhone application:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"adt -package\n    -target ipa-ad-hoc\n    -storetype pkcs12 -keystore ../AppleDistribution.p12\n    -provisioning-profile AppleDistribution.mobileprofile\n    myApp.ipa\n    myApp-app.xml\n    myApp.swf icons Default.png\n    -extdir extensionsDir\n"})}),"\n",(0,s.jsx)(i.p,{children:"Note the following:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Use a native installer package type"}),"\n",(0,s.jsx)(i.li,{children:"Specify the extension directory"}),"\n",(0,s.jsx)(i.li,{children:"Make sure that the ANE file supports the application\u2019s target device (or contains a default implementation)"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"use-a-native-installer-package-type",children:"Use a native installer package type"}),"\n",(0,s.jsxs)(i.p,{children:["The application package must be a native installer. You cannot create a cross-platform AIR package (a ",(0,s.jsx)(i.code,{children:".air"})," package) for an application that uses a native extension, because native extensions usually contain native code. However, typically a native extension supports multiple native platforms with the same ActionScript APIs. In these cases, you can use the same ANE file in different native installer packages."]}),"\n",(0,s.jsxs)(i.p,{children:["The following table summarizes the value to use for the ",(0,s.jsx)(i.code,{children:"-target"})," option of the ADT command:"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Application\u2019s target platform"}),(0,s.jsx)(i.th,{children:(0,s.jsx)(i.code,{children:"-target"})})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Mac OS X or Windows desktop devices"}),(0,s.jsxs)(i.td,{children:[(0,s.jsx)(i.code,{children:"-target native"})," ",(0,s.jsx)("br",{}),(0,s.jsx)(i.code,{children:"-target bundle"})]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Android"}),(0,s.jsxs)(i.td,{children:[(0,s.jsx)(i.code,{children:"-target apk"})," ",(0,s.jsx)("br",{}),"or other Android package targets"]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"iOS"}),(0,s.jsxs)(i.td,{children:[(0,s.jsx)(i.code,{children:"-target ipa-ad-hoc"})," ",(0,s.jsx)("br",{}),"or other iOS package targets"]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"iOS Simulator"}),(0,s.jsxs)(i.td,{children:[(0,s.jsx)(i.code,{children:"-target ipa-test-interpreter-simulator"})," ",(0,s.jsx)("br",{}),(0,s.jsx)(i.code,{children:"-target ipa-debug-interpreter-simulator"})]})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"specify-the-extension-directory",children:"Specify the extension directory"}),"\n",(0,s.jsxs)(i.p,{children:["Use the ADT option ",(0,s.jsx)(i.code,{children:"-extdir"})," to tell ADT the directory that contains the native extensions (ANE files)."]}),"\n",(0,s.jsxs)(i.p,{children:["For details about this option, see ",(0,s.jsx)(i.a,{href:"/docs/building/air-developer-tool/option-sets/file-and-path-options",children:"File and path options"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"make-sure-that-the-ane-file-supports-the-applications-target-device",children:"Make sure that the ANE file supports the application\u2019s target device"}),"\n",(0,s.jsx)(i.p,{children:"When providing an ANE file, the native extension developer informs you which platforms the extension supports. You can also use an archive extractor tool to look at the contents of the ANE file. The extracted files include a directory for each supported platform."}),"\n",(0,s.jsxs)(i.admonition,{type:"info",children:[(0,s.jsx)(i.p,{children:'A good ANE developer should include a "default" implementation in an extension. This implementation will be used when there is no specific native implementation for the current platform.'}),(0,s.jsx)(i.p,{children:'However there are extensions that don\'t contain this "default" implementation. In this case your code will fail to run if you attempt to access the functionality of the extension.'})]}),"\n",(0,s.jsx)(i.p,{children:"Knowing which platforms the extension supports is important when packaging the application that uses the ANE file. Consider the following rules:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"To create an Android application package, the ANE file must include the Android-ARM platform. Alternatively, the ANE file must include the default platform and at least one other platform."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"To create an iOS application package, the ANE file must include the iPhone-ARM platform. Alternatively, the ANE file must include the default platform and at least one other platform."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"To create an iOS Simulator application package, the ANE file must include the iPhone-x86 platform."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"To create a Mac OS X application package, the ANE file must include the MacOS-x86 platform. Alternatively, the ANE file must include the default platform and at least one other platform."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"To create a Windows application package, the ANE file must include the Windows-x86 platform. Alternatively, the ANE file must include the default platform and at least one other platform."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"more-help-topics",children:"More Help topics"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://docs.airnativeextensions.com/docs/tutorials/",children:"AIR Native Extensions Tutorials"})}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);