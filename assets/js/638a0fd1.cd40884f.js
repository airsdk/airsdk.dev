"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[15240],{17970:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"development/rich-media-content/working-with-sound/loading-external-sound-files","title":"Loading external sound files","description":"Each instance of the Sound class exists to load and trigger the playback of a","source":"@site/docs/development/rich-media-content/working-with-sound/loading-external-sound-files.md","sourceDirName":"development/rich-media-content/working-with-sound","slug":"/development/rich-media-content/working-with-sound/loading-external-sound-files","permalink":"/docs/development/rich-media-content/working-with-sound/loading-external-sound-files","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/rich-media-content/working-with-sound/loading-external-sound-files.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"mainSidebar","previous":{"title":"Understanding the sound architecture","permalink":"/docs/development/rich-media-content/working-with-sound/understanding-the-sound-architecture"},"next":{"title":"Working with embedded sounds","permalink":"/docs/development/rich-media-content/working-with-sound/working-with-embedded-sounds"}}');var s=t(74848),d=t(28453);const a={sidebar_position:3},r="Loading external sound files",i={},l=[{value:"Monitoring the sound loading process",id:"monitoring-the-sound-loading-process",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"loading-external-sound-files",children:"Loading external sound files"})}),"\n",(0,s.jsx)(n.p,{children:"Each instance of the Sound class exists to load and trigger the playback of a\nspecific sound resource. An application can't reuse a Sound object to load more\nthan one sound. If it wants to load a new sound resource, it should create a new\nSound object."}),"\n",(0,s.jsx)(n.p,{children:"If you are loading a small sound file, such as a click sound to be attached to a\nbutton, your application can create a new Sound and have it automatically load\nthe sound file, as shown below:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'var req:URLRequest = new URLRequest("click.mp3");\nvar s:Sound = new Sound(req);\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Sound()"})," constructor accepts a URLRequest object as its first parameter.\nWhen a value for the URLRequest parameter is supplied, the new Sound object\nstarts loading the specified sound resource automatically."]}),"\n",(0,s.jsx)(n.p,{children:"In all but the simplest cases, your application should pay attention to the\nsound's loading progress and watch for errors during loading. For example, if\nthe click sound is fairly large, it might not be completely loaded by the time\nthe user clicks the button that triggers the sound. Trying to play an unloaded\nsound could cause a run-time error. It's safer to wait for the sound to load\ncompletely before letting users take actions that might start sounds playing."}),"\n",(0,s.jsx)(n.p,{children:"A Sound object dispatches a number of different events during the sound loading\nprocess. Your application can listen for these events to track loading progress\nand make sure that the sound loads completely before playing. The following\ntable lists the events that can be dispatched by a Sound object."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Event"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["open ( ",(0,s.jsx)(n.code,{children:"Event.OPEN"}),")"]}),(0,s.jsx)(n.td,{children:"Dispatched right before the sound loading operation begins."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["progress ( ",(0,s.jsx)(n.code,{children:"ProgressEvent.PROGRESS"}),")"]}),(0,s.jsx)(n.td,{children:"Dispatched periodically during the sound loading process when data is received from the file or stream."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["id3 ( ",(0,s.jsx)(n.code,{children:"Event.ID3"}),")"]}),(0,s.jsx)(n.td,{children:"Dispatched when ID3 data is available for an mp3 sound."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["complete ( ",(0,s.jsx)(n.code,{children:"Event.COMPLETE"}),")"]}),(0,s.jsx)(n.td,{children:"Dispatched when all of the sound resource's data has been loaded."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["ioError ( ",(0,s.jsx)(n.code,{children:"IOErrorEvent.IO_ERROR"}),")"]}),(0,s.jsx)(n.td,{children:"Dispatched when a sound file cannot be located or when the loading process is interrupted before all sound data can be received."})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"The following code illustrates how to play a sound after it has finished\nloading:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'import flash.events.Event;\nimport flash.media.Sound;\nimport flash.net.URLRequest;\n\nvar s:Sound = new Sound();\ns.addEventListener(Event.COMPLETE, onSoundLoaded);\nvar req:URLRequest = new URLRequest("bigSound.mp3");\ns.load(req);\n\nfunction onSoundLoaded(event:Event):void\n{\n\tvar localSound:Sound = event.target as Sound;\n\tlocalSound.play();\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["First, the code sample creates a new Sound object without giving it an initial\nvalue for the URLRequest parameter. Then, it listens for the ",(0,s.jsx)(n.code,{children:"Event.COMPLETE"}),"\nevent from the Sound object, which causes the ",(0,s.jsx)(n.code,{children:"onSoundLoaded()"})," method to\nexecute when all the sound data is loaded. Next, it calls the ",(0,s.jsx)(n.code,{children:"Sound.load()"}),"\nmethod with a new URLRequest value for the sound file."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"onSoundLoaded()"})," method executes when the sound loading is complete. The\n",(0,s.jsx)(n.code,{children:"target"})," property of the Event object is a reference to the Sound object.\nCalling the ",(0,s.jsx)(n.code,{children:"play()"})," method of the Sound object then starts the sound playback."]}),"\n",(0,s.jsx)(n.h2,{id:"monitoring-the-sound-loading-process",children:"Monitoring the sound loading process"}),"\n",(0,s.jsx)(n.p,{children:"Sound files can be very large and take a long time to load. While Flash Player\nand AIR let your application play sounds even before they are fully loaded, you\nmight want to give the user an indication of how much of the sound data has been\nloaded and how much of the sound has already been played."}),"\n",(0,s.jsxs)(n.p,{children:["The Sound class dispatches two events that make it relatively easy to display\nthe loading progress of a sound: ",(0,s.jsx)(n.code,{children:"ProgressEvent.PROGRESS"})," and ",(0,s.jsx)(n.code,{children:"Event.COMPLETE"}),".\nThe following example shows how to use these events to display progress\ninformation about the sound being loaded:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'import flash.events.Event;\nimport flash.events.ProgressEvent;\nimport flash.media.Sound;\nimport flash.net.URLRequest;\n\nvar s:Sound = new Sound();\ns.addEventListener(ProgressEvent.PROGRESS, onLoadProgress);\ns.addEventListener(Event.COMPLETE, onLoadComplete);\ns.addEventListener(IOErrorEvent.IO_ERROR, onIOError);\n\nvar req:URLRequest = new URLRequest("bigSound.mp3");\ns.load(req);\n\nfunction onLoadProgress(event:ProgressEvent):void\n{\n\tvar loadedPct:uint =         Math.round(100 * (event.bytesLoaded / event.bytesTotal));\n\ttrace("The sound is " + loadedPct + "% loaded.");\n}\n\nfunction onLoadComplete(event:Event):void\n{\n\tvar localSound:Sound = event.target as Sound;\n\tlocalSound.play();\n}\nfunction onIOError(event:IOErrorEvent)\n{\n\ttrace("The sound could not be loaded: " + event.text);\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This code first creates a Sound object and then adds listeners to that object\nfor the ",(0,s.jsx)(n.code,{children:"ProgressEvent.PROGRESS"})," and ",(0,s.jsx)(n.code,{children:"Event.COMPLETE"})," events. After the\n",(0,s.jsx)(n.code,{children:"Sound.load()"})," method has been called and the first data is received from the\nsound file, a ",(0,s.jsx)(n.code,{children:"ProgressEvent.PROGRESS"})," event occurs and triggers the\n",(0,s.jsx)(n.code,{children:"onSoundLoadProgress()"})," method."]}),"\n",(0,s.jsxs)(n.p,{children:["The percentage of the sound data that has been loaded is equal to the value of\nthe ",(0,s.jsx)(n.code,{children:"bytesLoaded"})," property of the ProgressEvent object divided by the value of\nthe ",(0,s.jsx)(n.code,{children:"bytesTotal"})," property. The same ",(0,s.jsx)(n.code,{children:"bytesLoaded"})," and ",(0,s.jsx)(n.code,{children:"bytesTotal"})," properties\nare available on the Sound object as well. The example above simply shows\nmessages about the sound loading progress, but you can easily use the\n",(0,s.jsx)(n.code,{children:"bytesLoaded"})," and ",(0,s.jsx)(n.code,{children:"bytesTotal"})," values to update progress bar components, such as\nthe ones that come with the Adobe Flex framework or the Adobe Flash authoring\ntool."]}),"\n",(0,s.jsxs)(n.p,{children:["This example also shows how an application can recognize and respond to an error\nwhen loading sound files. For example, if a sound file with the given filename\ncannot be located, an ",(0,s.jsx)(n.code,{children:"Event.IO_ERROR"})," event is dispatched by the Sound object.\nIn the previous code, the ",(0,s.jsx)(n.code,{children:"onIOError()"})," method executes and displays a brief\nerror message when an error occurs."]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var o=t(96540);const s={},d=o.createContext(s);function a(e){const n=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(d.Provider,{value:n},e.children)}}}]);