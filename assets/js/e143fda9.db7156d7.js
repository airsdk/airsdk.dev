"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[35122],{28453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>a});var n=i(96540);const s={},o=n.createContext(s);function r(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(o.Provider,{value:t},e.children)}},85194:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"building/air-developer-tool/option-sets/code-signing-options","title":"ADT code signing options","description":"ADT uses the Java Cryptography Architecture (JCA) to access private keys and certificates for signing AIR applications. The signing options identify the keystore and the private key and certificate within that keystore.","source":"@site/docs/building/air-developer-tool/option-sets/code-signing-options.md","sourceDirName":"building/air-developer-tool/option-sets","slug":"/building/air-developer-tool/option-sets/code-signing-options","permalink":"/docs/building/air-developer-tool/option-sets/code-signing-options","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/building/air-developer-tool/option-sets/code-signing-options.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"ADT code signing options","sidebar_label":"Code signing","sidebar_position":1},"sidebar":"mainSidebar","previous":{"title":"uninstallRuntime (deprecated)","permalink":"/docs/building/air-developer-tool/commands/uninstallRuntime"},"next":{"title":"File and path","permalink":"/docs/building/air-developer-tool/option-sets/file-and-path-options"}}');var s=i(74848),o=i(28453);const r={title:"ADT code signing options",sidebar_label:"Code signing",sidebar_position:1},a=void 0,d={},c=[{value:"AIR signing options syntax",id:"air-signing-options-syntax",level:2},{value:"<code>-alias</code>",id:"-alias",level:3},{value:"<code>-storetype</code>",id:"-storetype",level:3},{value:"<code>-keystore</code>",id:"-keystore",level:3},{value:"<code>-storepass</code>",id:"-storepass",level:3},{value:"<code>-keypass</code>",id:"-keypass",level:3},{value:"<code>-providerName</code>",id:"-providername",level:3},{value:"<code>-tsa</code>",id:"-tsa",level:3},{value:"<code>-provisioning-profile</code>",id:"-provisioning-profile",level:3},{value:"Signing option examples",id:"signing-option-examples",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"ADT uses the Java Cryptography Architecture (JCA) to access private keys and certificates for signing AIR applications. The signing options identify the keystore and the private key and certificate within that keystore."}),"\n",(0,s.jsx)(t.p,{children:"The keystore must include both the private key and the associated certificate chain. If the signing certificate chains to a trusted certificate on a computer, then the contents of the common name field of the certificate is displayed as the publisher name on the AIR installation dialog."}),"\n",(0,s.jsxs)(t.p,{children:["ADT requires that the certificate conform to the x509v3 standard (",(0,s.jsx)(t.a,{href:"http://tools.ietf.org/html/rfc3280",children:"RFC3280"}),") and include the Extended Key Usage extension with the proper values for code signing. Constraints defined within the certificate are respected and could preclude the use of some certificates for signing AIR applications."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsx)(t.p,{children:"ADT uses the Java runtime environment proxy settings, when appropriate, for connecting to Internet resources for checking certificate revocation lists and obtaining time-stamps. If you encounter problems connecting to these Internet resources when using ADT and your network requires specific proxy settings, you may need to configure the JRE proxy settings."})}),"\n",(0,s.jsx)(t.h2,{id:"air-signing-options-syntax",children:"AIR signing options syntax"}),"\n",(0,s.jsx)(t.p,{children:"The signing options use the following syntax (on a single command line):"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-alias aliasName\n-storetype type\n-keystore path\n-storepass password1\n-keypass password2\n-providerName className\n-tsa url\n"})}),"\n",(0,s.jsx)(t.h3,{id:"-alias",children:(0,s.jsx)(t.code,{children:"-alias"})}),"\n",(0,s.jsx)(t.p,{children:"The alias of a key in the keystore. Specifying an alias is not necessary when a keystore only contains a single certificate. If no alias is specified, ADT uses the first key in the keystore."}),"\n",(0,s.jsx)(t.p,{children:"Not all keystore management applications allow an alias to be assigned to certificates. When using the Windows system keystore, for example, use the distinguished name of the certificate as the alias. You can use the Java Keytool utility to list the available certificates so that you can determine the alias. For example, running the command:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"keytool -list -storetype Windows-MY\n"})}),"\n",(0,s.jsx)(t.p,{children:"produces output like the following for a certificate:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"CN=TestingCert,OU=QE,O=Adobe,C=US, PrivateKeyEntry,\nCertificate fingerprint (MD5): 73:D5:21:E9:8A:28:0A:AB:FD:1D:11:EA:BB:A7:55:88\n"})}),"\n",(0,s.jsx)(t.p,{children:"To reference this certificate on the ADT command line, set the alias to:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"CN=TestingCert,OU=QE,O=Adobe,C=US\n"})}),"\n",(0,s.jsx)(t.p,{children:"On Mac OS X, the alias of a certificate in the Keychain is the name displayed in the Keychain Access application."}),"\n",(0,s.jsx)(t.h3,{id:"-storetype",children:(0,s.jsx)(t.code,{children:"-storetype"})}),"\n",(0,s.jsx)(t.p,{children:"The type of keystore, determined by the keystore implementation. The default keystore implementation included with most installations of Java supports the JKS and PKCS12 types. Java 5.0 includes support for the PKCS11 type, for accessing keystores on hardware tokens, and Keychain type, for accessing the Mac OS X keychain. Java 6.0 includes support for the MSCAPI type (on Windows). If other JCA providers have been installed and configured, additional keystore types might be available. If no keystore type is specified, the default type for the default JCA provider is used."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Store type"}),(0,s.jsx)(t.th,{children:"Keystore format"}),(0,s.jsx)(t.th,{children:"Minimum Java version"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"JKS"}),(0,s.jsx)(t.td,{children:"Java keystore file (.keystore)"}),(0,s.jsx)(t.td,{children:"1.2"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"PKCS12"}),(0,s.jsx)(t.td,{children:"PKCS12 file (.p12 or .pfx)"}),(0,s.jsx)(t.td,{children:"1.4"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"PKCS11"}),(0,s.jsx)(t.td,{children:"Hardware token"}),(0,s.jsx)(t.td,{children:"1.5"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"KeychainStore"}),(0,s.jsx)(t.td,{children:"Mac OS X Keychain"}),(0,s.jsx)(t.td,{children:"1.5"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Windows-MY or Windows-ROOT"}),(0,s.jsx)(t.td,{children:"MSCAPI"}),(0,s.jsx)(t.td,{children:"1.6"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"-keystore",children:(0,s.jsx)(t.code,{children:"-keystore"})}),"\n",(0,s.jsx)(t.p,{children:"The path to the keystore file for file-based store types."}),"\n",(0,s.jsx)(t.h3,{id:"-storepass",children:(0,s.jsx)(t.code,{children:"-storepass"})}),"\n",(0,s.jsx)(t.p,{children:"The password required to access the keystore. If not specified, ADT prompts for the password."}),"\n",(0,s.jsx)(t.h3,{id:"-keypass",children:(0,s.jsx)(t.code,{children:"-keypass"})}),"\n",(0,s.jsx)(t.p,{children:"The password required to access the private key that is used to sign the AIR application. If not specified, ADT prompts for the password."}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["If you enter a password as part of the ADT command, the password characters are saved in the command-line history. Therefore, using the ",(0,s.jsx)(t.code,{children:"-keypass"})," or ",(0,s.jsx)(t.code,{children:"-storepass"})," options is not recommended when the security of the certificate is important. Also note that when you omit the password options, the characters you type at the password prompts are not displayed (for the same security reasons). Simply type the password and press the Enter key."]})}),"\n",(0,s.jsx)(t.h3,{id:"-providername",children:(0,s.jsx)(t.code,{children:"-providerName"})}),"\n",(0,s.jsx)(t.p,{children:"The JCA provider for the specified keystore type. If not specified, then ADT uses the default provider for that type of keystore."}),"\n",(0,s.jsx)(t.h3,{id:"-tsa",children:(0,s.jsx)(t.code,{children:"-tsa"})}),"\n",(0,s.jsxs)(t.p,{children:["Specifies the URL of an ",(0,s.jsx)(t.a,{href:"http://www.ietf.org/rfc/rfc3161.txt",children:"RFC3161"}),"-compliant timestamp server to time-stamp the digital signature. If no URL is specified, a default time-stamp server provided by Geotrust is used. When the signature of an AIR application is time-stamped, the application can still be installed after the signing certificate expires, because the timestamp verifies that the certificate was valid at the time of signing."]}),"\n",(0,s.jsx)(t.p,{children:"If ADT cannot connect to the time-stamp server, then signing is canceled and no package is produced. Specify -tsa none to disable time-stamping. However, an AIR application packaged without a timestamp ceases to be installable after the signing certificate expires."}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsx)(t.p,{children:"Many of the signing options are equivalent to the same option of the Java Keytool utility. You can use the Keytool utility to examine and manage keystores on Windows. The Apple\xae security utility can also be used for this purpose on Mac OS X."})}),"\n",(0,s.jsx)(t.h3,{id:"-provisioning-profile",children:(0,s.jsx)(t.code,{children:"-provisioning-profile"})}),"\n",(0,s.jsx)(t.p,{children:"The Apple iOS provisioning file. (Required for packaging iOS applications, only.)"}),"\n",(0,s.jsx)(t.h2,{id:"signing-option-examples",children:"Signing option examples"}),"\n",(0,s.jsx)(t.p,{children:"Signing with a .p12 file:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-storetype pkcs12 -keystore cert.p12\n"})}),"\n",(0,s.jsx)(t.p,{children:"Signing with the default Java keystore:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-alias AIRcert -storetype jks\n"})}),"\n",(0,s.jsx)(t.p,{children:"Signing with a specific Java keystore:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-alias AIRcert -storetype jks -keystore certStore.keystore\n"})}),"\n",(0,s.jsx)(t.p,{children:"Signing with the Mac OS X keychain:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-alias AIRcert -storetype KeychainStore -providerName Apple\n"})}),"\n",(0,s.jsx)(t.p,{children:"Signing with the Windows system keystore:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-alias cn=AIRCert -storeype Windows-MY\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Signing with a hardware token (refer to the token manufacturer\u2019s instructions on configuring Java to use the token and for the correct ",(0,s.jsx)(t.code,{children:"providerName"})," value):"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-alias AIRCert -storetype pkcs11 -providerName tokenProviderName\n"})}),"\n",(0,s.jsx)(t.p,{children:"Signing without embedding a timestamp:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"-storetype pkcs12 -keystore cert.p12 -tsa none\n"})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);