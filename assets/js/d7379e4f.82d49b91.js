"use strict";(globalThis.webpackChunkairsdk_dev=globalThis.webpackChunkairsdk_dev||[]).push([[97130],{7227:(e,t,n)=>{n.d(t,{A:()=>o});n(96540);var a=n(34164);const i={tabItem:"tabItem_Ymn6"};var r=n(74848);function o({children:e,hidden:t,className:n}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,n),hidden:t,children:e})}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var a=n(96540);const i={},r=a.createContext(i);function o(e){const t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:t},e.children)}},49489:(e,t,n)=>{n.d(t,{A:()=>k});var a=n(96540),i=n(34164),r=n(18630),o=n(24245),s=n(56347),l=n(36494),c=n(62814),u=n(45167),d=n(69900);function p(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,a.useMemo)(()=>{const e=t??function(e){return p(e).map(({props:{value:e,label:t,attributes:n,default:a}})=>({value:e,label:t,attributes:n,default:a}))}(n);return function(e){const t=(0,u.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,n])}function f({value:e,tabValues:t}){return t.some(t=>t.value===e)}function g({queryString:e=!1,groupId:t}){const n=(0,s.W6)(),i=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(i),(0,a.useCallback)(e=>{if(!i)return;const t=new URLSearchParams(n.location.search);t.set(i,e),n.replace({...n.location,search:t.toString()})},[i,n])]}function v(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,r=h(e),[o,s]=(0,a.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find(e=>e.default)??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r})),[c,u]=g({queryString:n,groupId:i}),[p,v]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,i]=(0,d.Dv)(t);return[n,(0,a.useCallback)(e=>{t&&i.set(e)},[t,i])]}({groupId:i}),m=(()=>{const e=c??p;return f({value:e,tabValues:r})?e:null})();(0,l.A)(()=>{m&&s(m)},[m]);return{selectedValue:o,selectValue:(0,a.useCallback)(e=>{if(!f({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),v(e)},[u,v,r]),tabValues:r}}var m=n(11062);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=n(74848);function x({className:e,block:t,selectedValue:n,selectValue:a,tabValues:r}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const t=e.currentTarget,i=s.indexOf(t),o=r[i].value;o!==n&&(l(t),a(o))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;t=s[n]??s[0];break}case"ArrowLeft":{const n=s.indexOf(e.currentTarget)-1;t=s[n]??s[s.length-1];break}}t?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:r.map(({value:e,label:t,attributes:a})=>(0,b.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{s.push(e)},onKeyDown:u,onClick:c,...a,className:(0,i.A)("tabs__item",y.tabItem,a?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function j({lazy:e,children:t,selectedValue:n}){const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===n);return e?(0,a.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function w(e){const t=v(e);return(0,b.jsxs)("div",{className:(0,i.A)(r.G.tabs.container,"tabs-container",y.tabList),children:[(0,b.jsx)(x,{...t,...e}),(0,b.jsx)(j,{...t,...e})]})}function k(e){const t=(0,m.A)();return(0,b.jsx)(w,{...e,children:p(e.children)},String(t))}},62691:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/files/pepk.jar-313960c1d1afc1f93eb98fa5144f3fa0.zip"},79074:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"tutorials/platform/android/handling-1024bit-certificates","title":"Handling 1024bit Certificates","description":"In the past you may have been using a 1024bit certificate for signing your application. With the latest Java releases 1024bit certificates are no longer supported and as creating Android applications requires a newer version of Java you will need to update to a 2048bit certificate (or better).","source":"@site/docs/tutorials/platform/android/handling-1024bit-certificates.md","sourceDirName":"tutorials/platform/android","slug":"/tutorials/platform/android/handling-1024bit-certificates","permalink":"/docs/tutorials/platform/android/handling-1024bit-certificates","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/tutorials/platform/android/handling-1024bit-certificates.md","tags":[],"version":"current","frontMatter":{"title":"Handling 1024bit Certificates"},"sidebar":"mainSidebar","previous":{"title":"Custom Resources","permalink":"/docs/tutorials/platform/android/custom-resources"},"next":{"title":"Packaging Android App Bundles","permalink":"/docs/tutorials/platform/android/packaging-android-app-bundles"}}');var i=n(74848),r=n(28453),o=n(49489),s=n(7227);const l={title:"Handling 1024bit Certificates"},c=void 0,u={},d=[{value:"Play App Signing",id:"play-app-signing",level:2},{value:"Convert existing certificate",id:"convert-existing-certificate",level:3},{value:"Create an upload certificate",id:"create-an-upload-certificate",level:3}];function p(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"In the past you may have been using a 1024bit certificate for signing your application. With the latest Java releases 1024bit certificates are no longer supported and as creating Android applications requires a newer version of Java you will need to update to a 2048bit certificate (or better)."}),"\n",(0,i.jsxs)(t.p,{children:["To generate a new certificate you can use ",(0,i.jsx)(t.code,{children:"adt"})," :"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"adt -certificate -cn ORG_NAME -validityPeriod 20 2048-RSA certificate.p12 PASSWORD\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"The latest version of Java that supports 1024 bit certificates is 1.8.0_112."})}),"\n",(0,i.jsx)(t.p,{children:"An issue arises however with platforms that don't allow certificate changes, particularly with the Google Play Store."}),"\n",(0,i.jsx)(t.p,{children:'In this case the easiest approach is to update to Play App Signing and upload the old certificate for Google to automatically sign releases. You will create a new 2048 "upload certificate" which you will use for testing and uploading.'}),"\n",(0,i.jsx)(t.h2,{id:"play-app-signing",children:"Play App Signing"}),"\n",(0,i.jsx)(t.h3,{id:"convert-existing-certificate",children:"Convert existing certificate"}),"\n",(0,i.jsxs)(t.p,{children:["Firstly go through the process to ",(0,i.jsx)(t.a,{href:"/docs/tutorials/platform/android/packaging-android-app-bundles#converting-existing-certificates",children:"convert your existing certificates"}),', including setting up "Play App Signing". When you reach the point of having to "Export and upload a key from Java keystore" it will likely fail as you cannot read your existing certificate using the latest Java.']}),"\n",(0,i.jsxs)(t.p,{children:["You will need to ensure you have version 1.8.0_112 of the Java development kit installed on your machine, along with the current version you are using for AIR. You can find versions of the JDK ",(0,i.jsx)(t.a,{href:"https://www.oracle.com/au/java/technologies/javase/javase8-archive-downloads.html",children:"here"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Download the ",(0,i.jsxs)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(62691).A+"",children:[(0,i.jsx)(t.code,{children:"pepk.jar"})," tool"]})," java application and extract it to a known location. (This is an older version of the Google supplied tool that still supports java 1.8)."]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Change Java Environment"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"You will need to temporarily change your java version to use the version 1.8 you just installed:"}),"\n",(0,i.jsxs)(o.A,{groupId:"operating-system",defaultValue:"macos",values:[{label:"macOS",value:"macos"},{label:"Windows",value:"windows"}],children:[(0,i.jsxs)(s.A,{value:"macos",children:[(0,i.jsx)(t.p,{children:"Open your terminal application, and set the environment to use Java 1.8:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"export JAVA_HOME=`/usr/libexec/java_home -v1.8.0_112`\nexport JAVACMD=${JAVA_HOME}/bin/java\n"})})]}),(0,i.jsx)(s.A,{value:"windows",children:(0,i.jsx)(t.p,{children:"There are different ways to temporarily change your java version depending on the terminal app you are using but the simplest way is to just change the global JAVA_HOME environment variable and then change it back when you create your upload certificate."})})]}),"\n",(0,i.jsxs)(t.p,{children:["You can confirm by running ",(0,i.jsx)(t.code,{children:"java -version"})," and you should see ",(0,i.jsx)(t.code,{children:"1.8.0_112"}),"."]}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsx)(t.li,{children:"Get the certificate alias"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Get the alias (generally this value is ",(0,i.jsx)(t.code,{children:"1"})," but you should confirm):"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"keytool -v -list -keystore Certificate.p12\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"3",children:["\n",(0,i.jsx)(t.li,{children:"Encrypt for uploading"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:'Then run the tool (the encryption key should be listed on the play store page "Export and upload a key from Java keystore"):'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"java -jar pepk.jar  \\\n  --keystore=Certificate.p12 --alias=1 \\\n  --output=encrypted_certificate.zip \\\n  --encryptionkey=XXXX\n"})}),"\n",(0,i.jsxs)(t.p,{children:["This will create a ",(0,i.jsx)(t.code,{children:"encrypted_certificate.zip"})," file which you can upload to the Play console."]}),"\n",(0,i.jsx)(t.h3,{id:"create-an-upload-certificate",children:"Create an upload certificate"}),"\n",(0,i.jsx)(t.admonition,{title:"Important",type:"danger",children:(0,i.jsx)(t.p,{children:"Do not skip this step when converting an old certificate. It is listed as optional in the documentation for Play App Signing but in this case it is required."})}),"\n",(0,i.jsx)(t.p,{children:"Next you will need to create an upload certificate. This is the certificate you will use to sign your application with AIR for testing and uploading. This should be a newer 2048 bit certificate."}),"\n",(0,i.jsx)(t.p,{children:"Close the terminal that you temporarily changed the java version in the previous section and open a new terminal window, confirming your java version has returned to the latest."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Create a RSA 2048 certificate using ",(0,i.jsx)(t.code,{children:"adt"})," (replace fields as required):"]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'adt -certificate \\\n\t-cn "common name" \\\n\t-validityPeriod 20 \\\n\t2048-RSA \\\n\tupload_certificate.p12 \\\n\tPASSWORD\n'})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Convert the ",(0,i.jsx)(t.code,{children:"p12"})," to a ",(0,i.jsx)(t.code,{children:"pem"})," file:"]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"keytool -export -rfc \\\n\t\t-keystore upload_certificate.p12 \\\n\t\t-alias 1 \\\n\t\t-file upload_certificate.pem\n"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Upload the ",(0,i.jsx)(t.code,{children:"upload_certificate.pem"})," file as your upload certificate."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["More details on the upload certificate can be found ",(0,i.jsx)(t.a,{href:"/docs/tutorials/platform/android/packaging-android-app-bundles#upload-certificate",children:"here"})," including how to change an upload certificate if you didn't create one when setting up Play App Signing."]}),"\n",(0,i.jsxs)(t.admonition,{title:"Debugging Services",type:"note",children:[(0,i.jsx)(t.p,{children:"Many Android services are tied to the signature of your application (you may have entered a fingerprint of your certificate when setting up a service). Services such as Firebase and Facebook use this signature to verify the request is coming from the correct application."}),(0,i.jsx)(t.p,{children:"When you are testing with the new upload certificate you may find some of the services are failing due to the signature mismatch. This won't affect your live application as Google is signing it with your original certificate, however to aid your testing it is recommended that you add an additional fingerprint for your new upload certificate to your service configuration."})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}}}]);