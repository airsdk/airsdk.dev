"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[26600],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var i=t(96540);const a={},r=i.createContext(a);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},32193:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"development/user-interaction/drag-and-drop-in-air/handling-file-drops-in-non-application-html-sandboxes","title":"Handling file drops in non-application HTML sandboxes","description":"Non-application content cannot access the File objects that result when files","source":"@site/docs/development/user-interaction/drag-and-drop-in-air/handling-file-drops-in-non-application-html-sandboxes.md","sourceDirName":"development/user-interaction/drag-and-drop-in-air","slug":"/development/user-interaction/drag-and-drop-in-air/handling-file-drops-in-non-application-html-sandboxes","permalink":"/docs/development/user-interaction/drag-and-drop-in-air/handling-file-drops-in-non-application-html-sandboxes","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/user-interaction/drag-and-drop-in-air/handling-file-drops-in-non-application-html-sandboxes.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"mainSidebar","previous":{"title":"Example: Overriding the default HTML drag-in behavior","permalink":"/docs/development/user-interaction/drag-and-drop-in-air/example-overriding-the-default-html-drag-in-behavior"},"next":{"title":"Dropping file promises","permalink":"/docs/development/user-interaction/drag-and-drop-in-air/dropping-file-promises/"}}');var a=t(74848),r=t(28453);const o={sidebar_position:8},d="Handling file drops in non-application HTML sandboxes",s={},l=[];function c(e){const n={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"handling-file-drops-in-non-application-html-sandboxes",children:"Handling file drops in non-application HTML sandboxes"})}),"\n",(0,a.jsx)(n.p,{children:"Non-application content cannot access the File objects that result when files\nare dragged into an AIR application. Nor is it possible to pass one of these\nFile objects to application content through a sandbox bridge. (The object\nproperties must be accessed during serialization.) However, you can still drop\nfiles in your application by listening for the AIR nativeDragDrop events on the\nHTMLLoader object."}),"\n",(0,a.jsx)(n.p,{children:"Normally, if a user drops a file into a frame that hosts non-application\ncontent, the drop event does not propagate from the child to the parent.\nHowever, since the events dispatched by the HTMLLoader (which is the container\nfor all HTML content in an AIR application) are not part of the HTML event flow,\nyou can still receive the drop event in application content."}),"\n",(0,a.jsxs)(n.p,{children:["To receive the event for a file drop, the parent document adds an event listener\nto the HTMLLoader object using the reference provided by ",(0,a.jsx)(n.code,{children:"window.htmlLoader"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'window.htmlLoader.addEventListener("nativeDragDrop",function(event) {\n\tvar filelist = event.clipboard.getData(air.ClipboardFormats.FILE_LIST_FORMAT);\n\tair.trace(filelist[0].url);\n});\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The following example uses a parent document that loads a child page into a\nremote sandbox (",(0,a.jsx)(n.a,{href:"http://localhost/",children:"http://localhost/"}),"). The parent listens for the ",(0,a.jsx)(n.code,{children:"nativeDragDrop"}),"\nevent on the HTMLLoader object and traces out the file url."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'<html>\n<head>\n\t<title>Drag-and-drop in a remote sandbox</title>\n\t<script language="javascript" type="text/javascript" src="AIRAliases.js"><\/script>\n\t<script language="javascript">\n\twindow.htmlLoader.addEventListener("nativeDragDrop",function(event){\n\t\tvar filelist = event.clipboard.getData(air.ClipboardFormats.FILE_LIST_FORMAT);\n\t\tair.trace(filelist[0].url);\n\t});\n\t<\/script>\n</head>\n<body>\n\t<iframe src="child.html"\n\t\t\tsandboxRoot="http://localhost/"\n\t\t\tdocumentRoot="app:/"\n\t\t\tframeBorder="0"  width="100%" height="100%">\n\t</iframe>\n</body>\n</html>\n'})}),"\n",(0,a.jsxs)(n.p,{children:["The child document must present a valid drop target by calling the Event object\n",(0,a.jsx)(n.code,{children:"preventDefault()"})," method in the HTML ",(0,a.jsx)(n.code,{children:"dragenter"})," and ",(0,a.jsx)(n.code,{children:"dragover"})," event handlers.\nOtherwise, the drop event can never occur."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'<html>\n<head>\n\t<title>Drag and drop target</title>\n\t<script language="javascript" type="text/javascript">\n\t\tfunction preventDefault(event){\n\t\t\tevent.preventDefault();\n\t\t}\n\t<\/script>\n</head>\n<body ondragenter="preventDefault(event)" ondragover="preventDefault(event)">\n\t<div>\n\t\t<h1>Drop Files Here</h1>\n\t</div>\n</body>\n</html>\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);