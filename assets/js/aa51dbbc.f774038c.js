"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[41488],{28453:(t,e,n)=>{n.d(e,{R:()=>s,x:()=>o});var i=n(96540);const a={},r=i.createContext(a);function s(t){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function o(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:s(t.components),i.createElement(r.Provider,{value:e},t.children)}},51658:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"development/text/using-the-flash-text-engine/flash-text-engine-example-news-layout","title":"Flash Text Engine example: News layout","description":"This programming example shows the Flash Text Engine in use laying out a simple","source":"@site/docs/development/text/using-the-flash-text-engine/flash-text-engine-example-news-layout.md","sourceDirName":"development/text/using-the-flash-text-engine","slug":"/development/text/using-the-flash-text-engine/flash-text-engine-example-news-layout","permalink":"/docs/development/text/using-the-flash-text-engine/flash-text-engine-example-news-layout","draft":false,"unlisted":false,"editUrl":"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/text/using-the-flash-text-engine/flash-text-engine-example-news-layout.md","tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"Creating and displaying text","permalink":"/docs/development/text/using-the-flash-text-engine/creating-and-displaying-text"},"next":{"title":"Formatting text","permalink":"/docs/development/text/using-the-flash-text-engine/formatting-text"}}');var a=n(74848),r=n(28453);const s={},o="Flash Text Engine example: News layout",l={},h=[];function d(t){const e={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,r.R)(),...t.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"flash-text-engine-example-news-layout",children:"Flash Text Engine example: News layout"})}),"\n",(0,a.jsx)(e.p,{children:"This programming example shows the Flash Text Engine in use laying out a simple\nnewspaper page. The page includes a large headline, a subhead, and a multicolumn\nbody section."}),"\n",(0,a.jsx)(e.p,{children:"First, create an FLA file, and attach the following code to frame #2 of the\ndefault layer:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"import com.example.programmingas3.newslayout.StoryLayout;\n// frame sc ript - create  a 3-columned arti cle layout\nvar story:StoryLayout = new StoryLayout(720, 500, 3, 10);\nstory.x = 20;\nstory.y = 80;\naddChild(story);\nstop();\n"})}),"\n",(0,a.jsx)(e.p,{children:"StoryLayout.as is the controller script for this example. It sets the content,\nreads in style information from an external style sheet, and assigns those\nstyles to ElementFormat objects. It then creates the headline, subhead and\nmulticolumn text elements."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'package com.example.programmingas3.newslayout\n{\n\timport flash.display.Sprite;\n\timport flash.text.StyleSheet;\n\timport flash.text.engine.*;\n\n\timport flash.events.Event;\n\timport flash.net.URLRequest;\n\timport flash.net.URLLoader;\n\timport flash.display.Sprite;\n\timport flash.display.Graphics;\n\n\tpublic class StoryLayout extends Sprite\n\t{\n\t\tpublic var headlineTxt:HeadlineTextField;\n\t\tpublic var subtitleTxt:HeadlineTextField;\n\t\tpublic var storyTxt:MultiColumnText;\n\t\tpublic var sheet:StyleSheet;\n\t\tpublic var h1_ElFormat:ElementFormat;\n\t\tpublic var h2_ElFormat:ElementFormat;\n\t\tpublic var p_ElFormat:ElementFormat;\n\n\t\tprivate var loader:URLLoader;\n\n\t\tpublic var paddingLeft:Number;\n\t\tpublic var paddingRight:Number;\n\t\tpublic var paddingTop:Number;\n\t\tpublic var paddingBottom:Number;\n\n\t\tpublic var preferredWidth:Number;\n\t\tpublic var preferredHeight:Number;\n\n\t\tpublic var numColumns:int;\n\n\t\tpublic var bgColor:Number = 0xFFFFFF;\n\n\t\tpublic var headline:String = "News Layout Example";\n\t\tpublic var subtitle:String = "This example formats text like a newspaper page using the Flash Text Engine API. ";\n\n\t\tpublic var rawTestData:String =\n\t\t"From the part Mr. Burke took in the American Revolution, it was natural that I should consider him a friend to mankind; and as our acquaintance commenced on that ground, it would have been more agreeable to me to have had cause to continue in that opinion than to change it. " +\n\t\t"At the time Mr. Burke made his violent speech last winter in the English Parliament against the French Revolution and the National Assembly, I was in Paris, and had written to him but a short time before to inform him how prosperously matters were going on. Soon after this I saw his advertisement of the Pamphlet he intended to publish: As the attack was to be made in a language but little studied, and less understood in France, and as everything suffers by translation, I promised some of the friends of the Revolution in that country that whenever Mr. Burke\'s Pamphlet came forth, I would answer it. This appeared to me the more necessary to be done, when I saw the flagrant misrepresentations which Mr. Burke\'s Pamphlet contains; and that while it is an outrageous abuse on the French Revolution, and the principles of Liberty, it is an imposition on the rest of the world. " +\n\t\t"I am the more astonished and disappointed at this conduct in Mr. Burke, as (from the circumstances I am going to mention) I had formed other expectations. " +\n\t\t"I had seen enough of the miseries of war, to wish it might never more have existence in the world, and that some other mode might be found out to settle the differences that should occasionally arise in the neighbourhood of nations. This certainly might be done if Courts were disposed to set honesty about it, or if countries were enlightened enough not to be made the dupes of Courts. The people of America had been bred up in the same prejudices against France, which at that time characterised the people of England; but experience and an acquaintance with the French Nation have most effectually shown to the Americans the falsehood of those prejudices; and I do not believe that a more cordial and confidential intercourse exists between any two countries than between America and France. ";\n\n\t\tpublic function StoryLayout(w:int = 400, h:int = 200, cols:int = 3, padding:int = 10):void\n\t\t{\n\t\t\tthis.preferredWidth = w;\n\t\t\tthis.preferredHeight = h;\n\n\t\t\tthis.numColumns = cols;\n\n\t\t\tthis.paddingLeft = padding;\n\t\t\tthis.paddingRight = padding;\n\t\t\tthis.paddingTop = padding;\n\t\t\tthis.paddingBottom = padding;\n\n\t\t\tvar req:URLRequest = new URLRequest("story.css");\n\t\t\tloader = new URLLoader();\n\t\t\tloader.addEventListener(Event.COMPLETE, onCSSFileLoaded);\n\t\t\tloader.load(req);\n\t\t}\n\n\t\tpublic function onCSSFileLoaded(event:Event):void\n\t\t{\n\t\t\tthis.sheet = new StyleSheet();\n\t\t\tthis.sheet.parseCSS(loader.data);\n\n\t\t\t// convert headline styles to ElementFormat objects\n\t\t\th1_ElFormat = getElFormat("h1", this.sheet);\n\t\t\th1_ElFormat.typographicCase = TypographicCase.UPPERCASE;\n\t\t\th2_ElFormat = getElFormat("h2", this.sheet);\n\t\t\tp_ElFormat = getElFormat("p", this.sheet);\n\t\t\tdisplayText();\n\t\t}\n\n\t\tpublic function drawBackground():void\n\t\t{\n\t\t\tvar h:Number = this.storyTxt.y + this.storyTxt.height +\n\t\t\t\t\t\t\tthis.paddingTop + this.paddingBottom;\n\t\t\tvar g:Graphics = this.graphics;\n\t\t\tg.beginFill(this.bgColor);\n\t\t\tg.drawRect(0, 0, this.width + this.paddingRight + this.paddingLeft, h);\n\t\t\tg.endFill();\n\t\t}\n\n\t\t/**\n\t\t * Reads a set of style properties for a named style and then creates\n\t\t * a TextFormat object that uses the same properties.\n\t\t */\n\t\tpublic function getElFormat(styleName:String, ss:StyleSheet):ElementFormat\n\t\t{\n\t\t\tvar style:Object = ss.getStyle(styleName);\n\t\t\tif (style != null)\n\t\t\t{\n\t\t\t\tvar colorStr:String = style.color;\n\t\t\t\tif (colorStr != null && colorStr.indexOf("#") == 0)\n\t\t\t\t{\n\t\t\t\t\tstyle.color = colorStr.substr(1);\n\t\t\t\t}\n\t\t\t\tvar fd:FontDescription = new FontDescription(\n\t\t\t\t\t\t\t\t\tstyle.fontFamily,\n\t\t\t\t\t\t\t\t\tstyle.fontWeight,\n\t\t\t\t\t\t\t\t\tFontPosture.NORMAL,\n\t\t\t\t\t\t\t\t\tFontLookup.DEVICE,\n\t\t\t\t\t\t\t\t\tRenderingMode.NORMAL,\n\t\t\t\t\t\t\t\t\tCFFHinting.NONE);\n\t\t\t\tvar format:ElementFormat = new ElementFormat(fd,\n\t\t\t\t\t\t\t\t\tstyle.fontSize,\n\t\t\t\t\t\t\t\t\tstyle.color,\n\t\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\t\tTextRotation.AUTO,\n\t\t\t\t\t\t\t\t\tTextBaseline.ROMAN,\n\t\t\t\t\t\t\t\t\tTextBaseline.USE_DOMINANT_BASELINE,\n\t\t\t\t\t\t\t\t\t0.0,\n\t\t\t\t\t\t\t\t\tKerning.ON,\n\t\t\t\t\t\t\t\t\t0.0,\n\t\t\t\t\t\t\t\t\t0.0,\n\t\t\t\t\t\t\t\t\t"en",\n\t\t\t\t\t\t\t\t\tBreakOpportunity.AUTO,\n\t\t\t\t\t\t\t\t\tDigitCase.DEFAULT,\n\t\t\t\t\t\t\t\t\tDigitWidth.DEFAULT,\n\t\t\t\t\t\t\t\t\tLigatureLevel.NONE,\n\t\t\t\t\t\t\t\t\tTypographicCase.DEFAULT);\n\n\t\t\t\tif (style.hasOwnProperty("letterSpacing"))\n\t\t\t\t{\n\t\t\t\t\tformat.trackingRight = style.letterSpacing;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn format;\n\t\t}\n\n\t\tpublic function displayText():void\n\t\t{\n\t\t\theadlineTxt = new HeadlineTextField(h1_ElFormat,headline,this.preferredWidth);\n\t\t\theadlineTxt.x = this.paddingLeft;\n\t\t\theadlineTxt.y = 40 + this.paddingTop;\n\t\t\theadlineTxt.fitText(1);\n\t\t\tthis.addChild(headlineTxt);\n\n\t\t\tsubtitleTxt = new HeadlineTextField(h2_ElFormat,subtitle,this.preferredWidth);\n\t\t\tsubtitleTxt.x = this.paddingLeft;\n\t\t\tsubtitleTxt.y = headlineTxt.y + headlineTxt.height;\n\t\t\tsubtitleTxt.fitText(2);\n\t\t\tthis.addChild(subtitleTxt);\n\n\t\t\tstoryTxt = new MultiColumnText(rawTestData, this.numColumns,\n\t\t\t\t\t\t20, this.preferredWidth, this.preferredHeight, p_ElFormat);\n\t\t\tstoryTxt.x = this.paddingLeft;\n\t\t\tstoryTxt.y = subtitleTxt.y + subtitleTxt.height + 10;\n\t\t\tthis.addChild(storyTxt);\n\n\t\t\tdrawBackground();\n\t\t}\n\t}\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"FormattedTextBlock.as is used as a base class for creating blocks of text. It\nalso includes utility functions for changing font size and case."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'package com.example.programmingas3.newslayout\n{\n\timport flash.text.engine.*;\n\timport flash.display.Sprite;\n\n\tpublic class FormattedTextBlock extends Sprite\n\t{\n\t\tpublic var tb:TextBlock;\n\t\tprivate var te:TextElement;\n\t\tprivate var ef1:ElementFormat;\n\t\tprivate var textWidth:int;\n\t\tpublic var totalTextLines:int;\n\t\tpublic var blockText:String;\n\t\tpublic var leading:Number = 1.25;\n\t\tpublic var preferredWidth:Number = 720;\n\t\tpublic var preferredHeight:Number = 100;\n\n\t\tpublic function FormattedTextBlock(ef:ElementFormat,txt:String, colW:int = 0)\n\t\t{\n\t\t\tthis.textWidth = (colW==0) ? preferredWidth : colW;\n\t\t\tblockText = txt;\n\t\t\tef1 = ef;\n\t\t\ttb = new TextBlock();\n\t\t\ttb.textJustifier = new SpaceJustifier("en",LineJustification.UNJUSTIFIED,false);\n\t\t\tte = new TextElement(blockText,this.ef1);\n\t\t\ttb.content = te;\n\t\t\tthis.breakLines();\n\t\t}\n\n\t\tprivate function breakLines()\n\t\t{\n\t\t\tvar textLine:TextLine = null;\n\t\t\tvar y:Number = 0;\n\t\t\tvar lineNum:int = 0;\n\t\t\twhile (textLine = tb.createTextLine(textLine,this.textWidth,0,true))\n\t\t\t{\n\t\t\t\ttextLine.x = 0;\n\t\t\t\ttextLine.y = y;\n\t\t\t\ty += this.leading*textLine.height;\n\t\t\t\tthis.addChild(textLine);\n\t\t\t}\n\t\t\tfor (var i:int = 0; i < this.numChildren; i++)\n\t\t\t{\n\t\t\t\tTextLine(this.getChildAt(i)).validity = TextLineValidity.STATIC;\n\t\t\t}\n\t\t\tthis.totalTextLines = this.numChildren;\n\t\t}\n\n\t\tprivate function rebreakLines()\n\t\t{\n\t\t\tthis.clearLines();\n\t\t\tthis.breakLines();\n\t\t}\n\n\t\tprivate function clearLines()\n\t\t{\n\t\t\twhile(this.numChildren)\n\t\t\t{\n\t\t\t\tthis.removeChildAt(0);\n\t\t\t}\n\t\t}\n\n\t\tpublic function changeSize(size:uint=12):void\n\t\t{\n\t\t\tif (size > 5)\n\t\t\t{\n\t\t\t\tvar ef2:ElementFormat = ef1.clone();\n\t\t\t\tef2.fontSize = size;\n\t\t\t\tte.elementFormat = ef2;\n\t\t\t\tthis.rebreakLines();\n\t\t\t}\n\t\t}\n\n\t\tpublic function changeCase(newCase:String = "default"):void\n\t\t{\n\t\t\tvar ef2:ElementFormat = ef1.clone();\n\t\t\tef2.typographicCase = newCase;\n\t\t\tte.elementFormat = ef2;\n\t\t}\n\t}\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"HeadlineTextBlock.as extends the FormattedTextBlock class and is used for\ncreating headlines. It includes a function for fitting text within a defined\nspace on the page."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"package com.example.programmingas3.newslayout\n{\n\timport flash.text.engine.*;\n\tpublic class HeadlineTextField extends FormattedTextBlock\n\t{\n\n\t\tpublic static var MIN_POINT_SIZE:uint = 6;\n\t\tpublic static var MAX_POINT_SIZE:uint = 128;\n\n\t\tpublic function HeadlineTextField(te:ElementFormat,txt:String,colW:int = 0)\n\t\t{\n\t\t\tsuper(te,txt);\n\t\t}\n\n\t\tpublic function fitText(maxLines:uint = 1, targetWidth:Number = -1):uint\n\t\t{\n\t\t\tif (targetWidth == -1)\n\t\t\t{\n\t\t\t\ttargetWidth = this.width;\n\t\t\t}\n\n\t\t\tvar pixelsPerChar:Number = targetWidth / this.blockText.length;\n\t\t\tvar pointSize:Number = Math.min(MAX_POINT_SIZE,\n\t\t\t\t\t\t\tMath.round(pixelsPerChar * 1.8 * maxLines));\n\n\t\t\tif (pointSize < 6)\n\t\t\t{\n\t\t\t\t// the point size is too small\n\t\t\t\treturn pointSize;\n\t\t\t}\n\n\t\t\tthis.changeSize(pointSize);\n\t\t\tif (this.totalTextLines > maxLines)\n\t\t\t{\n\t\t\t\treturn shrinkText(--pointSize, maxLines);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn growText(pointSize, maxLines);\n\t\t\t}\n\t\t}\n\n\t\tpublic function growText(pointSize:Number, maxLines:uint = 1):Number\n\t\t{\n\t\t\tif (pointSize >= MAX_POINT_SIZE)\n\t\t\t{\n\t\t\t\treturn pointSize;\n\t\t\t}\n\n\t\t\tthis.changeSize(pointSize + 1);\n\t\t\tif (this.totalTextLines > maxLines)\n\t\t\t{\n\t\t\t\t// set it back to the last size\n\t\t\t\tthis.changeSize(pointSize);\n\t\t\t\treturn pointSize;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn growText(pointSize + 1, maxLines);\n\t\t\t}\n\t\t}\n\n\t\tpublic function shrinkText(pointSize:Number, maxLines:uint=1):Number\n\t\t{\n\t\t\tif (pointSize <= MIN_POINT_SIZE)\n\t\t\t{\n\t\t\t\treturn pointSize;\n\t\t\t}\n\t\t\tthis.changeSize(pointSize);\n\n\t\t\tif (this.totalTextLines > maxLines)\n\t\t\t{\n\t\t\t\treturn shrinkText(pointSize - 1, maxLines);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn pointSize;\n\t\t\t}\n\t\t}\n\t}\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:"MultiColumnText.as handles formatting text within a multicolumn design. It\ndemonstrates the flexible use a TextBlock object as a factory for creating,\nformatting, and placing text lines."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'package com.example.programmingas3.newslayout\n{\n\timport flash.display.Sprite;\n\timport flash.text.engine.*;\n\n\tpublic class MultiColumnText extends Sprite\n\t{\n\t\tprivate var tb:TextBlock;\n\t\tprivate var te:TextElement;\n\t\tprivate var numColumns:uint = 2;\n\t\tprivate var gutter:uint = 10;\n\t\tprivate var leading:Number = 1.25;\n\t\tprivate var preferredWidth:Number = 400;\n\t\tprivate var preferredHeight:Number = 100;\n\t\tprivate var colWidth:int = 200;\n\n\t\tpublic function MultiColumnText(txt:String = "",cols:uint = 2,\n\t\t\tgutter:uint = 10, w:Number = 400, h:Number = 100,\n\t\t\tef:ElementFormat = null):void\n\t\t{\n\t\t\tthis.numColumns = Math.max(1, cols);\n\t\t\tthis.gutter = Math.max(1, gutter);\n\n\t\t\tthis.preferredWidth = w;\n\t\t\tthis.preferredHeight = h;\n\n\t\t\tthis.setColumnWidth();\n\n\t\t\tvar field:FormattedTextBlock = new FormattedTextBlock(ef,txt,this.colWidth);\n\t\t\tvar totLines:int = field.totalTextLines;\n\t\t\tfield = null;\n\t\t\tvar linesPerCol:int = Math.ceil(totLines/cols);\n\n\t\t\ttb = new TextBlock();\n\t\t\tte = new TextElement(txt,ef);\n\t\t\ttb.content = te;\n\t\t\tvar textLine:TextLine = null;\n\t\t\tvar x:Number = 0;\n\t\t\tvar y:Number = 0;\n\t\t\tvar i:int = 0;\n\t\t\tvar j:int = 0;\n\t\t\twhile (textLine = tb.createTextLine(textLine,this.colWidth,0,true))\n\t\t\t{\n\t\t\t\ttextLine.x = Math.floor(i/(linesPerCol+1))*(this.colWidth+this.gutter);\n\t\t\t\ttextLine.y = y;\n\t\t\t\ty += this.leading*textLine.height;\n\t\t\t\tj++;\n\t\t\t\tif(j>linesPerCol)\n\t\t\t\t{\n\t\t\t\t\ty = 0;\n\t\t\t\t\tj = 0;\n\t\t\t\t}\n\t\t\t\ti++;\n\n\t\t\t\tthis.addChild(textLine);\n\t\t\t}\n\t\t}\n\n\t\tprivate function setColumnWidth():void\n\t\t{\n\t\t\tthis.colWidth = Math.floor( (this.preferredWidth -\n\t\t\t\t((this.numColumns - 1) * this.gutter)) / this.numColumns);\n\t\t}\n\n\t}\n}\n'})})]})}function u(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,a.jsx)(e,{...t,children:(0,a.jsx)(d,{...t})}):d(t)}}}]);