<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-docs docs-doc-id-development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Understanding the protected content workflow | AIR SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://airsdk.dev/docs/development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs-current"><meta data-rh="true" property="og:title" content="Understanding the protected content workflow | AIR SDK"><meta data-rh="true" name="description" content="_Important_ : Flash Player 11.5 and above integrates the Adobe Access"><meta data-rh="true" property="og:description" content="_Important_ : Flash Player 11.5 and above integrates the Adobe Access"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://airsdk.dev/docs/development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow"><link data-rh="true" rel="alternate" href="https://airsdk.dev/docs/development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow" hreflang="en"><link data-rh="true" rel="alternate" href="https://airsdk.dev/docs/development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="AIR SDK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="AIR SDK Atom Feed">
<link rel="alternate" type="application/json" href="/news/feed.json" title="AIR SDK JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PBLKC63BP2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-PBLKC63BP2",{})</script>




<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;family=Noto+Sans+JP&amp;family=Open+Sans&amp;family=Roboto&amp;family=Lato&amp;display=swap"><link rel="stylesheet" href="/assets/css/styles.dee7c64e.css">
<link rel="preload" href="/assets/js/runtime~main.c0043b56.js" as="script">
<link rel="preload" href="/assets/js/main.8c1cd57f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#8BE8CB;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">This site is under construction. We need your <a target="_blank" rel="noopener noreferrer" href="https://github.com/airsdk/airsdk.dev/blob/main/CONTRIBUTING.md">contributions</a> to fill out the documentation.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="AIR SDK" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/logo.svg" alt="AIR SDK" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AIR SDK</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/reference">Reference</a><a class="navbar__item navbar__link" href="/showcase">Showcase</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/news">News</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/airsdk/airsdk.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">AIR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/features">Features</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/basics/getting-started">Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/core-actionscript-classes">Core ActionScript Classes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core ActionScript Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display">Display</a><button aria-label="Toggle the collapsible sidebar category &#x27;Display&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/text">Text</a><button aria-label="Toggle the collapsible sidebar category &#x27;Text&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/development/rich-media-content">Rich Media Content</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rich Media Content&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/rich-media-content/working-with-sound">Working with sound</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with sound&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/rich-media-content/working-with-video">Working with video</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with video&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/working-with-cameras">Working with cameras</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management">Using digital rights management</a><button aria-label="Toggle the collapsible sidebar category &#x27;Using digital rights management&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow">Understanding the protected content workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/drm-related-members-and-events-of-the-netstream-class">DRM-related members and events of the NetStream class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/using-the-drmstatusevent-class">Using the DRMStatusEvent class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/using-the-drmauthenticateevent-class">Using the DRMAuthenticateEvent class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/using-the-drmerrorevent-class">Using the DRMErrorEvent class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/using-the-drmmanager-class">Using the DRMManager class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/using-the-drmcontentdata-class">Using the DRMContentData class</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/updating-flash-player-to-support-adobe-access">Updating Flash Player to support Adobe Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/out-of-band-licenses">Out-of-band Licenses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/domain-support">Domain support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/playing-encryped-content-using-domain-support">Playing encrypted content using domain support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/license-preview">License preview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/delivering-content">Delivering content</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/open-source-media-framework">Open Source Media Framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/device-registration">Device registration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/factory-reset">Factory reset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/using-digital-rights-management/workflow-for-playing-protected-content">Workflow for playing protected content</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/rich-media-content/adding-pdf-content-in-air">Adding PDF content in AIR</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/user-interaction">User Interaction</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Interaction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/files-and-data">Files and data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Files and data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/networking-and-communication">Networking and communication</a><button aria-label="Toggle the collapsible sidebar category &#x27;Networking and communication&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/client-system-interaction">Client system interaction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Client system interaction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/internationalizing-applications">Internationalizing applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Internationalizing applications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/html-content-in-air">HTML content in Adobe AIR</a><button aria-label="Toggle the collapsible sidebar category &#x27;HTML content in Adobe AIR&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/security">Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/appendixes">Appendixes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Appendixes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/asdoc-comments">ASDoc Comments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/coding-conventions">Coding Conventions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/building/actionscript-compilers">Building</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools/building/ant">Tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/development"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/development/rich-media-content"><span itemprop="name">Rich Media Content</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/development/rich-media-content/using-digital-rights-management"><span itemprop="name">Using digital rights management</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Understanding the protected content workflow</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Understanding the protected content workflow</h1><p><strong><em>Important</em></strong> : Flash Player 11.5 and above integrates the Adobe Access
module, so the update step (calling
<code>SystemUpdater.update(SystemUpdaterType.DRM)</code>) is unnecessary. This includes the
following browsers and platforms:</p><ul><li><p>Flash Player 11.5 ActiveX control, for all platforms except Internet Explorer
on Windows 8 on Intel processors</p></li><li><p>Flash Player 11.5 plugin, for all browsers</p></li><li><p>Adobe AIR (desktop and mobile)</p></li></ul><p>This means that the update step is <em>still required</em> in the following cases:</p><ul><li><p>Internet Explorer on Windows 8 on Intel processors</p></li><li><p>Flash Player 11.4 and below, except on Google Chrome 22 and above (all
platforms) or 21 and above (Windows)</p></li></ul><p>Note: You can still safely call <code>SystemUpdater.update(SystemUpdaterType.DRM)</code> on
a system with Flash Player 11.5 or higher, but nothing is downloaded.</p><p>The following high-level workflow shows that how an application can retrieve and
play protected content. The workflow assumes that the application is designed
specifically to play content protected by Adobe Access:</p><ol><li><p>Get the content metadata.</p></li><li><p>Handle updates to Flash Player, if needed.</p></li><li><p>Check if a license is available locally. If so, load it and go to step 7. If
not, go to step 4.</p></li><li><p>Check if authentication is required. If not, you can go to step 7.</p></li><li><p>If authentication is required, get the authentication credentials from the
user and pass them to the license server.</p></li><li><p>If domain registration is required, join the domain (AIR 3.0 and higher).</p></li><li><p>Once authentication succeeds, download the license from the server.</p></li><li><p>Play the content.</p></li></ol><p>If an error has not occurred and the user was successfully authorized to view
the content, the NetStream object dispatches a DRMStatusEvent object. The
application then begins playback. The DRMStatusEvent object holds the related
voucher information, which identifies the user&#x27;s policy and permissions. For
example, it holds information regarding whether the content can be made
available offline or when the license expires. The application can use this data
to inform the user of the status of their policy. For example, the application
can display the number of remaining days the user has for viewing the content in
a status bar.</p><p>If the user is allowed offline access, the voucher is cached, and the encrypted
content is downloaded to the user&#x27;s machine. The content is made accessible for
the duration defined in the license caching duration. The <code>detail</code> property in
the event contains <code>&quot;DRM.voucherObtained&quot;</code>. The application decides where to
store the content locally in order for it to be available offline. You can also
preload vouchers using the DRMManager class.</p><p>Note: Caching and pre-loading of vouchers is supported in both AIR and Flash
Player. However, downloading and storing encrypted content is supported only in
AIR.</p><p>It is the application&#x27;s responsibility to explicitly handle the error events.
These events include cases where the user inputs valid credentials, but the
voucher protecting the encrypted content restricts the access to the content.
For example, an authenticated user cannot access content if the rights have not
been paid for. This case can also occur when two registered members of the same
publisher attempt to share content that only one of them has paid for. The
application must inform the user of the error and provide an alternative
suggestion. A typical alternative suggestion is instructions in how to register
and pay for viewing rights.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-api-workflow">Detailed API workflow<a href="#detailed-api-workflow" class="hash-link" aria-label="Direct link to Detailed API workflow" title="Direct link to Detailed API workflow">​</a></h2><p>This workflow provides a more detailed view of the protected-content workflow.
This workflow describes the specific APIs used to play content protected by
Adobe Access.</p><ol><li><p>Using a URLLoader object, load the bytes of the protected content&#x27;s metadata
file. Set this object to a variable, such as <code>metadata_bytes</code>.</p><p>All content controlled by Adobe Access has Adobe Access metadata. When the
content is packaged, this metadata can be saved as a separate metadata file
(.metadata) alongside the content. For more information, see the Adobe
Access documentation.</p></li><li><p>Create a DRMContentData instance. Put this code into a try-catch block:</p><p><code>new DRMContentData( </code><em><code>metadata_bytes</code></em><code> )</code></p><p>where <em><code>metadata_bytes</code></em> is the URLLoader object obtained in step 1.</p></li><li><p>(Flash Player only) The runtime checks for the Adobe Access module. If not
found, an IllegalOperationError with DRMErrorEvent error code 3344 or
DRMErrorEvent error code 3343 is thrown.</p><p>To handle this error, download the Adobe Access module using the
SystemUpdater API. After this module is downloaded, the SystemUpdater object
dispatches a COMPLETE event. Include an event listener for this event that
returns to step 2 when this event is dispatched. The following code
demonstrates these steps:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">flash.system.SystemUpdater.addEventListener(Event.COMPLETE, updateCompleteHandler);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">flash.system.SystemUpdater.update(flash.system.SystemUpdaterType.DRM)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">private function updateCompleteHandler (event:Event):void {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    /*redo step 2*/</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    drmContentData = new DRMContentData(metadata_bytes);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the player itself must be updated, a status event is dispatched. For more
information on handling this event, see
<a href="/docs/development/rich-media-content/using-digital-rights-management/updating-flash-player-to-support-adobe-access#listening-for-an-update-event">Listening for an update event</a>.</p><p>Note: In AIR applications, the AIR installer handles updating the Adobe
Access module and required runtime updates.</p></li><li><p>Create listeners to listen for the DRMStatusEvent and DRMErrorEvent
dispatched from the DRMManager object:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DRMManager.addEventListener(DRMStatusEvent.DRM_STATUS, onDRMStatus);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DRMManager.addEventListener(DRMErrorEvent.DRM_ERROR, onDRMError);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the DRMStatusEvent listener, check that the voucher is valid (not null).
In the DRMErrorEvent listener, handle DRMErrorEvents. See
<a href="/docs/development/rich-media-content/using-digital-rights-management/using-the-drmstatusevent-class">Using the DRMStatusEvent class</a> and
<a href="/docs/development/rich-media-content/using-digital-rights-management/using-the-drmerrorevent-class">Using the DRMErrorEvent class</a>.</p></li><li><p>Load the voucher (license) that is required to play the content.</p><p>First, try to load a locally stored license to play the content:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DRMManager.loadvoucher(drmContentData, LoadVoucherSetting.LOCAL_ONLY)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After loading completes, the DRMManager object dispatches
<code>DRMStatusEvent.DRM_Status</code>.</p></li><li><p>If the DRMVoucher object is not null, the voucher is valid. Skip to step 13.</p></li><li><p>If the DRMVoucher object is null, check the authentication method required
by the policy for this content. Use the
<code>DRMContentData.authenticationMethod</code> property.</p></li><li><p>If the authentication method is <code>ANONYMOUS</code>, go to step 13.</p></li><li><p>If the authentication method is <code>USERNAME_AND_PASSWORD</code>, your application
must provide a mechanism to let the user enter credentials. Pass these
credentials to the license server to authenticate the user:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DRMManager.authenticate(metadata.serverURL, metadata.domain, username, password)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The DRMManager dispatches a <code>DRMAuthenticationErrorEvent</code> if authentication
fails or a <code>DRMAuthenticationCompleteEvent</code> if authentication succeeds.
Create listeners for these events.</p></li><li><p>If the authentication method is <code>UNKNOWN</code>, a custom authentication method
must be used. In this case, the content provider has arranged for
authentication to be done in an out-of-band manner by not using the
ActionScript 3.0 APIs. The custom authentication procedure must produce an
authentication token that can be passed to the
<code>DRMManager.setAuthenticationToken()</code> method.</p></li><li><p>If authentication fails, your application must return to step 9. Ensure that
your application has a mechanism to handle and limit repeated authentication
failures. For example, after three attempts, you display a message to the
user indicating the authentication has failed and content cannot be played.</p></li><li><p>To use the stored token instead of prompting the user to enter credentials,
set the token with <code>DRMManager.setAuthenticationToken()</code> method. You then
download the license from the license server and play content as in step 8.</p></li><li><p>(optional) If authentication succeeds, you can capture the authentication
token, which is a byte array cached in memory. Get this token with the
<code>DRMAuthenticationCompleteEvent.token</code> property. You can store and use the
authentication token so that the user does not have to repeatedly enter
credentials for this content. The license server determines the valid period
of the authentication token.</p></li><li><p>If authentication succeeds, download the license from the license server:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DRMManager.loadvoucher(drmContentData, LoadVoucherSetting.FORCE_REFRESH)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After loading completes, the DRMManager object dispatches
DRMStatusEvent.DRM_STATUS. Listen for this event, and when it is dispatched,
you can play the content.</p></li><li><p>Play the video by creating a NetStream object and then calling its <code>play()</code>
method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">stream = new NetStream(connection);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">stream.addEventListener(DRMStatusEvent.DRM _STATUS, drmStatusHandler);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">stream.addEventListener(DRMErrorEvent.DRM_ERROR, drmErrorHandler);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">stream.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">stream.client = new CustomClient();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">video.attachNetStream(stream);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">stream.play(videoURL);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="drmcontentdata-and-session-objects">DRMContentData and session objects<a href="#drmcontentdata-and-session-objects" class="hash-link" aria-label="Direct link to DRMContentData and session objects" title="Direct link to DRMContentData and session objects">​</a></h2><p>When <code>DRMContentData</code> is created, it will be used as a session object that
refers to the Flash Player DRM module. All the <code>DRMManager</code> APIs that receives
this <code>DRMContentData</code> will use that particular DRM module. However, there are 2
<code>DRMManager</code> APIs that does not use <code>DRMContentData</code>. They are:</p><ol><li><p><code>authenticate()</code></p></li><li><p><code>setAuthenticationToken()</code></p></li></ol><p>Since there is no <code>DRMContentData</code> associated, invoking these <code>DRMManager</code> APIs
will use the latest DRM module from the disk. This may become a problem if an
update of the DRM module happens in the middle of the application&#x27;s DRM
workflow. Consider the following scenario:</p><ol><li><p>The application creates a <code>DRMContentData</code> object <code>contentData1</code>, which uses
<em>AdobeCP1</em> as the DRM module.</p></li><li><p>The application invokes the
<code>DRMManager.authenticate(contentData1.serverURL,...)</code> method.</p></li><li><p>The application invokes the <code>DRMManager.loadVoucher(contentData1, ...)</code>
method.</p></li></ol><p>If an update happens for the DRM module before the application can get to step
2, then the <code>DRMManager.authenticate()</code> method will end up authenticating using
<em>AdobeCP2</em> as the DRM module. The <code>loadVoucher()</code> method in step 3 will fail
since it is still using <em>AdobeCP1</em> as the DRM module. The update may have
happened due to another application invoking the DRM module update.You can avoid
this scenario by invoking the DRM module update on application startup.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="drm-related-events">DRM-related events<a href="#drm-related-events" class="hash-link" aria-label="Direct link to DRM-related events" title="Direct link to DRM-related events">​</a></h2><p>The runtime dispatches numerous events when an application attempts to play
protected content:</p><ul><li><p>DRMDeviceGroupErrorEvent (AIR only), dispatched by DRMManager</p></li><li><p>DRMAuthenticateEvent (AIR only), dispatched by NetStream</p></li><li><p>DRMAuthenticationCompleteEvent, dispatched by DRMManager</p></li><li><p>DRMAuthenticationErrorEvent, dispatched by DRMManager</p></li><li><p>DRMErrorEvent, dispatched by NetStream and DRMManager</p></li><li><p>DRMStatusEvent, dispatched by NetStream and DRMManager</p></li><li><p>StatusEvent</p></li><li><p>NetStatusEvent. See
<a href="/docs/development/rich-media-content/using-digital-rights-management/updating-flash-player-to-support-adobe-access#listening-for-an-update-event">Listening for an update event</a></p></li></ul><p>To support content protected by Adobe Access, add event listeners for handling
the DRM events.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-loading-vouchers-for-offline-playback">Pre-loading vouchers for offline playback<a href="#pre-loading-vouchers-for-offline-playback" class="hash-link" aria-label="Direct link to Pre-loading vouchers for offline playback" title="Direct link to Pre-loading vouchers for offline playback">​</a></h2><p>You can preload the vouchers (licenses) required to play content protected by
Adobe Access. Pre-loaded vouchers allow users to view the content whether they
have an active Internet connection. (The preload process itself requires an
Internet connection.) You can use the NetStream class
<code>preloadEmbeddedMetadata()</code> method and the DRMManager class to preload vouchers.
In AIR 2.0 and later, you can use a DRMContentData object to preload vouchers
directly. This technique is preferable because it lets you update the
DRMContentData object independent of the content. (The <code>preloadEmbeddedData()</code>
method fetches DRMContentData from the content.)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-drmcontentdata">Using DRMContentData<a href="#using-drmcontentdata" class="hash-link" aria-label="Direct link to Using DRMContentData" title="Direct link to Using DRMContentData">​</a></h3><p>The following steps describe the workflow for pre-loading the voucher for a
protected media file using a DRMContentData object.</p><ol><li><p>Get the binary metadata for the packaged content. If using the Adobe Access
Java Reference Packager, this metadata file is automatically generated with
a <em>.metadata</em> extension. You could, for example, download this metadata
using the URLLoader class.</p></li><li><p>Create a DRMContentData object, passing the metadata to the constructor
function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var drmData:DRMContentData = new DRMContentData( metadata );</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>The rest of the steps are identical to the workflow described in
<a href="#understanding-the-protected-content-workflow">Understanding the protected content workflow</a>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-preloadembeddedmetadata">Using preloadEmbeddedMetadata()<a href="#using-preloadembeddedmetadata" class="hash-link" aria-label="Direct link to Using preloadEmbeddedMetadata()" title="Direct link to Using preloadEmbeddedMetadata()">​</a></h3><p>The following steps describe the workflow for pre-loading the voucher for a
DRM-protected media file using <code>preloadEmbeddedMetadata()</code>:</p><ol><li><p>Download and store the media file. (DRM metadata can only be pre-loaded from
locally stored files.)</p></li><li><p>Create the NetConnection and NetStream objects, supplying implementations
for the <code>onDRMContentData()</code> and <code>onPlayStatus()</code> callback functions of the
NetStream client object.</p></li><li><p>Create a NetStreamPlayOptions object and set the <code>stream</code> property to the
URL of the local media file.</p></li><li><p>Call the NetStream <code>preloadEmbeddedMetadata()</code>, passing in the
NetStreamPlayOptions object identifying the media file to parse.</p></li><li><p>If the media file contains DRM metadata, then the <code>onDRMContentData()</code>
callback function is invoked. The metadata is passed to this function as a
DRMContentData object.</p></li><li><p>Use the DRMContentData object to obtain the voucher using the DRMManager
<code>loadVoucher()</code> method.</p><p>If the value of the <code>authenticationMethod</code> property of the <code>DRMContentData</code>
object is <code>flash.net.drm.AuthenticationMethod.USERNAME_AND_PASSWORD</code>,
authenticate the user on the media rights server before loading the voucher.
The <code>serverURL</code> and <code>domain</code> properties of the DRMContentData object can be
passed to the DRMManager <code>authenticate()</code> method, along with the user&#x27;s
credentials.</p></li><li><p>The <code>onPlayStatus()</code> callback function is invoked when file parsing is
complete. If the <code>onDRMContentData()</code> function has not been called, the file
does not contain the metadata required to obtain a voucher. This missing
call also possibly means that Adobe Access does not protect this file.</p></li></ol><p>The following code example for AIR illustrates how to preload a voucher for a
local media file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">package</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.display.Sprite;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.events.DRMAuthenticationCompleteEvent;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.events.DRMAuthenticationErrorEvent;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.events.DRMErrorEvent;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.ev ents.DRMStatusEvent;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.events.NetStatusEvent;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.net.NetConnection;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.net.NetStream;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.net.NetStreamPlayOptions;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.net.drm.AuthenticationMethod;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.net.drm.DRMContentData;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.net.drm.DRMManager;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    import flash.net.drm.LoadVoucherSetting;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    public class DRMPreloader extends Sprite</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private var videoURL:String = &quot;app-storage:/video.flv&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private var userName:String = &quot;user&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private var password:String = &quot;password&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private var preloadConnection:NetConnection;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private var preloadStream:NetStream;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private var drmManager:DRMManager = DRMManager.getDRMManager();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private var drmContentData:DRMContentData;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        public function DRMPreloader():void {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            drmManager.addEventListener(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                DRMAuthenticationCompleteEvent.AUTHENTICATION_COMPLETE,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                onAuthenticationComplete);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            drmManager.addEventListener(DRMAuthenticationErrorEvent.AUTHENTICATION_ERROR,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                onAuthenticationError);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            drmManager.addEventListener(DRMStatusEvent.DRM_STATUS, onDRMStatus);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            drmManager.addEventListener(DRMErrorEvent.DRM_ERROR, onDRMError);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadConnection = new NetConnection();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadConnection.addEventListener(NetStatusEvent.NET_STATUS, onConnect);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadConnection.connect(null);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function onConnect( event:NetStatusEvent ):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadMetadata();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function preloadMetadata():void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadStream = new NetStream( preloadConnection );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadStream.client = this;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            var options:NetStreamPlayOptions = new NetStreamPlayOptions();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            options.streamName = videoURL;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadStream.preloadEmbeddedData( options );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        public function onDRMContentData( drmMetadata:DRMContentData ):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            drmContentData = drmMetadata;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            if ( drmMetadata.authenticationMethod == AuthenticationMethod.USERNAME_AND_PASSWORD )</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                authenticateUser();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            else</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                getVoucher();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function getVoucher():void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            drmManager.loadVoucher( drmContentData, LoadVoucherSetting.ALLOW_SERVER );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function authenticateUser():void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            drmManager.authenticate( drmContentData.serverURL, drmContentData.domain, userName, password );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function onAuthenticationError( event:DRMAuthenticationErrorEvent ):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            trace( &quot;Authentication error: &quot; + event.errorID + &quot;, &quot; + event.subErrorID );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function onAuthenticationComplete( event:DRMAuthenticationCompleteEvent ):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            trace( &quot;Authenticated to: &quot; + event.serverURL + &quot;, domain: &quot; + event.domain );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            getVoucher();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function onDRMStatus( event:DRMStatusEvent ):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            trace( &quot;DRM Status: &quot; + event.detail);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            trace(&quot;--Voucher allows offline playback = &quot; + event.isAvailableOffline );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            trace(&quot;--Voucher already cached          = &quot; + event.isLocal );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            trace(&quot;--Voucher required authentication = &quot; + !event.isAnonymous );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        private function onDRMError( event:DRMErrorEvent ):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            trace( &quot;DRM error event: &quot; + event.errorID + &quot;, &quot; + event.subErrorID + &quot;, &quot; + event.text );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        public function onPlayStatus( info:Object ):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            preloadStream.close();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/airsdk/airsdk.dev/edit/main/docs/development/rich-media-content/using-digital-rights-management/understanding-the-protected-content-workflow.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/development/rich-media-content/using-digital-rights-management"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using digital rights management</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/development/rich-media-content/using-digital-rights-management/drm-related-members-and-events-of-the-netstream-class"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DRM-related members and events of the NetStream class</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#detailed-api-workflow" class="table-of-contents__link toc-highlight">Detailed API workflow</a></li><li><a href="#drmcontentdata-and-session-objects" class="table-of-contents__link toc-highlight">DRMContentData and session objects</a></li><li><a href="#drm-related-events" class="table-of-contents__link toc-highlight">DRM-related events</a></li><li><a href="#pre-loading-vouchers-for-offline-playback" class="table-of-contents__link toc-highlight">Pre-loading vouchers for offline playback</a><ul><li><a href="#using-drmcontentdata" class="table-of-contents__link toc-highlight">Using DRMContentData</a></li><li><a href="#using-preloadembeddedmetadata" class="table-of-contents__link toc-highlight">Using preloadEmbeddedMetadata()</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/features">Features</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/basics/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community">Community</a></li><li class="footer__item"><a class="footer__link-item" href="/showcase">Showcase</a></li><li class="footer__item"><a href="https://github.com/airsdk/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Starling Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/actionscript-3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/news">News</a></li><li class="footer__item"><a href="https://github.com/airsdk/airsdk.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/"><img src="/images/logo.svg" alt="AIR" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/images/logo.svg" alt="AIR" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Except as otherwise noted, this work is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution 3.0</a> License, and code samples are licensed under the MIT License. <br>Adobe, the Adobe logo, Adobe AIR, ActionScript, AIR, Flash, Flash Builder, Flash Lite, Flex, MXML, and Pixel Bender are either registered trademarks or trademarks of Adobe Systems Incorporated in the United States and/or other countries.<br>Much of this content is based on the original <a href="https://help.adobe.com/en_US/air/build/index.html">Adobe developer documentation</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.c0043b56.js"></script>
<script src="/assets/js/main.8c1cd57f.js"></script>
</body>
</html>