<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-docs docs-doc-id-development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Bitmap example: Animated spinning moon | AIR SDK</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://airsdk.dev/docs/development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs-current"><meta data-rh="true" property="og:title" content="Bitmap example: Animated spinning moon | AIR SDK"><meta data-rh="true" name="description" content="The Animated spinning moon example demonstrates techniques for working with"><meta data-rh="true" property="og:description" content="The Animated spinning moon example demonstrates techniques for working with"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://airsdk.dev/docs/development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon"><link data-rh="true" rel="alternate" href="https://airsdk.dev/docs/development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon" hreflang="en"><link data-rh="true" rel="alternate" href="https://airsdk.dev/docs/development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="AIR SDK RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="AIR SDK Atom Feed">
<link rel="alternate" type="application/json" href="/news/feed.json" title="AIR SDK JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PBLKC63BP2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-PBLKC63BP2",{})</script>




<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;family=Noto+Sans+JP&amp;family=Open+Sans&amp;family=Roboto&amp;family=Lato&amp;display=swap"><link rel="stylesheet" href="/assets/css/styles.dee7c64e.css">
<link rel="preload" href="/assets/js/runtime~main.8ca38e49.js" as="script">
<link rel="preload" href="/assets/js/main.c6d97874.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#8BE8CB;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">This site is under construction. We need your <a target="_blank" rel="noopener noreferrer" href="https://github.com/airsdk/airsdk.dev/blob/main/CONTRIBUTING.md">contributions</a> to fill out the documentation.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="AIR SDK" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/logo.svg" alt="AIR SDK" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AIR SDK</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/reference">Reference</a><a class="navbar__item navbar__link" href="/showcase">Showcase</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/news">News</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/airsdk/airsdk.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">AIR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/features">Features</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/basics/getting-started">Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/core-actionscript-classes">Core ActionScript Classes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Core ActionScript Classes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/development/display">Display</a><button aria-label="Toggle the collapsible sidebar category &#x27;Display&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/display-programming">Display programming</a><button aria-label="Toggle the collapsible sidebar category &#x27;Display programming&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/working-with-geometry">Working with geometry</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with geometry&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/using-the-drawing-api">Using the drawing API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Using the drawing API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/development/display/working-with-bitmaps">Working with bitmaps</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with bitmaps&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/asynchronous-decoding-of-bitmap-images">Asynchronous decoding of bitmap images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/basics-of-working-with-bitmaps">Basics of working with bitmaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon">Bitmap example: Animated spinning moon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/compressing-bitmap-data">Compressing bitmap data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/copying-bitmap-data">Copying bitmap data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/making-textures-with-noise-functions">Making textures with noise functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/manipulating-pixels">Manipulating pixels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/scrolling-bitmaps">Scrolling bitmaps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/taking-advantage-of-mipmapping">Taking advantage of mipmapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-bitmaps/the-bitmap-and-bitmap-data-classes">The Bitmap and BitmapData classes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/filtering-display-objects">Filtering display objects</a><button aria-label="Toggle the collapsible sidebar category &#x27;Filtering display objects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/working-with-pixel-bender-shaders">Working with Pixel Bender shaders</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with Pixel Bender shaders&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/working-with-movie-clips">Working with movie clips</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with movie clips&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/working-with-motion-tweens">Working with motion tweens</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working with motion tweens&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/display/working-with-inverse-kinematics">Working with inverse kinematics</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/display/working-in-three-dimensions">Working in three dimensions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Working in three dimensions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/text">Text</a><button aria-label="Toggle the collapsible sidebar category &#x27;Text&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/rich-media-content">Rich Media Content</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rich Media Content&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/user-interaction">User Interaction</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Interaction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/files-and-data">Files and data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Files and data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/networking-and-communication">Networking and communication</a><button aria-label="Toggle the collapsible sidebar category &#x27;Networking and communication&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/client-system-interaction">Client system interaction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Client system interaction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/internationalizing-applications">Internationalizing applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Internationalizing applications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/html-content-in-air">HTML content in Adobe AIR</a><button aria-label="Toggle the collapsible sidebar category &#x27;HTML content in Adobe AIR&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/security">Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/development/appendixes">Appendixes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Appendixes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/asdoc-comments">ASDoc Comments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/coding-conventions">Coding Conventions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/building/actionscript-compilers">Building</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools/building/ant">Tools</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/development"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/development/display"><span itemprop="name">Display</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/development/display/working-with-bitmaps"><span itemprop="name">Working with bitmaps</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Bitmap example: Animated spinning moon</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Bitmap example: Animated spinning moon</h1><p>The Animated spinning moon example demonstrates techniques for working with
Bitmap objects and bitmap image data (BitmapData objects). The example creates
an animation of a spinning, spherical moon using a flat image of the moon&#x27;s
surface as the raw image data. The following techniques are demonstrated:</p><ul><li><p>Loading an external image and accessing its raw image data</p></li><li><p>Creating animation by repeatedly copying pixels from different parts of a
source image</p></li><li><p>Creating a bitmap image by setting pixel values</p></li></ul><p>To get the application files for this sample, see
<a href="https://github.com/joshtynjala/flash-platform-as3-dev-guide-examples/releases/tag/original" target="_blank" rel="noopener noreferrer"><em>FlashPlatformAS3DevGuideExamples.zip</em></a>.
The Animated spinning moon application files can be found in the
Samples/SpinningMoon folder. The application consists of the following files:</p><table><thead><tr><th><p>File</p></th><th><p>Description</p></th></tr></thead><tbody><tr><td><p>SpinningMoon.mxml</p><p>or</p><p>SpinningMoon.fla</p></td><td><p>The main application file in Flex (MXML) or Flash (FLA).</p></td></tr><tr><td><p>com/example/programmingas3/moon/MoonSphere.as</p></td><td><p>Class that performs the functionality of loading, displaying, and animating the moon.</p></td></tr><tr><td><p>moonMap.png</p></td><td><p>Image file containing a photograph of the moon&#x27;s surface, which is loaded and used to create the animated, spinning moon.</p></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="loading-an-external-image-as-bitmap-data">Loading an external image as bitmap data<a href="#loading-an-external-image-as-bitmap-data" class="hash-link" aria-label="Direct link to Loading an external image as bitmap data" title="Direct link to Loading an external image as bitmap data">​</a></h2><p>The first main task this sample performs is loading an external image file,
which is a photograph of the moon&#x27;s surface. The loading operation is handled by
two methods in the MoonSphere class: the <code>MoonSphere()</code> constructor, where the
loading process is initiated, and the <code>imageLoadComplete()</code> method, which is
called when the external image is completely loaded.</p><p>Loading an external image is similar to loading an external SWF; both use an
instance of the flash.display.Loader class to perform the loading operation. The
actual code in the <code>MoonSphere()</code> method that starts loading the image is as
follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var imageLoader:Loader = new Loader();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, imageLoadComplete);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">imageLoader.load(new URLRequest(&quot;moonMap.png&quot;));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first line declares the Loader instance named <code>imageLoader</code>. The third line
actually starts the loading process by calling the Loader object&#x27;s <code>load()</code>
method, passing a URLRequest instance representing the URL of the image to load.
The second line sets up the event listener that will be triggered when the image
has completely loaded. Notice that the <code>addEventListener()</code> method is not called
on the Loader instance itself; instead, it&#x27;s called on the Loader object&#x27;s
<code>contentLoaderInfo</code> property. The Loader instance itself doesn&#x27;t dispatch events
relating to the content being loaded. Its <code>contentLoaderInfo</code> property, however,
contains a reference to the LoaderInfo object that&#x27;s associated with the content
being loaded into the Loader object (the external image in this case). That
LoaderInfo object does provide several events relating to the progress and
completion of loading the external content, including the <code>complete</code> event
(<code>Event.COMPLETE</code>) that will trigger a call to the <code>imageLoadComplete()</code> method
when the image has completely loaded.</p><p>While starting the external image loading is an important part of the process,
it&#x27;s equally important to know what to do when it finishes loading. As shown in
the code above, the <code>imageLoadComplete()</code> function is called when the image is
loaded. That function does several things with the loaded image data, described
subsequently. However, to use the image data, it needs to access that data. When
a Loader object is used to load an external image, the loaded image becomes a
Bitmap instance, which is attached as a child display object of the Loader
object. In this case, the Loader instance is available to the event listener
method as part of the event object that&#x27;s passed to the method as a parameter.
The first lines of the <code>imageLoadComplete()</code> method are as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">private function imageLoadComplete(event:Event):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    textureMap = event.target.content.bitmapData;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that the event object parameter is named <code>event</code>, and it&#x27;s an instance of
the Event class. Every instance of the Event class has a <code>target</code> property,
which refers to the object triggering the event (in this case, the LoaderInfo
instance on which the <code>addEventListener()</code> method was called, as described
previously). The LoaderInfo object, in turn, has a <code>content</code> property that (once
the loading process is complete) contains the Bitmap instance with the loaded
bitmap image. If you want to display the image directly on the screen, you can
attach this Bitmap instance (<code>event.target.content</code>) to a display object
container. (You could also attach the Loader object to a display object
container). However, in this sample, the loaded content is used as a source of
raw image data rather than being displayed on the screen. Consequently, the
first line of the <code>imageLoadComplete()</code> method reads the <code>bitmapData</code> property
of the loaded Bitmap instance (<code>event.target.content.bitmapData</code>) and stores it
in the instance variable named <code>textureMap</code>, which is used as a source of the
image data to create the animation of the rotating moon. This is described next.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-animation-by-copying-pixels">Creating animation by copying pixels<a href="#creating-animation-by-copying-pixels" class="hash-link" aria-label="Direct link to Creating animation by copying pixels" title="Direct link to Creating animation by copying pixels">​</a></h2><p>A basic definition of animation is the illusion of motion, or change, created by
changing an image over time. In this sample, the goal is to create the illusion
of a spherical moon rotating around its vertical axis. However, for the purposes
of the animation, you can ignore the spherical distortion aspect of the sample.
Consider the actual image that&#x27;s loaded and used as the source of the moon image
data:</p><p><img loading="lazy" src="/assets/images/bt_moon_example_map_1_popup-9494b1bccf37ad7a9818bffe542813ad.png" width="790" height="198" class="img_ev3q"></p><p>As you can see, the image is not one or several spheres; it&#x27;s a rectangular
photograph of the surface of the moon. Because the photo was taken exactly at
the moon&#x27;s equator, the parts of the image that are closer to the top and bottom
of the image are stretched and distorted. To remove the distortion from the
image and make it appear spherical, we will use a displacement map filter, as
described later. However, because this source image is a rectangle, to create
the illusion that the sphere is rotating, the code simply needs to slide the
moon surface photo horizontally.</p><p>Notice that the image actually contains two copies of the moon surface
photograph next to each other. This image is the source image from which image
data is copied repeatedly to create the appearance of motion. By having two
copies of the image next to each other, a continuous, uninterrupted scrolling
effect can more easily be created. Let&#x27;s walk through the process of the
animation step-by-step to see how this works.</p><p>The process actually involves two separate ActionScript objects. First, there is
the loaded source image, which in the code is represented by the BitmapData
instance named <code>textureMap</code>. As described previously, <code>textureMap</code> is populated
with image data as soon as the external image loads, using this code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">textureMap = event.target.content.bitmapData;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of <code>textureMap</code> is the rectangle moon image. In addition, to create
the animated rotation, the code uses a Bitmap instance named <code>sphere</code>, which is
the actual display object that shows the moon image onscreen. Like <code>textureMap</code>,
the <code>sphere</code> object is created and populated with its initial image data in the
<code>imageLoadComplete()</code> method, using the following code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">sphere = new Bitmap();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">sphere.bitmapData = new BitmapData(textureMap.width / 2, textureMap.height);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">sphere.bitmapData.copyPixels(textureMap,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                     new Rectangle(0, 0, sphere.width, sphere.height),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                     new Point(0, 0));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As the code shows, <code>sphere</code> is instantiated. Its <code>bitmapData</code> property (the raw
image data that is displayed by <code>sphere</code>) is created with the same height and
half the width of <code>textureMap</code>. In other words, the content of <code>sphere</code> will be
the size of one moon photo (since the <code>textureMap</code> image contains two moon
photos side-by-side). Next the <code>bitmapData</code> property is filled with image data
using its <code>copyPixels()</code> method. The parameters in the <code>copyPixels()</code> method
call indicate several things:</p><ul><li><p>The first parameter indicates that the image data is copied from <code>textureMap</code>.</p></li><li><p>The second parameter, a new Rectangle instance, specifies from which part of
<code>textureMap</code> the image snapshot should be taken; in this case the snapshot is
a rectangle starting from the top left corner of <code>textureMap</code> (indicated by
the first two <code>Rectangle()</code> parameters: <code>0, 0</code>) and the rectangle snapshot&#x27;s
width and height match the <code>width</code> and <code>height</code> properties of <code>sphere</code>.</p></li><li><p>The third parameter, a new Point instance with x and y values of <code>0</code>, defines
the destination of the pixel data—in this case, the top-left corner (0, 0) of
<code>sphere.bitmapData</code>.</p></li></ul><p>Represented visually, the code copies the pixels from <code>textureMap</code> outlined in
the following image and pastes them onto <code>sphere</code>. In other words, the
BitmapData content of <code>sphere</code> is the portion of <code>textureMap</code> highlighted here:</p><p><img loading="lazy" src="/assets/images/bt_moon_example_map_2_popup-bfd40899b81bab7955f60b375dd58006.png" width="790" height="198" class="img_ev3q"></p><p>Remember, however, that this is just the initial state of <code>sphere</code> —the first
image content that&#x27;s copied onto <code>sphere</code>.</p><p>With the source image loaded and <code>sphere</code> created, the final task performed by
the <code>imageLoadComplete()</code> method is to set up the animation. The animation is
driven by a Timer instance named <code>rotationTimer</code>, which is created and started
by the following code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var rotationTimer:Timer = new Timer(15);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">rotationTimer.addEventListener(TimerEvent.TIMER, rotateMoon);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">rotationTimer.start();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code first creates the Timer instance named <code>rotationTimer</code> ; the parameter
passed to the <code>Timer()</code> constructor indicates that <code>rotationTimer</code> should
trigger its <code>timer</code> event every 15 milliseconds. Next, the <code>addEventListener()</code>
method is called, specifying that when the <code>timer</code> event (<code>TimerEvent.TIMER</code>)
occurs, the method <code>rotateMoon()</code> is called. Finally, the timer is actually
started by calling its <code>start()</code> method.</p><p>Because of the way <code>rotationTimer</code> is defined, approximately every 15
milliseconds Flash Player calls the <code>rotateMoon()</code> method in the MoonSphere
class, which is where the animation of the moon happens. The source code of the
<code>rotateMoon()</code> method is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">private function rotateMoon(event:TimerEvent):void</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    sourceX += 1;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    if (sourceX &gt; textureMap.width / 2)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        sourceX = 0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    sphere.Data.copyPixels(textureMap,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            new Rectangle(sourceX, 0, sphere.width, sphere.height),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            new Point(0, 0));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    event.updateAfterEvent();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code does three things:</p><ol><li><p>The value of the variable <code>sourceX</code> (initially set to 0) increments by 1.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">sourceX += 1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As you&#x27;ll see, <code>sourceX</code> is used to determine the location in <code>textureMap</code>
from which the pixels will be copied onto <code>sphere</code> so this code has the
effect of moving the rectangle one pixel to the right on <code>textureMap</code>. Going
back to the visual representation, after several cycles of animation the
source rectangle will have moved several pixels to the right, like this:</p><p><img loading="lazy" src="/assets/images/bt_moon_example_map_3_popup-0c3504a85ca0191dba2e1eb3f9fe9959.png" width="790" height="198" class="img_ev3q"></p><p>After several more cycles, the rectangle will have moved even farther:</p><p><img loading="lazy" src="/assets/images/bt_moon_example_map_4_popup-09509778651078a7a9886058063fc819.png" width="790" height="198" class="img_ev3q"></p><p>This gradual, steady shift in the location from which the pixels are copied
is the key to the animation. By slowly and continuously moving the source
location to the right, the image that is displayed on the screen in <code>sphere</code>
appears to continuously slide to the left. This is the reason why the source
image (<code>textureMap</code>) needs to have two copies of the moon surface photo.
Because the rectangle is continually moving to the right, most of the time
it is not over one single moon photo but rather overlaps the two moon
photos.</p></li><li><p>With the source rectangle slowly moving to the right, there is one problem.
Eventually the rectangle will reach the right edge of <code>textureMap</code> and it
will run out of moon photo pixels to copy onto <code>sphere</code>:</p><p><img loading="lazy" src="/assets/images/bt_moon_example_map_5_popup-a5239b1085c903f377b8f8116d7befbb.png" width="790" height="198" class="img_ev3q"></p><p>The next lines of code address this issue:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">if (sourceX &gt;= textureMap.width / 2)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    sourceX = 0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code checks if <code>sourceX</code> (the left edge of the rectangle) has reached
the middle of <code>textureMap</code>. If so, it resets <code>sourceX</code> back to 0, moving it
back to the left edge of <code>textureMap</code> and starting the cycle over again:</p><p><img loading="lazy" src="/assets/images/bt_moon_example_map_2_0_popup-bfd40899b81bab7955f60b375dd58006.png" width="790" height="198" class="img_ev3q"></p></li><li><p>With the appropriate <code>sourceX</code> value calculated, the final step in creating
the animation is to actually copy the new source rectangle pixels onto
<code>sphere</code>. The code that does this is very similar to the code that initially
populated <code>sphere</code> (described previously); the only difference is that in
this case, in the <code>new Rectangle()</code> constructor call, the left edge of the
rectangle is placed at <code>sourceX</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">sphere.bitmapData.copyPixels(textureMap,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                        new Rectangle(sourceX, 0, sphere.width, sphere.height),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                        new Point(0, 0));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>Remember that this code is called repeatedly, every 15 milliseconds. As the
source rectangle&#x27;s location is continuously shifted, and the pixels are copied
onto <code>sphere</code>, the appearance on the screen is that the moon photo image
represented by <code>sphere</code> continuously slides. In other words, the moon appears to
rotate continuously.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-spherical-appearance">Creating the spherical appearance<a href="#creating-the-spherical-appearance" class="hash-link" aria-label="Direct link to Creating the spherical appearance" title="Direct link to Creating the spherical appearance">​</a></h2><p>The moon, of course, is a sphere and not a rectangle. Consequently, the sample
needs to take the rectangular moon surface photo, as it continuously animates,
and convert it into a sphere. This involves two separate steps: a mask is used
to hide all the content except for a circular region of the moon surface photo,
and a displacement map filter is used to distort the appearance of the moon
photo to make it look three-dimensional.</p><p>First, a circle-shaped mask is used to hide all the content of the MoonSphere
object except for the sphere created by the filter. The following code creates
the mask as a Shape instance and applies it as the mask of the MoonSphere
instance:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">moonMask = new Shape();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">moonMask.graphics.beginFill(0);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">moonMask.graphics.drawCircle(0, 0, radius);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">this.addChild(moonMask);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">this.mask = moonMask;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that since MoonSphere is a display object (it is based on the Sprite
class), the mask can be applied directly to the MoonSphere instance using its
inherited <code>mask</code> property.</p><p><img loading="lazy" src="/assets/images/bt_moon_masked_but_not_filtered-f2e6d4f0920baddcb74586ec74cd4b96.png" width="216" height="216" class="img_ev3q"></p><p>Simply hiding parts of the photo using a circle-shaped mask isn&#x27;t enough to
create a realistic-looking rotating-sphere effect. Because of the way the photo
of the moon&#x27;s surface was taken, its dimensions aren&#x27;t proportional; the
portions of the image that are more toward the top or bottom of the image are
more distorted and stretched compared to the portions in the equator. To distort
the appearance of the moon photo to make it look three-dimensional, we&#x27;ll use a
displacement map filter.</p><p>A displacement map filter is a type of filter that is used to distort an image.
In this case, the moon photo will be &quot;distorted&quot; to make it look more realistic,
by squeezing the top and bottom of the image horizontally, while leaving the
middle unchanged. Assuming the filter operates on a square-shaped portion of the
photo, squeezing the top and bottom but not the middle will turn the square into
a circle. A side effect of animating this distorted image is that the middle of
the image seems to move farther in actual pixel distance than the areas close to
the top and bottom, which creates the illusion that the circle is actually a
three-dimensional object (a sphere).</p><p>The following code is used to create the displacement map filter, named
<code>displaceFilter</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var displaceFilter:DisplacementMapFilter;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">displaceFilter = new DisplacementMapFilter(fisheyeLens,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            new Point(radius, 0),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            BitmapDataChannel.RED,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            BitmapDataChannel.GREEN,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            radius, 0);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first parameter, <code>fisheyeLens</code>, is known as the map image; in this case it
is a BitmapData object that is created programmatically. The creation of that
image is described in
<a href="/docs/development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon#creating-a-bitmap-image-by-setting-pixel-values">Creating a bitmap image by setting pixel values</a>.
The other parameters describe the position in the filtered image at which the
filter should be applied, which color channels will be used to control the
displacement effect, and to what extent they will affect the displacement. Once
the displacement map filter is created, it is applied to <code>sphere</code>, still within
the <code>imageLoadComplete()</code> method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">sphere.filters = [displaceFilter];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The final image, with mask and displacement map filter applied, looks like this:</p><p><img loading="lazy" src="/assets/images/bt_moon_masked_and_filtered-309acc2c2feb7d72ff180a5ce311b5e4.png" width="216" height="216" class="img_ev3q"></p><p>With every cycle of the rotating moon animation, the BitmapData content of
sphere is overwritten by a new snapshot of the source image data. However, the
filter does not need to be re-applied each time. This is because the filter is
applied to the Bitmap instance (the display object) rather than to the bitmap
data (the raw pixel information). Remember, the Bitmap instance is not the
actual bitmap data; it is a display object that displays the bitmap data on the
screen. To use an analogy, a Bitmap instance is like the slide projector that is
used to display photographic slides on a screen, and a BitmapData object is like
the actual photographic slide that can be presented through a slide projector. A
filter can be applied directly to a BitmapData object, which would be comparable
to drawing directly onto a photographic slide to alter the image. A filter can
also be applied to any display object, including a Bitmap instance; this would
be like placing a filter in front of the slide projector&#x27;s lens to distort the
output shown on the screen (without altering the original slide at all). Because
the raw bitmap data is accessible through a Bitmap instance&#x27;s bitmapData
property, the filter could have been applied directly to the raw bitmap data.
However, in this case, it makes sense to apply the filter to the Bitmap display
object rather than to the bitmap data.</p><p>For detailed information about using the displacement map filter in
ActionScript, see
<a href="/docs/development/display/filtering-display-objects">Filtering display objects</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-bitmap-image-by-setting-pixel-values">Creating a bitmap image by setting pixel values<a href="#creating-a-bitmap-image-by-setting-pixel-values" class="hash-link" aria-label="Direct link to Creating a bitmap image by setting pixel values" title="Direct link to Creating a bitmap image by setting pixel values">​</a></h2><p>One important aspect of a displacement map filter is that it actually involves
two images. One image, the source image, is the image that is actually altered
by the filter. In this sample, the source image is the Bitmap instance named
<code>sphere</code>. The other image used by the filter is known as the map image. The map
image is not actually displayed on the screen. Instead, the color of each of its
pixels is used as an input to the displacement function—the color of the pixel
at a certain x, y coordinate in the map image determines how much displacement
(physical shift in position) is applied to the pixel at that x, y coordinate in
the source image.</p><p>Consequently, to use the displacement map filter to create a sphere effect, the
sample needs the appropriate map image—one that has a gray background and a
circle that&#x27;s filled with a gradient of a single color (red) going horizontally
from dark to light, as shown here:</p><p><img loading="lazy" src="/assets/images/bt_moon_displacement_map_image-d33ecabe392a0c1b1f43fdcde214a91b.png" width="200" height="200" class="img_ev3q"></p><p>Because only one map image and filter are used in this sample, the map image is
only created once, in the <code>imageLoadComplete()</code> method (in other words, when the
external image finishes loading). The map image, named <code>fisheyeLens</code>, is created
by calling the MoonSphere class&#x27;s <code>createFisheyeMap()</code> method:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var fisheyeLens:BitmapData = createFisheyeMap(radius);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Inside the <code>createFisheyeMap()</code> method, the map image is actually drawn one
pixel at a time using the BitmapData class&#x27;s <code>setPixel()</code> method. The complete
code for the <code>createFisheyeMap()</code> method is listed here, followed by a
step-by-step discussion of how it works:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">private function createFisheyeMap(radius:int):BitmapData</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    var diameter:int = 2 * radius;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    var result:BitmapData = new BitmapData(diameter,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                        diameter,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                        false,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                        0x808080);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Loop through the pixels in the image one by one</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    for (var i:int = 0; i &lt; diameter; i++)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        for (var j:int = 0; j &lt; diameter; j++)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // Calculate the x and y distances of this pixel from</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // the center of the circle (as a percentage of the radius).</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            var pctX:Number = (i - radius) / radius;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            var pctY:Number = (j - radius) / radius;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // Calculate the linear distance of this pixel from</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // the center of the circle (as a percentage of the radius).</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            var pctDistance:Number = Math.sqrt(pctX * pctX + pctY * pctY);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // If the current pixel is inside the circle,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // set its color.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            if (pctDistance &lt; 1)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                // Calculate the appropriate color depending on the</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                // distance of this pixel from the center of the circle.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                var red:int;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                var green:int;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                var blue:int;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                var rgb:uint;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                red = 128 * (1 + 0.75 * pctX * pctX * pctX / (1 - pctY * pctY));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                green = 0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                blue = 0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                rgb = (red &lt;&lt; 16 | green &lt;&lt; 8 | blue);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                // Set the pixel to the calculated color.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                result.setPixel(i, j, rgb);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    return result;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First, when the method is called it receives a parameter, <code>radius</code>, indicating
the radius of the circle-shaped image to create. Next, the code creates the
BitmapData object on which the circle will be drawn. That object, named
<code>result</code>, is eventually passed back as the return value of the method. As shown
in the following code snippet, the <code>result</code> BitmapData instance is created with
a width and height as big as the diameter of the circle, without transparency
(<code>false</code> for the third parameter), and pre-filled with the color <code>0x808080</code>
(middle gray):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var result:BitmapData = new BitmapData(diameter,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                diameter,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                false,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                0x808080);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, the code uses two loops to iterate over each pixel of the image. The outer
loop goes through each column of the image from left to right (using the
variable <code>i</code> to represent the horizontal position of the pixel currently being
manipulated), while the inner loop goes through each pixel of the current column
from top to bottom (with the variable <code>j</code> representing the vertical position of
the current pixel). The code for the loops (with the inner loop&#x27;s contents
omitted) is shown here:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">for (var i:int = 0; i &lt; diameter; i++)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    for (var j:int = 0; j &lt; diameter; j++)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As the loops cycle through the pixels one by one, at each pixel a value (the
color value of that pixel in the map image) is calculated. This process involves
four steps:</p><ol><li><p>The code calculates the distance of the current pixel from the center of the
circle along the x axis (<code>i - radius</code>). That value is divided by the radius
to make it a percentage of the radius rather than an absolute distance
(<code>(i - radius) / radius</code>). That percentage value is stored in a variable
named <code>pctX</code>, and the equivalent value for the y axis is calculated and
stored in the variable <code>pctY</code>, as shown in this code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var pctX:Number = (i - radius) / radius;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">var pctY:Number = (j - radius) / radius;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Using a standard trigonometric formula, the Pythagorean theorem, the linear
distance between the center of the circle and the current point is
calculated from <code>pctX</code> and <code>pctY</code>. That value is stored in a variable named
<code>pctDistance</code>, as shown here:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">var pctDistance:Number = Math.sqrt(pctX * pctX + pctY * pctY);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Next, the code checks whether the distance percentage is less than 1
(meaning 100% of the radius, or in other words, if the pixel being
considered is within the radius of the circle). If the pixel falls inside
the circle, it is assigned a calculated color value (omitted here, but
described in step 4); if not, nothing further happens with that pixel so its
color is left as the default middle gray:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">if (pctDistance &lt; 1)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>For those pixels that fall inside the circle, a color value is calculated
for the pixel. The final color will be a shade of red ranging from black (0%
red) at the left edge of the circle to bright (100%) red at the right edge
of the circle. The color value is initially calculated in three parts (red,
green, and blue), as shown here:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">red = 128 * (1 + 0.75 * pctX * pctX * pctX / (1 - pctY * pctY));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">green = 0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">blue = 0;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that only the red portion of the color (the variable <code>red</code>) actually
has a value. The green and blue values (the variables <code>green</code> and <code>blue</code>)
are shown here for clarity, but could be omitted. Since the purpose of this
method is to create a circle that contains a red gradient, no green or blue
values are needed.</p><p>Once the three individual color values are determined, they are combined
into a single integer color value using a standard bit-shifting algorithm,
shown in this code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">rgb = (red &lt;&lt; 16 | green &lt;&lt; 8 | blue);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, with the color value calculated, that value is actually assigned to
the current pixel using the <code>setPixel()</code> method of the <code>result</code> BitmapData
object, shown here:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">result.setPixel(i, j, rgb);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/airsdk/airsdk.dev/edit/main/docs/development/display/working-with-bitmaps/bitmap-example-animated-spinning-moon.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/development/display/working-with-bitmaps/basics-of-working-with-bitmaps"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Basics of working with bitmaps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/development/display/working-with-bitmaps/compressing-bitmap-data"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Compressing bitmap data</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#loading-an-external-image-as-bitmap-data" class="table-of-contents__link toc-highlight">Loading an external image as bitmap data</a></li><li><a href="#creating-animation-by-copying-pixels" class="table-of-contents__link toc-highlight">Creating animation by copying pixels</a></li><li><a href="#creating-the-spherical-appearance" class="table-of-contents__link toc-highlight">Creating the spherical appearance</a></li><li><a href="#creating-a-bitmap-image-by-setting-pixel-values" class="table-of-contents__link toc-highlight">Creating a bitmap image by setting pixel values</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/features">Features</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/basics/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/reference">Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/community">Community</a></li><li class="footer__item"><a class="footer__link-item" href="/showcase">Showcase</a></li><li class="footer__item"><a href="https://github.com/airsdk/Adobe-Runtime-Support/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forum.starling-framework.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Starling Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/actionscript-3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/news">News</a></li><li class="footer__item"><a href="https://github.com/airsdk/airsdk.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/"><img src="/images/logo.svg" alt="AIR" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/images/logo.svg" alt="AIR" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Except as otherwise noted, this work is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution 3.0</a> License, and code samples are licensed under the MIT License. <br>Adobe, the Adobe logo, Adobe AIR, ActionScript, AIR, Flash, Flash Builder, Flash Lite, Flex, MXML, and Pixel Bender are either registered trademarks or trademarks of Adobe Systems Incorporated in the United States and/or other countries.<br>Much of this content is based on the original <a href="https://help.adobe.com/en_US/air/build/index.html">Adobe developer documentation</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.8ca38e49.js"></script>
<script src="/assets/js/main.c6d97874.js"></script>
</body>
</html>